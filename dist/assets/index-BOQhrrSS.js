import{V as Ce,G as ll,c as _t,D as Jl,d as oa,B as Jo,F as Gs,e as Xe,f as Wo,g as sp,h as ip,i as Dm,j as Yr,O as Fl,I as Pn,k as rp,l as Ei,m as Us,n as Bs,o as Rm,a as Om,b as ha,p as Ur,q as cp,r as op,s as up,t as dp,W as fp,u as mp,v as hp,A as pp,w as gp,x as xp,y as yp,P as Lm,z as bp,E as vp,H as Sp,J as jp,K as km}from"./three-core-3Ew0-DSc.js";import{O as Cp}from"./three-controls-B4yth0q7.js";(function(){const c=document.createElement("link").relList;if(c&&c.supports&&c.supports("modulepreload"))return;for(const m of document.querySelectorAll('link[rel="modulepreload"]'))o(m);new MutationObserver(m=>{for(const h of m)if(h.type==="childList")for(const S of h.addedNodes)S.tagName==="LINK"&&S.rel==="modulepreload"&&o(S)}).observe(document,{childList:!0,subtree:!0});function f(m){const h={};return m.integrity&&(h.integrity=m.integrity),m.referrerPolicy&&(h.referrerPolicy=m.referrerPolicy),m.crossOrigin==="use-credentials"?h.credentials="include":m.crossOrigin==="anonymous"?h.credentials="omit":h.credentials="same-origin",h}function o(m){if(m.ep)return;m.ep=!0;const h=f(m);fetch(m.href,h)}})();function Im(u){return u&&u.__esModule&&Object.prototype.hasOwnProperty.call(u,"default")?u.default:u}var Go={exports:{}},wi={};/**
 * @license React
 * react-jsx-runtime.production.js
 *
 * Copyright (c) Meta Platforms, Inc. and affiliates.
 *
 * This source code is licensed under the MIT license found in the
 * LICENSE file in the root directory of this source tree.
 */var Hm;function wp(){if(Hm)return wi;Hm=1;var u=Symbol.for("react.transitional.element"),c=Symbol.for("react.fragment");function f(o,m,h){var S=null;if(h!==void 0&&(S=""+h),m.key!==void 0&&(S=""+m.key),"key"in m){h={};for(var N in m)N!=="key"&&(h[N]=m[N])}else h=m;return m=h.ref,{$$typeof:u,type:o,key:S,ref:m!==void 0?m:null,props:h}}return wi.Fragment=c,wi.jsx=f,wi.jsxs=f,wi}var Um;function Np(){return Um||(Um=1,Go.exports=wp()),Go.exports}var i=Np(),Yo={exports:{}},Me={};/**
 * @license React
 * react.production.js
 *
 * Copyright (c) Meta Platforms, Inc. and affiliates.
 *
 * This source code is licensed under the MIT license found in the
 * LICENSE file in the root directory of this source tree.
 */var Bm;function Mp(){if(Bm)return Me;Bm=1;var u=Symbol.for("react.transitional.element"),c=Symbol.for("react.portal"),f=Symbol.for("react.fragment"),o=Symbol.for("react.strict_mode"),m=Symbol.for("react.profiler"),h=Symbol.for("react.consumer"),S=Symbol.for("react.context"),N=Symbol.for("react.forward_ref"),v=Symbol.for("react.suspense"),p=Symbol.for("react.memo"),D=Symbol.for("react.lazy"),T=Symbol.for("react.activity"),G=Symbol.iterator;function Y(y){return y===null||typeof y!="object"?null:(y=G&&y[G]||y["@@iterator"],typeof y=="function"?y:null)}var X={isMounted:function(){return!1},enqueueForceUpdate:function(){},enqueueReplaceState:function(){},enqueueSetState:function(){}},O=Object.assign,xe={};function Z(y,_,Q){this.props=y,this.context=_,this.refs=xe,this.updater=Q||X}Z.prototype.isReactComponent={},Z.prototype.setState=function(y,_){if(typeof y!="object"&&typeof y!="function"&&y!=null)throw Error("takes an object of state variables to update or a function which returns an object of state variables.");this.updater.enqueueSetState(this,y,_,"setState")},Z.prototype.forceUpdate=function(y){this.updater.enqueueForceUpdate(this,y,"forceUpdate")};function me(){}me.prototype=Z.prototype;function U(y,_,Q){this.props=y,this.context=_,this.refs=xe,this.updater=Q||X}var le=U.prototype=new me;le.constructor=U,O(le,Z.prototype),le.isPureReactComponent=!0;var fe=Array.isArray;function De(){}var de={H:null,A:null,T:null,S:null},ce=Object.prototype.hasOwnProperty;function ve(y,_,Q){var ee=Q.ref;return{$$typeof:u,type:y,key:_,ref:ee!==void 0?ee:null,props:Q}}function W(y,_){return ve(y.type,_,y.props)}function F(y){return typeof y=="object"&&y!==null&&y.$$typeof===u}function he(y){var _={"=":"=0",":":"=2"};return"$"+y.replace(/[=:]/g,function(Q){return _[Q]})}var ae=/\/+/g;function we(y,_){return typeof y=="object"&&y!==null&&y.key!=null?he(""+y.key):_.toString(36)}function Pe(y){switch(y.status){case"fulfilled":return y.value;case"rejected":throw y.reason;default:switch(typeof y.status=="string"?y.then(De,De):(y.status="pending",y.then(function(_){y.status==="pending"&&(y.status="fulfilled",y.value=_)},function(_){y.status==="pending"&&(y.status="rejected",y.reason=_)})),y.status){case"fulfilled":return y.value;case"rejected":throw y.reason}}throw y}function A(y,_,Q,ee,pe){var Se=typeof y;(Se==="undefined"||Se==="boolean")&&(y=null);var Ne=!1;if(y===null)Ne=!0;else switch(Se){case"bigint":case"string":case"number":Ne=!0;break;case"object":switch(y.$$typeof){case u:case c:Ne=!0;break;case D:return Ne=y._init,A(Ne(y._payload),_,Q,ee,pe)}}if(Ne)return pe=pe(y),Ne=ee===""?"."+we(y,0):ee,fe(pe)?(Q="",Ne!=null&&(Q=Ne.replace(ae,"$&/")+"/"),A(pe,_,Q,"",function(Qt){return Qt})):pe!=null&&(F(pe)&&(pe=W(pe,Q+(pe.key==null||y&&y.key===pe.key?"":(""+pe.key).replace(ae,"$&/")+"/")+Ne)),_.push(pe)),1;Ne=0;var Je=ee===""?".":ee+":";if(fe(y))for(var ye=0;ye<y.length;ye++)ee=y[ye],Se=Je+we(ee,ye),Ne+=A(ee,_,Q,Se,pe);else if(ye=Y(y),typeof ye=="function")for(y=ye.call(y),ye=0;!(ee=y.next()).done;)ee=ee.value,Se=Je+we(ee,ye++),Ne+=A(ee,_,Q,Se,pe);else if(Se==="object"){if(typeof y.then=="function")return A(Pe(y),_,Q,ee,pe);throw _=String(y),Error("Objects are not valid as a React child (found: "+(_==="[object Object]"?"object with keys {"+Object.keys(y).join(", ")+"}":_)+"). If you meant to render a collection of children, use an array instead.")}return Ne}function B(y,_,Q){if(y==null)return y;var ee=[],pe=0;return A(y,ee,"","",function(Se){return _.call(Q,Se,pe++)}),ee}function oe(y){if(y._status===-1){var _=y._result;_=_(),_.then(function(Q){(y._status===0||y._status===-1)&&(y._status=1,y._result=Q)},function(Q){(y._status===0||y._status===-1)&&(y._status=2,y._result=Q)}),y._status===-1&&(y._status=0,y._result=_)}if(y._status===1)return y._result.default;throw y._result}var Re=typeof reportError=="function"?reportError:function(y){if(typeof window=="object"&&typeof window.ErrorEvent=="function"){var _=new window.ErrorEvent("error",{bubbles:!0,cancelable:!0,message:typeof y=="object"&&y!==null&&typeof y.message=="string"?String(y.message):String(y),error:y});if(!window.dispatchEvent(_))return}else if(typeof process=="object"&&typeof process.emit=="function"){process.emit("uncaughtException",y);return}console.error(y)},Te={map:B,forEach:function(y,_,Q){B(y,function(){_.apply(this,arguments)},Q)},count:function(y){var _=0;return B(y,function(){_++}),_},toArray:function(y){return B(y,function(_){return _})||[]},only:function(y){if(!F(y))throw Error("React.Children.only expected to receive a single React element child.");return y}};return Me.Activity=T,Me.Children=Te,Me.Component=Z,Me.Fragment=f,Me.Profiler=m,Me.PureComponent=U,Me.StrictMode=o,Me.Suspense=v,Me.__CLIENT_INTERNALS_DO_NOT_USE_OR_WARN_USERS_THEY_CANNOT_UPGRADE=de,Me.__COMPILER_RUNTIME={__proto__:null,c:function(y){return de.H.useMemoCache(y)}},Me.cache=function(y){return function(){return y.apply(null,arguments)}},Me.cacheSignal=function(){return null},Me.cloneElement=function(y,_,Q){if(y==null)throw Error("The argument must be a React element, but you passed "+y+".");var ee=O({},y.props),pe=y.key;if(_!=null)for(Se in _.key!==void 0&&(pe=""+_.key),_)!ce.call(_,Se)||Se==="key"||Se==="__self"||Se==="__source"||Se==="ref"&&_.ref===void 0||(ee[Se]=_[Se]);var Se=arguments.length-2;if(Se===1)ee.children=Q;else if(1<Se){for(var Ne=Array(Se),Je=0;Je<Se;Je++)Ne[Je]=arguments[Je+2];ee.children=Ne}return ve(y.type,pe,ee)},Me.createContext=function(y){return y={$$typeof:S,_currentValue:y,_currentValue2:y,_threadCount:0,Provider:null,Consumer:null},y.Provider=y,y.Consumer={$$typeof:h,_context:y},y},Me.createElement=function(y,_,Q){var ee,pe={},Se=null;if(_!=null)for(ee in _.key!==void 0&&(Se=""+_.key),_)ce.call(_,ee)&&ee!=="key"&&ee!=="__self"&&ee!=="__source"&&(pe[ee]=_[ee]);var Ne=arguments.length-2;if(Ne===1)pe.children=Q;else if(1<Ne){for(var Je=Array(Ne),ye=0;ye<Ne;ye++)Je[ye]=arguments[ye+2];pe.children=Je}if(y&&y.defaultProps)for(ee in Ne=y.defaultProps,Ne)pe[ee]===void 0&&(pe[ee]=Ne[ee]);return ve(y,Se,pe)},Me.createRef=function(){return{current:null}},Me.forwardRef=function(y){return{$$typeof:N,render:y}},Me.isValidElement=F,Me.lazy=function(y){return{$$typeof:D,_payload:{_status:-1,_result:y},_init:oe}},Me.memo=function(y,_){return{$$typeof:p,type:y,compare:_===void 0?null:_}},Me.startTransition=function(y){var _=de.T,Q={};de.T=Q;try{var ee=y(),pe=de.S;pe!==null&&pe(Q,ee),typeof ee=="object"&&ee!==null&&typeof ee.then=="function"&&ee.then(De,Re)}catch(Se){Re(Se)}finally{_!==null&&Q.types!==null&&(_.types=Q.types),de.T=_}},Me.unstable_useCacheRefresh=function(){return de.H.useCacheRefresh()},Me.use=function(y){return de.H.use(y)},Me.useActionState=function(y,_,Q){return de.H.useActionState(y,_,Q)},Me.useCallback=function(y,_){return de.H.useCallback(y,_)},Me.useContext=function(y){return de.H.useContext(y)},Me.useDebugValue=function(){},Me.useDeferredValue=function(y,_){return de.H.useDeferredValue(y,_)},Me.useEffect=function(y,_){return de.H.useEffect(y,_)},Me.useEffectEvent=function(y){return de.H.useEffectEvent(y)},Me.useId=function(){return de.H.useId()},Me.useImperativeHandle=function(y,_,Q){return de.H.useImperativeHandle(y,_,Q)},Me.useInsertionEffect=function(y,_){return de.H.useInsertionEffect(y,_)},Me.useLayoutEffect=function(y,_){return de.H.useLayoutEffect(y,_)},Me.useMemo=function(y,_){return de.H.useMemo(y,_)},Me.useOptimistic=function(y,_){return de.H.useOptimistic(y,_)},Me.useReducer=function(y,_,Q){return de.H.useReducer(y,_,Q)},Me.useRef=function(y){return de.H.useRef(y)},Me.useState=function(y){return de.H.useState(y)},Me.useSyncExternalStore=function(y,_,Q){return de.H.useSyncExternalStore(y,_,Q)},Me.useTransition=function(){return de.H.useTransition()},Me.version="19.2.0",Me}var Gm;function eu(){return Gm||(Gm=1,Yo.exports=Mp()),Yo.exports}var x=eu();const $m=Im(x);var Qo={exports:{}},Ni={},qo={exports:{}},Vo={};/**
 * @license React
 * scheduler.production.js
 *
 * Copyright (c) Meta Platforms, Inc. and affiliates.
 *
 * This source code is licensed under the MIT license found in the
 * LICENSE file in the root directory of this source tree.
 */var Ym;function Tp(){return Ym||(Ym=1,(function(u){function c(A,B){var oe=A.length;A.push(B);e:for(;0<oe;){var Re=oe-1>>>1,Te=A[Re];if(0<m(Te,B))A[Re]=B,A[oe]=Te,oe=Re;else break e}}function f(A){return A.length===0?null:A[0]}function o(A){if(A.length===0)return null;var B=A[0],oe=A.pop();if(oe!==B){A[0]=oe;e:for(var Re=0,Te=A.length,y=Te>>>1;Re<y;){var _=2*(Re+1)-1,Q=A[_],ee=_+1,pe=A[ee];if(0>m(Q,oe))ee<Te&&0>m(pe,Q)?(A[Re]=pe,A[ee]=oe,Re=ee):(A[Re]=Q,A[_]=oe,Re=_);else if(ee<Te&&0>m(pe,oe))A[Re]=pe,A[ee]=oe,Re=ee;else break e}}return B}function m(A,B){var oe=A.sortIndex-B.sortIndex;return oe!==0?oe:A.id-B.id}if(u.unstable_now=void 0,typeof performance=="object"&&typeof performance.now=="function"){var h=performance;u.unstable_now=function(){return h.now()}}else{var S=Date,N=S.now();u.unstable_now=function(){return S.now()-N}}var v=[],p=[],D=1,T=null,G=3,Y=!1,X=!1,O=!1,xe=!1,Z=typeof setTimeout=="function"?setTimeout:null,me=typeof clearTimeout=="function"?clearTimeout:null,U=typeof setImmediate<"u"?setImmediate:null;function le(A){for(var B=f(p);B!==null;){if(B.callback===null)o(p);else if(B.startTime<=A)o(p),B.sortIndex=B.expirationTime,c(v,B);else break;B=f(p)}}function fe(A){if(O=!1,le(A),!X)if(f(v)!==null)X=!0,De||(De=!0,he());else{var B=f(p);B!==null&&Pe(fe,B.startTime-A)}}var De=!1,de=-1,ce=5,ve=-1;function W(){return xe?!0:!(u.unstable_now()-ve<ce)}function F(){if(xe=!1,De){var A=u.unstable_now();ve=A;var B=!0;try{e:{X=!1,O&&(O=!1,me(de),de=-1),Y=!0;var oe=G;try{t:{for(le(A),T=f(v);T!==null&&!(T.expirationTime>A&&W());){var Re=T.callback;if(typeof Re=="function"){T.callback=null,G=T.priorityLevel;var Te=Re(T.expirationTime<=A);if(A=u.unstable_now(),typeof Te=="function"){T.callback=Te,le(A),B=!0;break t}T===f(v)&&o(v),le(A)}else o(v);T=f(v)}if(T!==null)B=!0;else{var y=f(p);y!==null&&Pe(fe,y.startTime-A),B=!1}}break e}finally{T=null,G=oe,Y=!1}B=void 0}}finally{B?he():De=!1}}}var he;if(typeof U=="function")he=function(){U(F)};else if(typeof MessageChannel<"u"){var ae=new MessageChannel,we=ae.port2;ae.port1.onmessage=F,he=function(){we.postMessage(null)}}else he=function(){Z(F,0)};function Pe(A,B){de=Z(function(){A(u.unstable_now())},B)}u.unstable_IdlePriority=5,u.unstable_ImmediatePriority=1,u.unstable_LowPriority=4,u.unstable_NormalPriority=3,u.unstable_Profiling=null,u.unstable_UserBlockingPriority=2,u.unstable_cancelCallback=function(A){A.callback=null},u.unstable_forceFrameRate=function(A){0>A||125<A?console.error("forceFrameRate takes a positive int between 0 and 125, forcing frame rates higher than 125 fps is not supported"):ce=0<A?Math.floor(1e3/A):5},u.unstable_getCurrentPriorityLevel=function(){return G},u.unstable_next=function(A){switch(G){case 1:case 2:case 3:var B=3;break;default:B=G}var oe=G;G=B;try{return A()}finally{G=oe}},u.unstable_requestPaint=function(){xe=!0},u.unstable_runWithPriority=function(A,B){switch(A){case 1:case 2:case 3:case 4:case 5:break;default:A=3}var oe=G;G=A;try{return B()}finally{G=oe}},u.unstable_scheduleCallback=function(A,B,oe){var Re=u.unstable_now();switch(typeof oe=="object"&&oe!==null?(oe=oe.delay,oe=typeof oe=="number"&&0<oe?Re+oe:Re):oe=Re,A){case 1:var Te=-1;break;case 2:Te=250;break;case 5:Te=1073741823;break;case 4:Te=1e4;break;default:Te=5e3}return Te=oe+Te,A={id:D++,callback:B,priorityLevel:A,startTime:oe,expirationTime:Te,sortIndex:-1},oe>Re?(A.sortIndex=oe,c(p,A),f(v)===null&&A===f(p)&&(O?(me(de),de=-1):O=!0,Pe(fe,oe-Re))):(A.sortIndex=Te,c(v,A),X||Y||(X=!0,De||(De=!0,he()))),A},u.unstable_shouldYield=W,u.unstable_wrapCallback=function(A){var B=G;return function(){var oe=G;G=B;try{return A.apply(this,arguments)}finally{G=oe}}}})(Vo)),Vo}var Qm;function Ep(){return Qm||(Qm=1,qo.exports=Tp()),qo.exports}var Xo={exports:{}},pa={};/**
 * @license React
 * react-dom.production.js
 *
 * Copyright (c) Meta Platforms, Inc. and affiliates.
 *
 * This source code is licensed under the MIT license found in the
 * LICENSE file in the root directory of this source tree.
 */var qm;function Ap(){if(qm)return pa;qm=1;var u=eu();function c(v){var p="https://react.dev/errors/"+v;if(1<arguments.length){p+="?args[]="+encodeURIComponent(arguments[1]);for(var D=2;D<arguments.length;D++)p+="&args[]="+encodeURIComponent(arguments[D])}return"Minified React error #"+v+"; visit "+p+" for the full message or use the non-minified dev environment for full errors and additional helpful warnings."}function f(){}var o={d:{f,r:function(){throw Error(c(522))},D:f,C:f,L:f,m:f,X:f,S:f,M:f},p:0,findDOMNode:null},m=Symbol.for("react.portal");function h(v,p,D){var T=3<arguments.length&&arguments[3]!==void 0?arguments[3]:null;return{$$typeof:m,key:T==null?null:""+T,children:v,containerInfo:p,implementation:D}}var S=u.__CLIENT_INTERNALS_DO_NOT_USE_OR_WARN_USERS_THEY_CANNOT_UPGRADE;function N(v,p){if(v==="font")return"";if(typeof p=="string")return p==="use-credentials"?p:""}return pa.__DOM_INTERNALS_DO_NOT_USE_OR_WARN_USERS_THEY_CANNOT_UPGRADE=o,pa.createPortal=function(v,p){var D=2<arguments.length&&arguments[2]!==void 0?arguments[2]:null;if(!p||p.nodeType!==1&&p.nodeType!==9&&p.nodeType!==11)throw Error(c(299));return h(v,p,null,D)},pa.flushSync=function(v){var p=S.T,D=o.p;try{if(S.T=null,o.p=2,v)return v()}finally{S.T=p,o.p=D,o.d.f()}},pa.preconnect=function(v,p){typeof v=="string"&&(p?(p=p.crossOrigin,p=typeof p=="string"?p==="use-credentials"?p:"":void 0):p=null,o.d.C(v,p))},pa.prefetchDNS=function(v){typeof v=="string"&&o.d.D(v)},pa.preinit=function(v,p){if(typeof v=="string"&&p&&typeof p.as=="string"){var D=p.as,T=N(D,p.crossOrigin),G=typeof p.integrity=="string"?p.integrity:void 0,Y=typeof p.fetchPriority=="string"?p.fetchPriority:void 0;D==="style"?o.d.S(v,typeof p.precedence=="string"?p.precedence:void 0,{crossOrigin:T,integrity:G,fetchPriority:Y}):D==="script"&&o.d.X(v,{crossOrigin:T,integrity:G,fetchPriority:Y,nonce:typeof p.nonce=="string"?p.nonce:void 0})}},pa.preinitModule=function(v,p){if(typeof v=="string")if(typeof p=="object"&&p!==null){if(p.as==null||p.as==="script"){var D=N(p.as,p.crossOrigin);o.d.M(v,{crossOrigin:D,integrity:typeof p.integrity=="string"?p.integrity:void 0,nonce:typeof p.nonce=="string"?p.nonce:void 0})}}else p==null&&o.d.M(v)},pa.preload=function(v,p){if(typeof v=="string"&&typeof p=="object"&&p!==null&&typeof p.as=="string"){var D=p.as,T=N(D,p.crossOrigin);o.d.L(v,D,{crossOrigin:T,integrity:typeof p.integrity=="string"?p.integrity:void 0,nonce:typeof p.nonce=="string"?p.nonce:void 0,type:typeof p.type=="string"?p.type:void 0,fetchPriority:typeof p.fetchPriority=="string"?p.fetchPriority:void 0,referrerPolicy:typeof p.referrerPolicy=="string"?p.referrerPolicy:void 0,imageSrcSet:typeof p.imageSrcSet=="string"?p.imageSrcSet:void 0,imageSizes:typeof p.imageSizes=="string"?p.imageSizes:void 0,media:typeof p.media=="string"?p.media:void 0})}},pa.preloadModule=function(v,p){if(typeof v=="string")if(p){var D=N(p.as,p.crossOrigin);o.d.m(v,{as:typeof p.as=="string"&&p.as!=="script"?p.as:void 0,crossOrigin:D,integrity:typeof p.integrity=="string"?p.integrity:void 0})}else o.d.m(v)},pa.requestFormReset=function(v){o.d.r(v)},pa.unstable_batchedUpdates=function(v,p){return v(p)},pa.useFormState=function(v,p,D){return S.H.useFormState(v,p,D)},pa.useFormStatus=function(){return S.H.useHostTransitionStatus()},pa.version="19.2.0",pa}var Vm;function zp(){if(Vm)return Xo.exports;Vm=1;function u(){if(!(typeof __REACT_DEVTOOLS_GLOBAL_HOOK__>"u"||typeof __REACT_DEVTOOLS_GLOBAL_HOOK__.checkDCE!="function"))try{__REACT_DEVTOOLS_GLOBAL_HOOK__.checkDCE(u)}catch(c){console.error(c)}}return u(),Xo.exports=Ap(),Xo.exports}/**
 * @license React
 * react-dom-client.production.js
 *
 * Copyright (c) Meta Platforms, Inc. and affiliates.
 *
 * This source code is licensed under the MIT license found in the
 * LICENSE file in the root directory of this source tree.
 */var Xm;function _p(){if(Xm)return Ni;Xm=1;var u=Ep(),c=eu(),f=zp();function o(e){var t="https://react.dev/errors/"+e;if(1<arguments.length){t+="?args[]="+encodeURIComponent(arguments[1]);for(var a=2;a<arguments.length;a++)t+="&args[]="+encodeURIComponent(arguments[a])}return"Minified React error #"+e+"; visit "+t+" for the full message or use the non-minified dev environment for full errors and additional helpful warnings."}function m(e){return!(!e||e.nodeType!==1&&e.nodeType!==9&&e.nodeType!==11)}function h(e){var t=e,a=e;if(e.alternate)for(;t.return;)t=t.return;else{e=t;do t=e,(t.flags&4098)!==0&&(a=t.return),e=t.return;while(e)}return t.tag===3?a:null}function S(e){if(e.tag===13){var t=e.memoizedState;if(t===null&&(e=e.alternate,e!==null&&(t=e.memoizedState)),t!==null)return t.dehydrated}return null}function N(e){if(e.tag===31){var t=e.memoizedState;if(t===null&&(e=e.alternate,e!==null&&(t=e.memoizedState)),t!==null)return t.dehydrated}return null}function v(e){if(h(e)!==e)throw Error(o(188))}function p(e){var t=e.alternate;if(!t){if(t=h(e),t===null)throw Error(o(188));return t!==e?null:e}for(var a=e,l=t;;){var n=a.return;if(n===null)break;var s=n.alternate;if(s===null){if(l=n.return,l!==null){a=l;continue}break}if(n.child===s.child){for(s=n.child;s;){if(s===a)return v(n),e;if(s===l)return v(n),t;s=s.sibling}throw Error(o(188))}if(a.return!==l.return)a=n,l=s;else{for(var r=!1,d=n.child;d;){if(d===a){r=!0,a=n,l=s;break}if(d===l){r=!0,l=n,a=s;break}d=d.sibling}if(!r){for(d=s.child;d;){if(d===a){r=!0,a=s,l=n;break}if(d===l){r=!0,l=s,a=n;break}d=d.sibling}if(!r)throw Error(o(189))}}if(a.alternate!==l)throw Error(o(190))}if(a.tag!==3)throw Error(o(188));return a.stateNode.current===a?e:t}function D(e){var t=e.tag;if(t===5||t===26||t===27||t===6)return e;for(e=e.child;e!==null;){if(t=D(e),t!==null)return t;e=e.sibling}return null}var T=Object.assign,G=Symbol.for("react.element"),Y=Symbol.for("react.transitional.element"),X=Symbol.for("react.portal"),O=Symbol.for("react.fragment"),xe=Symbol.for("react.strict_mode"),Z=Symbol.for("react.profiler"),me=Symbol.for("react.consumer"),U=Symbol.for("react.context"),le=Symbol.for("react.forward_ref"),fe=Symbol.for("react.suspense"),De=Symbol.for("react.suspense_list"),de=Symbol.for("react.memo"),ce=Symbol.for("react.lazy"),ve=Symbol.for("react.activity"),W=Symbol.for("react.memo_cache_sentinel"),F=Symbol.iterator;function he(e){return e===null||typeof e!="object"?null:(e=F&&e[F]||e["@@iterator"],typeof e=="function"?e:null)}var ae=Symbol.for("react.client.reference");function we(e){if(e==null)return null;if(typeof e=="function")return e.$$typeof===ae?null:e.displayName||e.name||null;if(typeof e=="string")return e;switch(e){case O:return"Fragment";case Z:return"Profiler";case xe:return"StrictMode";case fe:return"Suspense";case De:return"SuspenseList";case ve:return"Activity"}if(typeof e=="object")switch(e.$$typeof){case X:return"Portal";case U:return e.displayName||"Context";case me:return(e._context.displayName||"Context")+".Consumer";case le:var t=e.render;return e=e.displayName,e||(e=t.displayName||t.name||"",e=e!==""?"ForwardRef("+e+")":"ForwardRef"),e;case de:return t=e.displayName||null,t!==null?t:we(e.type)||"Memo";case ce:t=e._payload,e=e._init;try{return we(e(t))}catch{}}return null}var Pe=Array.isArray,A=c.__CLIENT_INTERNALS_DO_NOT_USE_OR_WARN_USERS_THEY_CANNOT_UPGRADE,B=f.__DOM_INTERNALS_DO_NOT_USE_OR_WARN_USERS_THEY_CANNOT_UPGRADE,oe={pending:!1,data:null,method:null,action:null},Re=[],Te=-1;function y(e){return{current:e}}function _(e){0>Te||(e.current=Re[Te],Re[Te]=null,Te--)}function Q(e,t){Te++,Re[Te]=e.current,e.current=t}var ee=y(null),pe=y(null),Se=y(null),Ne=y(null);function Je(e,t){switch(Q(Se,t),Q(pe,e),Q(ee,null),t.nodeType){case 9:case 11:e=(e=t.documentElement)&&(e=e.namespaceURI)?tm(e):0;break;default:if(e=t.tagName,t=t.namespaceURI)t=tm(t),e=am(t,e);else switch(e){case"svg":e=1;break;case"math":e=2;break;default:e=0}}_(ee),Q(ee,e)}function ye(){_(ee),_(pe),_(Se)}function Qt(e){e.memoizedState!==null&&Q(Ne,e);var t=ee.current,a=am(t,e.type);t!==a&&(Q(pe,e),Q(ee,a))}function Le(e){pe.current===e&&(_(ee),_(pe)),Ne.current===e&&(_(Ne),vi._currentValue=oe)}var Ft,Mt;function st(e){if(Ft===void 0)try{throw Error()}catch(a){var t=a.stack.trim().match(/\n( *(at )?)/);Ft=t&&t[1]||"",Mt=-1<a.stack.indexOf(`
    at`)?" (<anonymous>)":-1<a.stack.indexOf("@")?"@unknown:0:0":""}return`
`+Ft+e+Mt}var qt=!1;function it(e,t){if(!e||qt)return"";qt=!0;var a=Error.prepareStackTrace;Error.prepareStackTrace=void 0;try{var l={DetermineComponentFrameRoot:function(){try{if(t){var L=function(){throw Error()};if(Object.defineProperty(L.prototype,"props",{set:function(){throw Error()}}),typeof Reflect=="object"&&Reflect.construct){try{Reflect.construct(L,[])}catch(E){var M=E}Reflect.construct(e,[],L)}else{try{L.call()}catch(E){M=E}e.call(L.prototype)}}else{try{throw Error()}catch(E){M=E}(L=e())&&typeof L.catch=="function"&&L.catch(function(){})}}catch(E){if(E&&M&&typeof E.stack=="string")return[E.stack,M.stack]}return[null,null]}};l.DetermineComponentFrameRoot.displayName="DetermineComponentFrameRoot";var n=Object.getOwnPropertyDescriptor(l.DetermineComponentFrameRoot,"name");n&&n.configurable&&Object.defineProperty(l.DetermineComponentFrameRoot,"name",{value:"DetermineComponentFrameRoot"});var s=l.DetermineComponentFrameRoot(),r=s[0],d=s[1];if(r&&d){var g=r.split(`
`),w=d.split(`
`);for(n=l=0;l<g.length&&!g[l].includes("DetermineComponentFrameRoot");)l++;for(;n<w.length&&!w[n].includes("DetermineComponentFrameRoot");)n++;if(l===g.length||n===w.length)for(l=g.length-1,n=w.length-1;1<=l&&0<=n&&g[l]!==w[n];)n--;for(;1<=l&&0<=n;l--,n--)if(g[l]!==w[n]){if(l!==1||n!==1)do if(l--,n--,0>n||g[l]!==w[n]){var z=`
`+g[l].replace(" at new "," at ");return e.displayName&&z.includes("<anonymous>")&&(z=z.replace("<anonymous>",e.displayName)),z}while(1<=l&&0<=n);break}}}finally{qt=!1,Error.prepareStackTrace=a}return(a=e?e.displayName||e.name:"")?st(a):""}function nl(e,t){switch(e.tag){case 26:case 27:case 5:return st(e.type);case 16:return st("Lazy");case 13:return e.child!==t&&t!==null?st("Suspense Fallback"):st("Suspense");case 19:return st("SuspenseList");case 0:case 15:return it(e.type,!1);case 11:return it(e.type.render,!1);case 1:return it(e.type,!0);case 31:return st("Activity");default:return""}}function We(e){try{var t="",a=null;do t+=nl(e,a),a=e,e=e.return;while(e);return t}catch(l){return`
Error generating stack: `+l.message+`
`+l.stack}}var dt=Object.prototype.hasOwnProperty,sl=u.unstable_scheduleCallback,gl=u.unstable_cancelCallback,xl=u.unstable_shouldYield,Ml=u.unstable_requestPaint,Tt=u.unstable_now,Jt=u.unstable_getCurrentPriorityLevel,En=u.unstable_ImmediatePriority,Da=u.unstable_UserBlockingPriority,ua=u.unstable_NormalPriority,An=u.unstable_LowPriority,zn=u.unstable_IdlePriority,_n=u.log,ga=u.unstable_setDisableYieldValue,xa=null,lt=null;function Ca(e){if(typeof _n=="function"&&ga(e),lt&&typeof lt.setStrictMode=="function")try{lt.setStrictMode(xa,e)}catch{}}var Vt=Math.clz32?Math.clz32:as,$l=Math.log,Dn=Math.LN2;function as(e){return e>>>=0,e===0?32:31-($l(e)/Dn|0)|0}var Tl=256,El=262144,Pl=4194304;function rt(e){var t=e&42;if(t!==0)return t;switch(e&-e){case 1:return 1;case 2:return 2;case 4:return 4;case 8:return 8;case 16:return 16;case 32:return 32;case 64:return 64;case 128:return 128;case 256:case 512:case 1024:case 2048:case 4096:case 8192:case 16384:case 32768:case 65536:case 131072:return e&261888;case 262144:case 524288:case 1048576:case 2097152:return e&3932160;case 4194304:case 8388608:case 16777216:case 33554432:return e&62914560;case 67108864:return 67108864;case 134217728:return 134217728;case 268435456:return 268435456;case 536870912:return 536870912;case 1073741824:return 0;default:return e}}function yl(e,t,a){var l=e.pendingLanes;if(l===0)return 0;var n=0,s=e.suspendedLanes,r=e.pingedLanes;e=e.warmLanes;var d=l&134217727;return d!==0?(l=d&~s,l!==0?n=rt(l):(r&=d,r!==0?n=rt(r):a||(a=d&~e,a!==0&&(n=rt(a))))):(d=l&~s,d!==0?n=rt(d):r!==0?n=rt(r):a||(a=l&~e,a!==0&&(n=rt(a)))),n===0?0:t!==0&&t!==n&&(t&s)===0&&(s=n&-n,a=t&-t,s>=a||s===32&&(a&4194048)!==0)?t:n}function bl(e,t){return(e.pendingLanes&~(e.suspendedLanes&~e.pingedLanes)&t)===0}function Al(e,t){switch(e){case 1:case 2:case 4:case 8:case 64:return t+250;case 16:case 32:case 128:case 256:case 512:case 1024:case 2048:case 4096:case 8192:case 16384:case 32768:case 65536:case 131072:case 262144:case 524288:case 1048576:case 2097152:return t+5e3;case 4194304:case 8388608:case 16777216:case 33554432:return-1;case 67108864:case 134217728:case 268435456:case 536870912:case 1073741824:return-1;default:return-1}}function il(){var e=Pl;return Pl<<=1,(Pl&62914560)===0&&(Pl=4194304),e}function Ra(e){for(var t=[],a=0;31>a;a++)t.push(e);return t}function zl(e,t){e.pendingLanes|=t,t!==268435456&&(e.suspendedLanes=0,e.pingedLanes=0,e.warmLanes=0)}function k(e,t,a,l,n,s){var r=e.pendingLanes;e.pendingLanes=a,e.suspendedLanes=0,e.pingedLanes=0,e.warmLanes=0,e.expiredLanes&=a,e.entangledLanes&=a,e.errorRecoveryDisabledLanes&=a,e.shellSuspendCounter=0;var d=e.entanglements,g=e.expirationTimes,w=e.hiddenUpdates;for(a=r&~a;0<a;){var z=31-Vt(a),L=1<<z;d[z]=0,g[z]=-1;var M=w[z];if(M!==null)for(w[z]=null,z=0;z<M.length;z++){var E=M[z];E!==null&&(E.lane&=-536870913)}a&=~L}l!==0&&q(e,l,0),s!==0&&n===0&&e.tag!==0&&(e.suspendedLanes|=s&~(r&~t))}function q(e,t,a){e.pendingLanes|=t,e.suspendedLanes&=~t;var l=31-Vt(t);e.entangledLanes|=t,e.entanglements[l]=e.entanglements[l]|1073741824|a&261930}function V(e,t){var a=e.entangledLanes|=t;for(e=e.entanglements;a;){var l=31-Vt(a),n=1<<l;n&t|e[l]&t&&(e[l]|=t),a&=~n}}function I(e,t){var a=t&-t;return a=(a&42)!==0?1:ie(a),(a&(e.suspendedLanes|t))!==0?0:a}function ie(e){switch(e){case 2:e=1;break;case 8:e=4;break;case 32:e=16;break;case 256:case 512:case 1024:case 2048:case 4096:case 8192:case 16384:case 32768:case 65536:case 131072:case 262144:case 524288:case 1048576:case 2097152:case 4194304:case 8388608:case 16777216:case 33554432:e=128;break;case 268435456:e=134217728;break;default:e=0}return e}function J(e){return e&=-e,2<e?8<e?(e&134217727)!==0?32:268435456:8:2}function K(){var e=B.p;return e!==0?e:(e=window.event,e===void 0?32:Nm(e.type))}function te(e,t){var a=B.p;try{return B.p=e,t()}finally{B.p=a}}var $=Math.random().toString(36).slice(2),P="__reactFiber$"+$,ne="__reactProps$"+$,Ge="__reactContainer$"+$,bt="__reactEvents$"+$,Ve="__reactListeners$"+$,da="__reactHandles$"+$,H="__reactResources$"+$,je="__reactMarker$"+$;function Dt(e){delete e[P],delete e[ne],delete e[bt],delete e[Ve],delete e[da]}function ea(e){var t=e[P];if(t)return t;for(var a=e.parentNode;a;){if(t=a[Ge]||a[P]){if(a=t.alternate,t.child!==null||a!==null&&a.child!==null)for(e=om(e);e!==null;){if(a=e[P])return a;e=om(e)}return t}e=a,a=e.parentNode}return null}function ya(e){if(e=e[P]||e[Ge]){var t=e.tag;if(t===5||t===6||t===13||t===31||t===26||t===27||t===3)return e}return null}function pt(e){var t=e.tag;if(t===5||t===26||t===27||t===6)return e.stateNode;throw Error(o(33))}function vt(e){var t=e[H];return t||(t=e[H]={hoistableStyles:new Map,hoistableScripts:new Map}),t}function ct(e){e[je]=!0}var vl=new Set,Xt={};function Wt(e,t){wa(e,t),wa(e+"Capture",t)}function wa(e,t){for(Xt[e]=t,e=0;e<t.length;e++)vl.add(t[e])}var ot=RegExp("^[:A-Z_a-z\\u00C0-\\u00D6\\u00D8-\\u00F6\\u00F8-\\u02FF\\u0370-\\u037D\\u037F-\\u1FFF\\u200C-\\u200D\\u2070-\\u218F\\u2C00-\\u2FEF\\u3001-\\uD7FF\\uF900-\\uFDCF\\uFDF0-\\uFFFD][:A-Z_a-z\\u00C0-\\u00D6\\u00D8-\\u00F6\\u00F8-\\u02FF\\u0370-\\u037D\\u037F-\\u1FFF\\u200C-\\u200D\\u2070-\\u218F\\u2C00-\\u2FEF\\u3001-\\uD7FF\\uF900-\\uFDCF\\uFDF0-\\uFFFD\\-.0-9\\u00B7\\u0300-\\u036F\\u203F-\\u2040]*$"),Rt={},Xa={};function ba(e){return dt.call(Xa,e)?!0:dt.call(Rt,e)?!1:ot.test(e)?Xa[e]=!0:(Rt[e]=!0,!1)}function Ot(e,t,a){if(ba(t))if(a===null)e.removeAttribute(t);else{switch(typeof a){case"undefined":case"function":case"symbol":e.removeAttribute(t);return;case"boolean":var l=t.toLowerCase().slice(0,5);if(l!=="data-"&&l!=="aria-"){e.removeAttribute(t);return}}e.setAttribute(t,""+a)}}function Oa(e,t,a){if(a===null)e.removeAttribute(t);else{switch(typeof a){case"undefined":case"function":case"symbol":case"boolean":e.removeAttribute(t);return}e.setAttribute(t,""+a)}}function fa(e,t,a,l){if(l===null)e.removeAttribute(a);else{switch(typeof l){case"undefined":case"function":case"symbol":case"boolean":e.removeAttribute(a);return}e.setAttributeNS(t,a,""+l)}}function Lt(e){switch(typeof e){case"bigint":case"boolean":case"number":case"string":case"undefined":return e;case"object":return e;default:return""}}function rl(e){var t=e.type;return(e=e.nodeName)&&e.toLowerCase()==="input"&&(t==="checkbox"||t==="radio")}function cl(e,t,a){var l=Object.getOwnPropertyDescriptor(e.constructor.prototype,t);if(!e.hasOwnProperty(t)&&typeof l<"u"&&typeof l.get=="function"&&typeof l.set=="function"){var n=l.get,s=l.set;return Object.defineProperty(e,t,{configurable:!0,get:function(){return n.call(this)},set:function(r){a=""+r,s.call(this,r)}}),Object.defineProperty(e,t,{enumerable:l.enumerable}),{getValue:function(){return a},setValue:function(r){a=""+r},stopTracking:function(){e._valueTracker=null,delete e[t]}}}}function ol(e){if(!e._valueTracker){var t=rl(e)?"checked":"value";e._valueTracker=cl(e,t,""+e[t])}}function ke(e){if(!e)return!1;var t=e._valueTracker;if(!t)return!0;var a=t.getValue(),l="";return e&&(l=rl(e)?e.checked?"true":"false":e.value),e=l,e!==a?(t.setValue(e),!0):!1}function He(e){if(e=e||(typeof document<"u"?document:void 0),typeof e>"u")return null;try{return e.activeElement||e.body}catch{return e.body}}var ze=/[\n"\\]/g;function Ee(e){return e.replace(ze,function(t){return"\\"+t.charCodeAt(0).toString(16)+" "})}function kt(e,t,a,l,n,s,r,d){e.name="",r!=null&&typeof r!="function"&&typeof r!="symbol"&&typeof r!="boolean"?e.type=r:e.removeAttribute("type"),t!=null?r==="number"?(t===0&&e.value===""||e.value!=t)&&(e.value=""+Lt(t)):e.value!==""+Lt(t)&&(e.value=""+Lt(t)):r!=="submit"&&r!=="reset"||e.removeAttribute("value"),t!=null?Zt(e,r,Lt(t)):a!=null?Zt(e,r,Lt(a)):l!=null&&e.removeAttribute("value"),n==null&&s!=null&&(e.defaultChecked=!!s),n!=null&&(e.checked=n&&typeof n!="function"&&typeof n!="symbol"),d!=null&&typeof d!="function"&&typeof d!="symbol"&&typeof d!="boolean"?e.name=""+Lt(d):e.removeAttribute("name")}function Ht(e,t,a,l,n,s,r,d){if(s!=null&&typeof s!="function"&&typeof s!="symbol"&&typeof s!="boolean"&&(e.type=s),t!=null||a!=null){if(!(s!=="submit"&&s!=="reset"||t!=null)){ol(e);return}a=a!=null?""+Lt(a):"",t=t!=null?""+Lt(t):a,d||t===e.value||(e.value=t),e.defaultValue=t}l=l??n,l=typeof l!="function"&&typeof l!="symbol"&&!!l,e.checked=d?e.checked:!!l,e.defaultChecked=!!l,r!=null&&typeof r!="function"&&typeof r!="symbol"&&typeof r!="boolean"&&(e.name=r),ol(e)}function Zt(e,t,a){t==="number"&&He(e.ownerDocument)===e||e.defaultValue===""+a||(e.defaultValue=""+a)}function St(e,t,a,l){if(e=e.options,t){t={};for(var n=0;n<a.length;n++)t["$"+a[n]]=!0;for(a=0;a<e.length;a++)n=t.hasOwnProperty("$"+e[a].value),e[a].selected!==n&&(e[a].selected=n),n&&l&&(e[a].defaultSelected=!0)}else{for(a=""+Lt(a),t=null,n=0;n<e.length;n++){if(e[n].value===a){e[n].selected=!0,l&&(e[n].defaultSelected=!0);return}t!==null||e[n].disabled||(t=e[n])}t!==null&&(t.selected=!0)}}function va(e,t,a){if(t!=null&&(t=""+Lt(t),t!==e.value&&(e.value=t),a==null)){e.defaultValue!==t&&(e.defaultValue=t);return}e.defaultValue=a!=null?""+Lt(a):""}function gt(e,t,a,l){if(t==null){if(l!=null){if(a!=null)throw Error(o(92));if(Pe(l)){if(1<l.length)throw Error(o(93));l=l[0]}a=l}a==null&&(a=""),t=a}a=Lt(t),e.defaultValue=a,l=e.textContent,l===a&&l!==""&&l!==null&&(e.value=l),ol(e)}function Et(e,t){if(t){var a=e.firstChild;if(a&&a===e.lastChild&&a.nodeType===3){a.nodeValue=t;return}}e.textContent=t}var ul=new Set("animationIterationCount aspectRatio borderImageOutset borderImageSlice borderImageWidth boxFlex boxFlexGroup boxOrdinalGroup columnCount columns flex flexGrow flexPositive flexShrink flexNegative flexOrder gridArea gridRow gridRowEnd gridRowSpan gridRowStart gridColumn gridColumnEnd gridColumnSpan gridColumnStart fontWeight lineClamp lineHeight opacity order orphans scale tabSize widows zIndex zoom fillOpacity floodOpacity stopOpacity strokeDasharray strokeDashoffset strokeMiterlimit strokeOpacity strokeWidth MozAnimationIterationCount MozBoxFlex MozBoxFlexGroup MozLineClamp msAnimationIterationCount msFlex msZoom msFlexGrow msFlexNegative msFlexOrder msFlexPositive msFlexShrink msGridColumn msGridColumnSpan msGridRow msGridRowSpan WebkitAnimationIterationCount WebkitBoxFlex WebKitBoxFlexGroup WebkitBoxOrdinalGroup WebkitColumnCount WebkitColumns WebkitFlex WebkitFlexGrow WebkitFlexPositive WebkitFlexShrink WebkitLineClamp".split(" "));function Sa(e,t,a){var l=t.indexOf("--")===0;a==null||typeof a=="boolean"||a===""?l?e.setProperty(t,""):t==="float"?e.cssFloat="":e[t]="":l?e.setProperty(t,a):typeof a!="number"||a===0||ul.has(t)?t==="float"?e.cssFloat=a:e[t]=(""+a).trim():e[t]=a+"px"}function ls(e,t,a){if(t!=null&&typeof t!="object")throw Error(o(62));if(e=e.style,a!=null){for(var l in a)!a.hasOwnProperty(l)||t!=null&&t.hasOwnProperty(l)||(l.indexOf("--")===0?e.setProperty(l,""):l==="float"?e.cssFloat="":e[l]="");for(var n in t)l=t[n],t.hasOwnProperty(n)&&a[n]!==l&&Sa(e,n,l)}else for(var s in t)t.hasOwnProperty(s)&&Sa(e,s,t[s])}function ta(e){if(e.indexOf("-")===-1)return!1;switch(e){case"annotation-xml":case"color-profile":case"font-face":case"font-face-src":case"font-face-uri":case"font-face-format":case"font-face-name":case"missing-glyph":return!1;default:return!0}}var aa=new Map([["acceptCharset","accept-charset"],["htmlFor","for"],["httpEquiv","http-equiv"],["crossOrigin","crossorigin"],["accentHeight","accent-height"],["alignmentBaseline","alignment-baseline"],["arabicForm","arabic-form"],["baselineShift","baseline-shift"],["capHeight","cap-height"],["clipPath","clip-path"],["clipRule","clip-rule"],["colorInterpolation","color-interpolation"],["colorInterpolationFilters","color-interpolation-filters"],["colorProfile","color-profile"],["colorRendering","color-rendering"],["dominantBaseline","dominant-baseline"],["enableBackground","enable-background"],["fillOpacity","fill-opacity"],["fillRule","fill-rule"],["floodColor","flood-color"],["floodOpacity","flood-opacity"],["fontFamily","font-family"],["fontSize","font-size"],["fontSizeAdjust","font-size-adjust"],["fontStretch","font-stretch"],["fontStyle","font-style"],["fontVariant","font-variant"],["fontWeight","font-weight"],["glyphName","glyph-name"],["glyphOrientationHorizontal","glyph-orientation-horizontal"],["glyphOrientationVertical","glyph-orientation-vertical"],["horizAdvX","horiz-adv-x"],["horizOriginX","horiz-origin-x"],["imageRendering","image-rendering"],["letterSpacing","letter-spacing"],["lightingColor","lighting-color"],["markerEnd","marker-end"],["markerMid","marker-mid"],["markerStart","marker-start"],["overlinePosition","overline-position"],["overlineThickness","overline-thickness"],["paintOrder","paint-order"],["panose-1","panose-1"],["pointerEvents","pointer-events"],["renderingIntent","rendering-intent"],["shapeRendering","shape-rendering"],["stopColor","stop-color"],["stopOpacity","stop-opacity"],["strikethroughPosition","strikethrough-position"],["strikethroughThickness","strikethrough-thickness"],["strokeDasharray","stroke-dasharray"],["strokeDashoffset","stroke-dashoffset"],["strokeLinecap","stroke-linecap"],["strokeLinejoin","stroke-linejoin"],["strokeMiterlimit","stroke-miterlimit"],["strokeOpacity","stroke-opacity"],["strokeWidth","stroke-width"],["textAnchor","text-anchor"],["textDecoration","text-decoration"],["textRendering","text-rendering"],["transformOrigin","transform-origin"],["underlinePosition","underline-position"],["underlineThickness","underline-thickness"],["unicodeBidi","unicode-bidi"],["unicodeRange","unicode-range"],["unitsPerEm","units-per-em"],["vAlphabetic","v-alphabetic"],["vHanging","v-hanging"],["vIdeographic","v-ideographic"],["vMathematical","v-mathematical"],["vectorEffect","vector-effect"],["vertAdvY","vert-adv-y"],["vertOriginX","vert-origin-x"],["vertOriginY","vert-origin-y"],["wordSpacing","word-spacing"],["writingMode","writing-mode"],["xmlnsXlink","xmlns:xlink"],["xHeight","x-height"]]),La=/^[\u0000-\u001F ]*j[\r\n\t]*a[\r\n\t]*v[\r\n\t]*a[\r\n\t]*s[\r\n\t]*c[\r\n\t]*r[\r\n\t]*i[\r\n\t]*p[\r\n\t]*t[\r\n\t]*:/i;function la(e){return La.test(""+e)?"javascript:throw new Error('React has blocked a javascript: URL as a security precaution.')":e}function Na(){}var ka=null;function Ma(e){return e=e.target||e.srcElement||window,e.correspondingUseElement&&(e=e.correspondingUseElement),e.nodeType===3?e.parentNode:e}var en=null,tn=null;function _i(e){var t=ya(e);if(t&&(e=t.stateNode)){var a=e[ne]||null;e:switch(e=t.stateNode,t.type){case"input":if(kt(e,a.value,a.defaultValue,a.defaultValue,a.checked,a.defaultChecked,a.type,a.name),t=a.name,a.type==="radio"&&t!=null){for(a=e;a.parentNode;)a=a.parentNode;for(a=a.querySelectorAll('input[name="'+Ee(""+t)+'"][type="radio"]'),t=0;t<a.length;t++){var l=a[t];if(l!==e&&l.form===e.form){var n=l[ne]||null;if(!n)throw Error(o(90));kt(l,n.value,n.defaultValue,n.defaultValue,n.checked,n.defaultChecked,n.type,n.name)}}for(t=0;t<a.length;t++)l=a[t],l.form===e.form&&ke(l)}break e;case"textarea":va(e,a.value,a.defaultValue);break e;case"select":t=a.value,t!=null&&St(e,!!a.multiple,t,!1)}}}var Rn=!1;function On(e,t,a){if(Rn)return e(t,a);Rn=!0;try{var l=e(t);return l}finally{if(Rn=!1,(en!==null||tn!==null)&&(gr(),en&&(t=en,e=tn,tn=en=null,_i(t),e)))for(t=0;t<e.length;t++)_i(e[t])}}function Ln(e,t){var a=e.stateNode;if(a===null)return null;var l=a[ne]||null;if(l===null)return null;a=l[t];e:switch(t){case"onClick":case"onClickCapture":case"onDoubleClick":case"onDoubleClickCapture":case"onMouseDown":case"onMouseDownCapture":case"onMouseMove":case"onMouseMoveCapture":case"onMouseUp":case"onMouseUpCapture":case"onMouseEnter":(l=!l.disabled)||(e=e.type,l=!(e==="button"||e==="input"||e==="select"||e==="textarea")),e=!l;break e;default:e=!1}if(e)return null;if(a&&typeof a!="function")throw Error(o(231,t,typeof a));return a}var Za=!(typeof window>"u"||typeof window.document>"u"||typeof window.document.createElement>"u"),ns=!1;if(Za)try{var Ka={};Object.defineProperty(Ka,"passive",{get:function(){ns=!0}}),window.addEventListener("test",Ka,Ka),window.removeEventListener("test",Ka,Ka)}catch{ns=!1}var dl=null,kn=null,ss=null;function Di(){if(ss)return ss;var e,t=kn,a=t.length,l,n="value"in dl?dl.value:dl.textContent,s=n.length;for(e=0;e<a&&t[e]===n[e];e++);var r=a-e;for(l=1;l<=r&&t[a-l]===n[s-l];l++);return ss=n.slice(e,1<l?1-l:void 0)}function _l(e){var t=e.keyCode;return"charCode"in e?(e=e.charCode,e===0&&t===13&&(e=13)):e=t,e===10&&(e=13),32<=e||e===13?e:0}function is(){return!0}function Ri(){return!1}function jt(e){function t(a,l,n,s,r){this._reactName=a,this._targetInst=n,this.type=l,this.nativeEvent=s,this.target=r,this.currentTarget=null;for(var d in e)e.hasOwnProperty(d)&&(a=e[d],this[d]=a?a(s):s[d]);return this.isDefaultPrevented=(s.defaultPrevented!=null?s.defaultPrevented:s.returnValue===!1)?is:Ri,this.isPropagationStopped=Ri,this}return T(t.prototype,{preventDefault:function(){this.defaultPrevented=!0;var a=this.nativeEvent;a&&(a.preventDefault?a.preventDefault():typeof a.returnValue!="unknown"&&(a.returnValue=!1),this.isDefaultPrevented=is)},stopPropagation:function(){var a=this.nativeEvent;a&&(a.stopPropagation?a.stopPropagation():typeof a.cancelBubble!="unknown"&&(a.cancelBubble=!0),this.isPropagationStopped=is)},persist:function(){},isPersistent:is}),t}var Fa={eventPhase:0,bubbles:0,cancelable:0,timeStamp:function(e){return e.timeStamp||Date.now()},defaultPrevented:0,isTrusted:0},se=jt(Fa),Oe=T({},Fa,{view:0,detail:0}),xt=jt(Oe),ut,ft,It,fl=T({},Oe,{screenX:0,screenY:0,clientX:0,clientY:0,pageX:0,pageY:0,ctrlKey:0,shiftKey:0,altKey:0,metaKey:0,getModifierState:Vr,button:0,buttons:0,relatedTarget:function(e){return e.relatedTarget===void 0?e.fromElement===e.srcElement?e.toElement:e.fromElement:e.relatedTarget},movementX:function(e){return"movementX"in e?e.movementX:(e!==It&&(It&&e.type==="mousemove"?(ut=e.screenX-It.screenX,ft=e.screenY-It.screenY):ft=ut=0,It=e),ut)},movementY:function(e){return"movementY"in e?e.movementY:ft}}),Ct=jt(fl),ma=T({},fl,{dataTransfer:0}),na=jt(ma),Sl=T({},Oe,{relatedTarget:0}),Dl=jt(Sl),Hn=T({},Fa,{animationName:0,elapsedTime:0,pseudoElement:0}),qr=jt(Hn),Oi=T({},Fa,{clipboardData:function(e){return"clipboardData"in e?e.clipboardData:window.clipboardData}}),u0=jt(Oi),d0=T({},Fa,{data:0}),nu=jt(d0),f0={Esc:"Escape",Spacebar:" ",Left:"ArrowLeft",Up:"ArrowUp",Right:"ArrowRight",Down:"ArrowDown",Del:"Delete",Win:"OS",Menu:"ContextMenu",Apps:"ContextMenu",Scroll:"ScrollLock",MozPrintableKey:"Unidentified"},m0={8:"Backspace",9:"Tab",12:"Clear",13:"Enter",16:"Shift",17:"Control",18:"Alt",19:"Pause",20:"CapsLock",27:"Escape",32:" ",33:"PageUp",34:"PageDown",35:"End",36:"Home",37:"ArrowLeft",38:"ArrowUp",39:"ArrowRight",40:"ArrowDown",45:"Insert",46:"Delete",112:"F1",113:"F2",114:"F3",115:"F4",116:"F5",117:"F6",118:"F7",119:"F8",120:"F9",121:"F10",122:"F11",123:"F12",144:"NumLock",145:"ScrollLock",224:"Meta"},h0={Alt:"altKey",Control:"ctrlKey",Meta:"metaKey",Shift:"shiftKey"};function p0(e){var t=this.nativeEvent;return t.getModifierState?t.getModifierState(e):(e=h0[e])?!!t[e]:!1}function Vr(){return p0}var g0=T({},Oe,{key:function(e){if(e.key){var t=f0[e.key]||e.key;if(t!=="Unidentified")return t}return e.type==="keypress"?(e=_l(e),e===13?"Enter":String.fromCharCode(e)):e.type==="keydown"||e.type==="keyup"?m0[e.keyCode]||"Unidentified":""},code:0,location:0,ctrlKey:0,shiftKey:0,altKey:0,metaKey:0,repeat:0,locale:0,getModifierState:Vr,charCode:function(e){return e.type==="keypress"?_l(e):0},keyCode:function(e){return e.type==="keydown"||e.type==="keyup"?e.keyCode:0},which:function(e){return e.type==="keypress"?_l(e):e.type==="keydown"||e.type==="keyup"?e.keyCode:0}}),x0=jt(g0),y0=T({},fl,{pointerId:0,width:0,height:0,pressure:0,tangentialPressure:0,tiltX:0,tiltY:0,twist:0,pointerType:0,isPrimary:0}),su=jt(y0),b0=T({},Oe,{touches:0,targetTouches:0,changedTouches:0,altKey:0,metaKey:0,ctrlKey:0,shiftKey:0,getModifierState:Vr}),v0=jt(b0),S0=T({},Fa,{propertyName:0,elapsedTime:0,pseudoElement:0}),j0=jt(S0),C0=T({},fl,{deltaX:function(e){return"deltaX"in e?e.deltaX:"wheelDeltaX"in e?-e.wheelDeltaX:0},deltaY:function(e){return"deltaY"in e?e.deltaY:"wheelDeltaY"in e?-e.wheelDeltaY:"wheelDelta"in e?-e.wheelDelta:0},deltaZ:0,deltaMode:0}),w0=jt(C0),N0=T({},Fa,{newState:0,oldState:0}),M0=jt(N0),T0=[9,13,27,32],Xr=Za&&"CompositionEvent"in window,Ys=null;Za&&"documentMode"in document&&(Ys=document.documentMode);var E0=Za&&"TextEvent"in window&&!Ys,iu=Za&&(!Xr||Ys&&8<Ys&&11>=Ys),ru=" ",cu=!1;function ou(e,t){switch(e){case"keyup":return T0.indexOf(t.keyCode)!==-1;case"keydown":return t.keyCode!==229;case"keypress":case"mousedown":case"focusout":return!0;default:return!1}}function uu(e){return e=e.detail,typeof e=="object"&&"data"in e?e.data:null}var rs=!1;function A0(e,t){switch(e){case"compositionend":return uu(t);case"keypress":return t.which!==32?null:(cu=!0,ru);case"textInput":return e=t.data,e===ru&&cu?null:e;default:return null}}function z0(e,t){if(rs)return e==="compositionend"||!Xr&&ou(e,t)?(e=Di(),ss=kn=dl=null,rs=!1,e):null;switch(e){case"paste":return null;case"keypress":if(!(t.ctrlKey||t.altKey||t.metaKey)||t.ctrlKey&&t.altKey){if(t.char&&1<t.char.length)return t.char;if(t.which)return String.fromCharCode(t.which)}return null;case"compositionend":return iu&&t.locale!=="ko"?null:t.data;default:return null}}var _0={color:!0,date:!0,datetime:!0,"datetime-local":!0,email:!0,month:!0,number:!0,password:!0,range:!0,search:!0,tel:!0,text:!0,time:!0,url:!0,week:!0};function du(e){var t=e&&e.nodeName&&e.nodeName.toLowerCase();return t==="input"?!!_0[e.type]:t==="textarea"}function fu(e,t,a,l){en?tn?tn.push(l):tn=[l]:en=l,t=Cr(t,"onChange"),0<t.length&&(a=new se("onChange","change",null,a,l),e.push({event:a,listeners:t}))}var Qs=null,qs=null;function D0(e){Jf(e,0)}function Li(e){var t=pt(e);if(ke(t))return e}function mu(e,t){if(e==="change")return t}var hu=!1;if(Za){var Zr;if(Za){var Kr="oninput"in document;if(!Kr){var pu=document.createElement("div");pu.setAttribute("oninput","return;"),Kr=typeof pu.oninput=="function"}Zr=Kr}else Zr=!1;hu=Zr&&(!document.documentMode||9<document.documentMode)}function gu(){Qs&&(Qs.detachEvent("onpropertychange",xu),qs=Qs=null)}function xu(e){if(e.propertyName==="value"&&Li(qs)){var t=[];fu(t,qs,e,Ma(e)),On(D0,t)}}function R0(e,t,a){e==="focusin"?(gu(),Qs=t,qs=a,Qs.attachEvent("onpropertychange",xu)):e==="focusout"&&gu()}function O0(e){if(e==="selectionchange"||e==="keyup"||e==="keydown")return Li(qs)}function L0(e,t){if(e==="click")return Li(t)}function k0(e,t){if(e==="input"||e==="change")return Li(t)}function H0(e,t){return e===t&&(e!==0||1/e===1/t)||e!==e&&t!==t}var Ha=typeof Object.is=="function"?Object.is:H0;function Vs(e,t){if(Ha(e,t))return!0;if(typeof e!="object"||e===null||typeof t!="object"||t===null)return!1;var a=Object.keys(e),l=Object.keys(t);if(a.length!==l.length)return!1;for(l=0;l<a.length;l++){var n=a[l];if(!dt.call(t,n)||!Ha(e[n],t[n]))return!1}return!0}function yu(e){for(;e&&e.firstChild;)e=e.firstChild;return e}function bu(e,t){var a=yu(e);e=0;for(var l;a;){if(a.nodeType===3){if(l=e+a.textContent.length,e<=t&&l>=t)return{node:a,offset:t-e};e=l}e:{for(;a;){if(a.nextSibling){a=a.nextSibling;break e}a=a.parentNode}a=void 0}a=yu(a)}}function vu(e,t){return e&&t?e===t?!0:e&&e.nodeType===3?!1:t&&t.nodeType===3?vu(e,t.parentNode):"contains"in e?e.contains(t):e.compareDocumentPosition?!!(e.compareDocumentPosition(t)&16):!1:!1}function Su(e){e=e!=null&&e.ownerDocument!=null&&e.ownerDocument.defaultView!=null?e.ownerDocument.defaultView:window;for(var t=He(e.document);t instanceof e.HTMLIFrameElement;){try{var a=typeof t.contentWindow.location.href=="string"}catch{a=!1}if(a)e=t.contentWindow;else break;t=He(e.document)}return t}function Fr(e){var t=e&&e.nodeName&&e.nodeName.toLowerCase();return t&&(t==="input"&&(e.type==="text"||e.type==="search"||e.type==="tel"||e.type==="url"||e.type==="password")||t==="textarea"||e.contentEditable==="true")}var U0=Za&&"documentMode"in document&&11>=document.documentMode,cs=null,Jr=null,Xs=null,Wr=!1;function ju(e,t,a){var l=a.window===a?a.document:a.nodeType===9?a:a.ownerDocument;Wr||cs==null||cs!==He(l)||(l=cs,"selectionStart"in l&&Fr(l)?l={start:l.selectionStart,end:l.selectionEnd}:(l=(l.ownerDocument&&l.ownerDocument.defaultView||window).getSelection(),l={anchorNode:l.anchorNode,anchorOffset:l.anchorOffset,focusNode:l.focusNode,focusOffset:l.focusOffset}),Xs&&Vs(Xs,l)||(Xs=l,l=Cr(Jr,"onSelect"),0<l.length&&(t=new se("onSelect","select",null,t,a),e.push({event:t,listeners:l}),t.target=cs)))}function Un(e,t){var a={};return a[e.toLowerCase()]=t.toLowerCase(),a["Webkit"+e]="webkit"+t,a["Moz"+e]="moz"+t,a}var os={animationend:Un("Animation","AnimationEnd"),animationiteration:Un("Animation","AnimationIteration"),animationstart:Un("Animation","AnimationStart"),transitionrun:Un("Transition","TransitionRun"),transitionstart:Un("Transition","TransitionStart"),transitioncancel:Un("Transition","TransitionCancel"),transitionend:Un("Transition","TransitionEnd")},Ir={},Cu={};Za&&(Cu=document.createElement("div").style,"AnimationEvent"in window||(delete os.animationend.animation,delete os.animationiteration.animation,delete os.animationstart.animation),"TransitionEvent"in window||delete os.transitionend.transition);function Bn(e){if(Ir[e])return Ir[e];if(!os[e])return e;var t=os[e],a;for(a in t)if(t.hasOwnProperty(a)&&a in Cu)return Ir[e]=t[a];return e}var wu=Bn("animationend"),Nu=Bn("animationiteration"),Mu=Bn("animationstart"),B0=Bn("transitionrun"),G0=Bn("transitionstart"),Y0=Bn("transitioncancel"),Tu=Bn("transitionend"),Eu=new Map,$r="abort auxClick beforeToggle cancel canPlay canPlayThrough click close contextMenu copy cut drag dragEnd dragEnter dragExit dragLeave dragOver dragStart drop durationChange emptied encrypted ended error gotPointerCapture input invalid keyDown keyPress keyUp load loadedData loadedMetadata loadStart lostPointerCapture mouseDown mouseMove mouseOut mouseOver mouseUp paste pause play playing pointerCancel pointerDown pointerMove pointerOut pointerOver pointerUp progress rateChange reset resize seeked seeking stalled submit suspend timeUpdate touchCancel touchEnd touchStart volumeChange scroll toggle touchMove waiting wheel".split(" ");$r.push("scrollEnd");function ml(e,t){Eu.set(e,t),Wt(t,[e])}var ki=typeof reportError=="function"?reportError:function(e){if(typeof window=="object"&&typeof window.ErrorEvent=="function"){var t=new window.ErrorEvent("error",{bubbles:!0,cancelable:!0,message:typeof e=="object"&&e!==null&&typeof e.message=="string"?String(e.message):String(e),error:e});if(!window.dispatchEvent(t))return}else if(typeof process=="object"&&typeof process.emit=="function"){process.emit("uncaughtException",e);return}console.error(e)},Ja=[],us=0,Pr=0;function Hi(){for(var e=us,t=Pr=us=0;t<e;){var a=Ja[t];Ja[t++]=null;var l=Ja[t];Ja[t++]=null;var n=Ja[t];Ja[t++]=null;var s=Ja[t];if(Ja[t++]=null,l!==null&&n!==null){var r=l.pending;r===null?n.next=n:(n.next=r.next,r.next=n),l.pending=n}s!==0&&Au(a,n,s)}}function Ui(e,t,a,l){Ja[us++]=e,Ja[us++]=t,Ja[us++]=a,Ja[us++]=l,Pr|=l,e.lanes|=l,e=e.alternate,e!==null&&(e.lanes|=l)}function ec(e,t,a,l){return Ui(e,t,a,l),Bi(e)}function Gn(e,t){return Ui(e,null,null,t),Bi(e)}function Au(e,t,a){e.lanes|=a;var l=e.alternate;l!==null&&(l.lanes|=a);for(var n=!1,s=e.return;s!==null;)s.childLanes|=a,l=s.alternate,l!==null&&(l.childLanes|=a),s.tag===22&&(e=s.stateNode,e===null||e._visibility&1||(n=!0)),e=s,s=s.return;return e.tag===3?(s=e.stateNode,n&&t!==null&&(n=31-Vt(a),e=s.hiddenUpdates,l=e[n],l===null?e[n]=[t]:l.push(t),t.lane=a|536870912),s):null}function Bi(e){if(50<mi)throw mi=0,oo=null,Error(o(185));for(var t=e.return;t!==null;)e=t,t=e.return;return e.tag===3?e.stateNode:null}var ds={};function Q0(e,t,a,l){this.tag=e,this.key=a,this.sibling=this.child=this.return=this.stateNode=this.type=this.elementType=null,this.index=0,this.refCleanup=this.ref=null,this.pendingProps=t,this.dependencies=this.memoizedState=this.updateQueue=this.memoizedProps=null,this.mode=l,this.subtreeFlags=this.flags=0,this.deletions=null,this.childLanes=this.lanes=0,this.alternate=null}function Ua(e,t,a,l){return new Q0(e,t,a,l)}function tc(e){return e=e.prototype,!(!e||!e.isReactComponent)}function Rl(e,t){var a=e.alternate;return a===null?(a=Ua(e.tag,t,e.key,e.mode),a.elementType=e.elementType,a.type=e.type,a.stateNode=e.stateNode,a.alternate=e,e.alternate=a):(a.pendingProps=t,a.type=e.type,a.flags=0,a.subtreeFlags=0,a.deletions=null),a.flags=e.flags&65011712,a.childLanes=e.childLanes,a.lanes=e.lanes,a.child=e.child,a.memoizedProps=e.memoizedProps,a.memoizedState=e.memoizedState,a.updateQueue=e.updateQueue,t=e.dependencies,a.dependencies=t===null?null:{lanes:t.lanes,firstContext:t.firstContext},a.sibling=e.sibling,a.index=e.index,a.ref=e.ref,a.refCleanup=e.refCleanup,a}function zu(e,t){e.flags&=65011714;var a=e.alternate;return a===null?(e.childLanes=0,e.lanes=t,e.child=null,e.subtreeFlags=0,e.memoizedProps=null,e.memoizedState=null,e.updateQueue=null,e.dependencies=null,e.stateNode=null):(e.childLanes=a.childLanes,e.lanes=a.lanes,e.child=a.child,e.subtreeFlags=0,e.deletions=null,e.memoizedProps=a.memoizedProps,e.memoizedState=a.memoizedState,e.updateQueue=a.updateQueue,e.type=a.type,t=a.dependencies,e.dependencies=t===null?null:{lanes:t.lanes,firstContext:t.firstContext}),e}function Gi(e,t,a,l,n,s){var r=0;if(l=e,typeof e=="function")tc(e)&&(r=1);else if(typeof e=="string")r=Kh(e,a,ee.current)?26:e==="html"||e==="head"||e==="body"?27:5;else e:switch(e){case ve:return e=Ua(31,a,t,n),e.elementType=ve,e.lanes=s,e;case O:return Yn(a.children,n,s,t);case xe:r=8,n|=24;break;case Z:return e=Ua(12,a,t,n|2),e.elementType=Z,e.lanes=s,e;case fe:return e=Ua(13,a,t,n),e.elementType=fe,e.lanes=s,e;case De:return e=Ua(19,a,t,n),e.elementType=De,e.lanes=s,e;default:if(typeof e=="object"&&e!==null)switch(e.$$typeof){case U:r=10;break e;case me:r=9;break e;case le:r=11;break e;case de:r=14;break e;case ce:r=16,l=null;break e}r=29,a=Error(o(130,e===null?"null":typeof e,"")),l=null}return t=Ua(r,a,t,n),t.elementType=e,t.type=l,t.lanes=s,t}function Yn(e,t,a,l){return e=Ua(7,e,l,t),e.lanes=a,e}function ac(e,t,a){return e=Ua(6,e,null,t),e.lanes=a,e}function _u(e){var t=Ua(18,null,null,0);return t.stateNode=e,t}function lc(e,t,a){return t=Ua(4,e.children!==null?e.children:[],e.key,t),t.lanes=a,t.stateNode={containerInfo:e.containerInfo,pendingChildren:null,implementation:e.implementation},t}var Du=new WeakMap;function Wa(e,t){if(typeof e=="object"&&e!==null){var a=Du.get(e);return a!==void 0?a:(t={value:e,source:t,stack:We(t)},Du.set(e,t),t)}return{value:e,source:t,stack:We(t)}}var fs=[],ms=0,Yi=null,Zs=0,Ia=[],$a=0,an=null,jl=1,Cl="";function Ol(e,t){fs[ms++]=Zs,fs[ms++]=Yi,Yi=e,Zs=t}function Ru(e,t,a){Ia[$a++]=jl,Ia[$a++]=Cl,Ia[$a++]=an,an=e;var l=jl;e=Cl;var n=32-Vt(l)-1;l&=~(1<<n),a+=1;var s=32-Vt(t)+n;if(30<s){var r=n-n%5;s=(l&(1<<r)-1).toString(32),l>>=r,n-=r,jl=1<<32-Vt(t)+n|a<<n|l,Cl=s+e}else jl=1<<s|a<<n|l,Cl=e}function nc(e){e.return!==null&&(Ol(e,1),Ru(e,1,0))}function sc(e){for(;e===Yi;)Yi=fs[--ms],fs[ms]=null,Zs=fs[--ms],fs[ms]=null;for(;e===an;)an=Ia[--$a],Ia[$a]=null,Cl=Ia[--$a],Ia[$a]=null,jl=Ia[--$a],Ia[$a]=null}function Ou(e,t){Ia[$a++]=jl,Ia[$a++]=Cl,Ia[$a++]=an,jl=t.id,Cl=t.overflow,an=e}var sa=null,mt=null,qe=!1,ln=null,Pa=!1,ic=Error(o(519));function nn(e){var t=Error(o(418,1<arguments.length&&arguments[1]!==void 0&&arguments[1]?"text":"HTML",""));throw Ks(Wa(t,e)),ic}function Lu(e){var t=e.stateNode,a=e.type,l=e.memoizedProps;switch(t[P]=e,t[ne]=l,a){case"dialog":Be("cancel",t),Be("close",t);break;case"iframe":case"object":case"embed":Be("load",t);break;case"video":case"audio":for(a=0;a<pi.length;a++)Be(pi[a],t);break;case"source":Be("error",t);break;case"img":case"image":case"link":Be("error",t),Be("load",t);break;case"details":Be("toggle",t);break;case"input":Be("invalid",t),Ht(t,l.value,l.defaultValue,l.checked,l.defaultChecked,l.type,l.name,!0);break;case"select":Be("invalid",t);break;case"textarea":Be("invalid",t),gt(t,l.value,l.defaultValue,l.children)}a=l.children,typeof a!="string"&&typeof a!="number"&&typeof a!="bigint"||t.textContent===""+a||l.suppressHydrationWarning===!0||Pf(t.textContent,a)?(l.popover!=null&&(Be("beforetoggle",t),Be("toggle",t)),l.onScroll!=null&&Be("scroll",t),l.onScrollEnd!=null&&Be("scrollend",t),l.onClick!=null&&(t.onclick=Na),t=!0):t=!1,t||nn(e,!0)}function ku(e){for(sa=e.return;sa;)switch(sa.tag){case 5:case 31:case 13:Pa=!1;return;case 27:case 3:Pa=!0;return;default:sa=sa.return}}function hs(e){if(e!==sa)return!1;if(!qe)return ku(e),qe=!0,!1;var t=e.tag,a;if((a=t!==3&&t!==27)&&((a=t===5)&&(a=e.type,a=!(a!=="form"&&a!=="button")||No(e.type,e.memoizedProps)),a=!a),a&&mt&&nn(e),ku(e),t===13){if(e=e.memoizedState,e=e!==null?e.dehydrated:null,!e)throw Error(o(317));mt=cm(e)}else if(t===31){if(e=e.memoizedState,e=e!==null?e.dehydrated:null,!e)throw Error(o(317));mt=cm(e)}else t===27?(t=mt,bn(e.type)?(e=zo,zo=null,mt=e):mt=t):mt=sa?tl(e.stateNode.nextSibling):null;return!0}function Qn(){mt=sa=null,qe=!1}function rc(){var e=ln;return e!==null&&(za===null?za=e:za.push.apply(za,e),ln=null),e}function Ks(e){ln===null?ln=[e]:ln.push(e)}var cc=y(null),qn=null,Ll=null;function sn(e,t,a){Q(cc,t._currentValue),t._currentValue=a}function kl(e){e._currentValue=cc.current,_(cc)}function oc(e,t,a){for(;e!==null;){var l=e.alternate;if((e.childLanes&t)!==t?(e.childLanes|=t,l!==null&&(l.childLanes|=t)):l!==null&&(l.childLanes&t)!==t&&(l.childLanes|=t),e===a)break;e=e.return}}function uc(e,t,a,l){var n=e.child;for(n!==null&&(n.return=e);n!==null;){var s=n.dependencies;if(s!==null){var r=n.child;s=s.firstContext;e:for(;s!==null;){var d=s;s=n;for(var g=0;g<t.length;g++)if(d.context===t[g]){s.lanes|=a,d=s.alternate,d!==null&&(d.lanes|=a),oc(s.return,a,e),l||(r=null);break e}s=d.next}}else if(n.tag===18){if(r=n.return,r===null)throw Error(o(341));r.lanes|=a,s=r.alternate,s!==null&&(s.lanes|=a),oc(r,a,e),r=null}else r=n.child;if(r!==null)r.return=n;else for(r=n;r!==null;){if(r===e){r=null;break}if(n=r.sibling,n!==null){n.return=r.return,r=n;break}r=r.return}n=r}}function ps(e,t,a,l){e=null;for(var n=t,s=!1;n!==null;){if(!s){if((n.flags&524288)!==0)s=!0;else if((n.flags&262144)!==0)break}if(n.tag===10){var r=n.alternate;if(r===null)throw Error(o(387));if(r=r.memoizedProps,r!==null){var d=n.type;Ha(n.pendingProps.value,r.value)||(e!==null?e.push(d):e=[d])}}else if(n===Ne.current){if(r=n.alternate,r===null)throw Error(o(387));r.memoizedState.memoizedState!==n.memoizedState.memoizedState&&(e!==null?e.push(vi):e=[vi])}n=n.return}e!==null&&uc(t,e,a,l),t.flags|=262144}function Qi(e){for(e=e.firstContext;e!==null;){if(!Ha(e.context._currentValue,e.memoizedValue))return!0;e=e.next}return!1}function Vn(e){qn=e,Ll=null,e=e.dependencies,e!==null&&(e.firstContext=null)}function ia(e){return Hu(qn,e)}function qi(e,t){return qn===null&&Vn(e),Hu(e,t)}function Hu(e,t){var a=t._currentValue;if(t={context:t,memoizedValue:a,next:null},Ll===null){if(e===null)throw Error(o(308));Ll=t,e.dependencies={lanes:0,firstContext:t},e.flags|=524288}else Ll=Ll.next=t;return a}var q0=typeof AbortController<"u"?AbortController:function(){var e=[],t=this.signal={aborted:!1,addEventListener:function(a,l){e.push(l)}};this.abort=function(){t.aborted=!0,e.forEach(function(a){return a()})}},V0=u.unstable_scheduleCallback,X0=u.unstable_NormalPriority,Ut={$$typeof:U,Consumer:null,Provider:null,_currentValue:null,_currentValue2:null,_threadCount:0};function dc(){return{controller:new q0,data:new Map,refCount:0}}function Fs(e){e.refCount--,e.refCount===0&&V0(X0,function(){e.controller.abort()})}var Js=null,fc=0,gs=0,xs=null;function Z0(e,t){if(Js===null){var a=Js=[];fc=0,gs=go(),xs={status:"pending",value:void 0,then:function(l){a.push(l)}}}return fc++,t.then(Uu,Uu),t}function Uu(){if(--fc===0&&Js!==null){xs!==null&&(xs.status="fulfilled");var e=Js;Js=null,gs=0,xs=null;for(var t=0;t<e.length;t++)(0,e[t])()}}function K0(e,t){var a=[],l={status:"pending",value:null,reason:null,then:function(n){a.push(n)}};return e.then(function(){l.status="fulfilled",l.value=t;for(var n=0;n<a.length;n++)(0,a[n])(t)},function(n){for(l.status="rejected",l.reason=n,n=0;n<a.length;n++)(0,a[n])(void 0)}),l}var Bu=A.S;A.S=function(e,t){Cf=Tt(),typeof t=="object"&&t!==null&&typeof t.then=="function"&&Z0(e,t),Bu!==null&&Bu(e,t)};var Xn=y(null);function mc(){var e=Xn.current;return e!==null?e:nt.pooledCache}function Vi(e,t){t===null?Q(Xn,Xn.current):Q(Xn,t.pool)}function Gu(){var e=mc();return e===null?null:{parent:Ut._currentValue,pool:e}}var ys=Error(o(460)),hc=Error(o(474)),Xi=Error(o(542)),Zi={then:function(){}};function Yu(e){return e=e.status,e==="fulfilled"||e==="rejected"}function Qu(e,t,a){switch(a=e[a],a===void 0?e.push(t):a!==t&&(t.then(Na,Na),t=a),t.status){case"fulfilled":return t.value;case"rejected":throw e=t.reason,Vu(e),e;default:if(typeof t.status=="string")t.then(Na,Na);else{if(e=nt,e!==null&&100<e.shellSuspendCounter)throw Error(o(482));e=t,e.status="pending",e.then(function(l){if(t.status==="pending"){var n=t;n.status="fulfilled",n.value=l}},function(l){if(t.status==="pending"){var n=t;n.status="rejected",n.reason=l}})}switch(t.status){case"fulfilled":return t.value;case"rejected":throw e=t.reason,Vu(e),e}throw Kn=t,ys}}function Zn(e){try{var t=e._init;return t(e._payload)}catch(a){throw a!==null&&typeof a=="object"&&typeof a.then=="function"?(Kn=a,ys):a}}var Kn=null;function qu(){if(Kn===null)throw Error(o(459));var e=Kn;return Kn=null,e}function Vu(e){if(e===ys||e===Xi)throw Error(o(483))}var bs=null,Ws=0;function Ki(e){var t=Ws;return Ws+=1,bs===null&&(bs=[]),Qu(bs,e,t)}function Is(e,t){t=t.props.ref,e.ref=t!==void 0?t:null}function Fi(e,t){throw t.$$typeof===G?Error(o(525)):(e=Object.prototype.toString.call(t),Error(o(31,e==="[object Object]"?"object with keys {"+Object.keys(t).join(", ")+"}":e)))}function Xu(e){function t(j,b){if(e){var C=j.deletions;C===null?(j.deletions=[b],j.flags|=16):C.push(b)}}function a(j,b){if(!e)return null;for(;b!==null;)t(j,b),b=b.sibling;return null}function l(j){for(var b=new Map;j!==null;)j.key!==null?b.set(j.key,j):b.set(j.index,j),j=j.sibling;return b}function n(j,b){return j=Rl(j,b),j.index=0,j.sibling=null,j}function s(j,b,C){return j.index=C,e?(C=j.alternate,C!==null?(C=C.index,C<b?(j.flags|=67108866,b):C):(j.flags|=67108866,b)):(j.flags|=1048576,b)}function r(j){return e&&j.alternate===null&&(j.flags|=67108866),j}function d(j,b,C,R){return b===null||b.tag!==6?(b=ac(C,j.mode,R),b.return=j,b):(b=n(b,C),b.return=j,b)}function g(j,b,C,R){var ge=C.type;return ge===O?z(j,b,C.props.children,R,C.key):b!==null&&(b.elementType===ge||typeof ge=="object"&&ge!==null&&ge.$$typeof===ce&&Zn(ge)===b.type)?(b=n(b,C.props),Is(b,C),b.return=j,b):(b=Gi(C.type,C.key,C.props,null,j.mode,R),Is(b,C),b.return=j,b)}function w(j,b,C,R){return b===null||b.tag!==4||b.stateNode.containerInfo!==C.containerInfo||b.stateNode.implementation!==C.implementation?(b=lc(C,j.mode,R),b.return=j,b):(b=n(b,C.children||[]),b.return=j,b)}function z(j,b,C,R,ge){return b===null||b.tag!==7?(b=Yn(C,j.mode,R,ge),b.return=j,b):(b=n(b,C),b.return=j,b)}function L(j,b,C){if(typeof b=="string"&&b!==""||typeof b=="number"||typeof b=="bigint")return b=ac(""+b,j.mode,C),b.return=j,b;if(typeof b=="object"&&b!==null){switch(b.$$typeof){case Y:return C=Gi(b.type,b.key,b.props,null,j.mode,C),Is(C,b),C.return=j,C;case X:return b=lc(b,j.mode,C),b.return=j,b;case ce:return b=Zn(b),L(j,b,C)}if(Pe(b)||he(b))return b=Yn(b,j.mode,C,null),b.return=j,b;if(typeof b.then=="function")return L(j,Ki(b),C);if(b.$$typeof===U)return L(j,qi(j,b),C);Fi(j,b)}return null}function M(j,b,C,R){var ge=b!==null?b.key:null;if(typeof C=="string"&&C!==""||typeof C=="number"||typeof C=="bigint")return ge!==null?null:d(j,b,""+C,R);if(typeof C=="object"&&C!==null){switch(C.$$typeof){case Y:return C.key===ge?g(j,b,C,R):null;case X:return C.key===ge?w(j,b,C,R):null;case ce:return C=Zn(C),M(j,b,C,R)}if(Pe(C)||he(C))return ge!==null?null:z(j,b,C,R,null);if(typeof C.then=="function")return M(j,b,Ki(C),R);if(C.$$typeof===U)return M(j,b,qi(j,C),R);Fi(j,C)}return null}function E(j,b,C,R,ge){if(typeof R=="string"&&R!==""||typeof R=="number"||typeof R=="bigint")return j=j.get(C)||null,d(b,j,""+R,ge);if(typeof R=="object"&&R!==null){switch(R.$$typeof){case Y:return j=j.get(R.key===null?C:R.key)||null,g(b,j,R,ge);case X:return j=j.get(R.key===null?C:R.key)||null,w(b,j,R,ge);case ce:return R=Zn(R),E(j,b,C,R,ge)}if(Pe(R)||he(R))return j=j.get(C)||null,z(b,j,R,ge,null);if(typeof R.then=="function")return E(j,b,C,Ki(R),ge);if(R.$$typeof===U)return E(j,b,C,qi(b,R),ge);Fi(b,R)}return null}function re(j,b,C,R){for(var ge=null,Ze=null,ue=b,_e=b=0,Qe=null;ue!==null&&_e<C.length;_e++){ue.index>_e?(Qe=ue,ue=null):Qe=ue.sibling;var Ke=M(j,ue,C[_e],R);if(Ke===null){ue===null&&(ue=Qe);break}e&&ue&&Ke.alternate===null&&t(j,ue),b=s(Ke,b,_e),Ze===null?ge=Ke:Ze.sibling=Ke,Ze=Ke,ue=Qe}if(_e===C.length)return a(j,ue),qe&&Ol(j,_e),ge;if(ue===null){for(;_e<C.length;_e++)ue=L(j,C[_e],R),ue!==null&&(b=s(ue,b,_e),Ze===null?ge=ue:Ze.sibling=ue,Ze=ue);return qe&&Ol(j,_e),ge}for(ue=l(ue);_e<C.length;_e++)Qe=E(ue,j,_e,C[_e],R),Qe!==null&&(e&&Qe.alternate!==null&&ue.delete(Qe.key===null?_e:Qe.key),b=s(Qe,b,_e),Ze===null?ge=Qe:Ze.sibling=Qe,Ze=Qe);return e&&ue.forEach(function(wn){return t(j,wn)}),qe&&Ol(j,_e),ge}function be(j,b,C,R){if(C==null)throw Error(o(151));for(var ge=null,Ze=null,ue=b,_e=b=0,Qe=null,Ke=C.next();ue!==null&&!Ke.done;_e++,Ke=C.next()){ue.index>_e?(Qe=ue,ue=null):Qe=ue.sibling;var wn=M(j,ue,Ke.value,R);if(wn===null){ue===null&&(ue=Qe);break}e&&ue&&wn.alternate===null&&t(j,ue),b=s(wn,b,_e),Ze===null?ge=wn:Ze.sibling=wn,Ze=wn,ue=Qe}if(Ke.done)return a(j,ue),qe&&Ol(j,_e),ge;if(ue===null){for(;!Ke.done;_e++,Ke=C.next())Ke=L(j,Ke.value,R),Ke!==null&&(b=s(Ke,b,_e),Ze===null?ge=Ke:Ze.sibling=Ke,Ze=Ke);return qe&&Ol(j,_e),ge}for(ue=l(ue);!Ke.done;_e++,Ke=C.next())Ke=E(ue,j,_e,Ke.value,R),Ke!==null&&(e&&Ke.alternate!==null&&ue.delete(Ke.key===null?_e:Ke.key),b=s(Ke,b,_e),Ze===null?ge=Ke:Ze.sibling=Ke,Ze=Ke);return e&&ue.forEach(function(np){return t(j,np)}),qe&&Ol(j,_e),ge}function at(j,b,C,R){if(typeof C=="object"&&C!==null&&C.type===O&&C.key===null&&(C=C.props.children),typeof C=="object"&&C!==null){switch(C.$$typeof){case Y:e:{for(var ge=C.key;b!==null;){if(b.key===ge){if(ge=C.type,ge===O){if(b.tag===7){a(j,b.sibling),R=n(b,C.props.children),R.return=j,j=R;break e}}else if(b.elementType===ge||typeof ge=="object"&&ge!==null&&ge.$$typeof===ce&&Zn(ge)===b.type){a(j,b.sibling),R=n(b,C.props),Is(R,C),R.return=j,j=R;break e}a(j,b);break}else t(j,b);b=b.sibling}C.type===O?(R=Yn(C.props.children,j.mode,R,C.key),R.return=j,j=R):(R=Gi(C.type,C.key,C.props,null,j.mode,R),Is(R,C),R.return=j,j=R)}return r(j);case X:e:{for(ge=C.key;b!==null;){if(b.key===ge)if(b.tag===4&&b.stateNode.containerInfo===C.containerInfo&&b.stateNode.implementation===C.implementation){a(j,b.sibling),R=n(b,C.children||[]),R.return=j,j=R;break e}else{a(j,b);break}else t(j,b);b=b.sibling}R=lc(C,j.mode,R),R.return=j,j=R}return r(j);case ce:return C=Zn(C),at(j,b,C,R)}if(Pe(C))return re(j,b,C,R);if(he(C)){if(ge=he(C),typeof ge!="function")throw Error(o(150));return C=ge.call(C),be(j,b,C,R)}if(typeof C.then=="function")return at(j,b,Ki(C),R);if(C.$$typeof===U)return at(j,b,qi(j,C),R);Fi(j,C)}return typeof C=="string"&&C!==""||typeof C=="number"||typeof C=="bigint"?(C=""+C,b!==null&&b.tag===6?(a(j,b.sibling),R=n(b,C),R.return=j,j=R):(a(j,b),R=ac(C,j.mode,R),R.return=j,j=R),r(j)):a(j,b)}return function(j,b,C,R){try{Ws=0;var ge=at(j,b,C,R);return bs=null,ge}catch(ue){if(ue===ys||ue===Xi)throw ue;var Ze=Ua(29,ue,null,j.mode);return Ze.lanes=R,Ze.return=j,Ze}finally{}}}var Fn=Xu(!0),Zu=Xu(!1),rn=!1;function pc(e){e.updateQueue={baseState:e.memoizedState,firstBaseUpdate:null,lastBaseUpdate:null,shared:{pending:null,lanes:0,hiddenCallbacks:null},callbacks:null}}function gc(e,t){e=e.updateQueue,t.updateQueue===e&&(t.updateQueue={baseState:e.baseState,firstBaseUpdate:e.firstBaseUpdate,lastBaseUpdate:e.lastBaseUpdate,shared:e.shared,callbacks:null})}function cn(e){return{lane:e,tag:0,payload:null,callback:null,next:null}}function on(e,t,a){var l=e.updateQueue;if(l===null)return null;if(l=l.shared,(Fe&2)!==0){var n=l.pending;return n===null?t.next=t:(t.next=n.next,n.next=t),l.pending=t,t=Bi(e),Au(e,null,a),t}return Ui(e,l,t,a),Bi(e)}function $s(e,t,a){if(t=t.updateQueue,t!==null&&(t=t.shared,(a&4194048)!==0)){var l=t.lanes;l&=e.pendingLanes,a|=l,t.lanes=a,V(e,a)}}function xc(e,t){var a=e.updateQueue,l=e.alternate;if(l!==null&&(l=l.updateQueue,a===l)){var n=null,s=null;if(a=a.firstBaseUpdate,a!==null){do{var r={lane:a.lane,tag:a.tag,payload:a.payload,callback:null,next:null};s===null?n=s=r:s=s.next=r,a=a.next}while(a!==null);s===null?n=s=t:s=s.next=t}else n=s=t;a={baseState:l.baseState,firstBaseUpdate:n,lastBaseUpdate:s,shared:l.shared,callbacks:l.callbacks},e.updateQueue=a;return}e=a.lastBaseUpdate,e===null?a.firstBaseUpdate=t:e.next=t,a.lastBaseUpdate=t}var yc=!1;function Ps(){if(yc){var e=xs;if(e!==null)throw e}}function ei(e,t,a,l){yc=!1;var n=e.updateQueue;rn=!1;var s=n.firstBaseUpdate,r=n.lastBaseUpdate,d=n.shared.pending;if(d!==null){n.shared.pending=null;var g=d,w=g.next;g.next=null,r===null?s=w:r.next=w,r=g;var z=e.alternate;z!==null&&(z=z.updateQueue,d=z.lastBaseUpdate,d!==r&&(d===null?z.firstBaseUpdate=w:d.next=w,z.lastBaseUpdate=g))}if(s!==null){var L=n.baseState;r=0,z=w=g=null,d=s;do{var M=d.lane&-536870913,E=M!==d.lane;if(E?(Ye&M)===M:(l&M)===M){M!==0&&M===gs&&(yc=!0),z!==null&&(z=z.next={lane:0,tag:d.tag,payload:d.payload,callback:null,next:null});e:{var re=e,be=d;M=t;var at=a;switch(be.tag){case 1:if(re=be.payload,typeof re=="function"){L=re.call(at,L,M);break e}L=re;break e;case 3:re.flags=re.flags&-65537|128;case 0:if(re=be.payload,M=typeof re=="function"?re.call(at,L,M):re,M==null)break e;L=T({},L,M);break e;case 2:rn=!0}}M=d.callback,M!==null&&(e.flags|=64,E&&(e.flags|=8192),E=n.callbacks,E===null?n.callbacks=[M]:E.push(M))}else E={lane:M,tag:d.tag,payload:d.payload,callback:d.callback,next:null},z===null?(w=z=E,g=L):z=z.next=E,r|=M;if(d=d.next,d===null){if(d=n.shared.pending,d===null)break;E=d,d=E.next,E.next=null,n.lastBaseUpdate=E,n.shared.pending=null}}while(!0);z===null&&(g=L),n.baseState=g,n.firstBaseUpdate=w,n.lastBaseUpdate=z,s===null&&(n.shared.lanes=0),hn|=r,e.lanes=r,e.memoizedState=L}}function Ku(e,t){if(typeof e!="function")throw Error(o(191,e));e.call(t)}function Fu(e,t){var a=e.callbacks;if(a!==null)for(e.callbacks=null,e=0;e<a.length;e++)Ku(a[e],t)}var vs=y(null),Ji=y(0);function Ju(e,t){e=Xl,Q(Ji,e),Q(vs,t),Xl=e|t.baseLanes}function bc(){Q(Ji,Xl),Q(vs,vs.current)}function vc(){Xl=Ji.current,_(vs),_(Ji)}var Ba=y(null),el=null;function un(e){var t=e.alternate;Q(At,At.current&1),Q(Ba,e),el===null&&(t===null||vs.current!==null||t.memoizedState!==null)&&(el=e)}function Sc(e){Q(At,At.current),Q(Ba,e),el===null&&(el=e)}function Wu(e){e.tag===22?(Q(At,At.current),Q(Ba,e),el===null&&(el=e)):dn()}function dn(){Q(At,At.current),Q(Ba,Ba.current)}function Ga(e){_(Ba),el===e&&(el=null),_(At)}var At=y(0);function Wi(e){for(var t=e;t!==null;){if(t.tag===13){var a=t.memoizedState;if(a!==null&&(a=a.dehydrated,a===null||Eo(a)||Ao(a)))return t}else if(t.tag===19&&(t.memoizedProps.revealOrder==="forwards"||t.memoizedProps.revealOrder==="backwards"||t.memoizedProps.revealOrder==="unstable_legacy-backwards"||t.memoizedProps.revealOrder==="together")){if((t.flags&128)!==0)return t}else if(t.child!==null){t.child.return=t,t=t.child;continue}if(t===e)break;for(;t.sibling===null;){if(t.return===null||t.return===e)return null;t=t.return}t.sibling.return=t.return,t=t.sibling}return null}var Hl=0,Ae=null,et=null,Bt=null,Ii=!1,Ss=!1,Jn=!1,$i=0,ti=0,js=null,F0=0;function wt(){throw Error(o(321))}function jc(e,t){if(t===null)return!1;for(var a=0;a<t.length&&a<e.length;a++)if(!Ha(e[a],t[a]))return!1;return!0}function Cc(e,t,a,l,n,s){return Hl=s,Ae=t,t.memoizedState=null,t.updateQueue=null,t.lanes=0,A.H=e===null||e.memoizedState===null?Rd:Uc,Jn=!1,s=a(l,n),Jn=!1,Ss&&(s=$u(t,a,l,n)),Iu(e),s}function Iu(e){A.H=ni;var t=et!==null&&et.next!==null;if(Hl=0,Bt=et=Ae=null,Ii=!1,ti=0,js=null,t)throw Error(o(300));e===null||Gt||(e=e.dependencies,e!==null&&Qi(e)&&(Gt=!0))}function $u(e,t,a,l){Ae=e;var n=0;do{if(Ss&&(js=null),ti=0,Ss=!1,25<=n)throw Error(o(301));if(n+=1,Bt=et=null,e.updateQueue!=null){var s=e.updateQueue;s.lastEffect=null,s.events=null,s.stores=null,s.memoCache!=null&&(s.memoCache.index=0)}A.H=Od,s=t(a,l)}while(Ss);return s}function J0(){var e=A.H,t=e.useState()[0];return t=typeof t.then=="function"?ai(t):t,e=e.useState()[0],(et!==null?et.memoizedState:null)!==e&&(Ae.flags|=1024),t}function wc(){var e=$i!==0;return $i=0,e}function Nc(e,t,a){t.updateQueue=e.updateQueue,t.flags&=-2053,e.lanes&=~a}function Mc(e){if(Ii){for(e=e.memoizedState;e!==null;){var t=e.queue;t!==null&&(t.pending=null),e=e.next}Ii=!1}Hl=0,Bt=et=Ae=null,Ss=!1,ti=$i=0,js=null}function ja(){var e={memoizedState:null,baseState:null,baseQueue:null,queue:null,next:null};return Bt===null?Ae.memoizedState=Bt=e:Bt=Bt.next=e,Bt}function zt(){if(et===null){var e=Ae.alternate;e=e!==null?e.memoizedState:null}else e=et.next;var t=Bt===null?Ae.memoizedState:Bt.next;if(t!==null)Bt=t,et=e;else{if(e===null)throw Ae.alternate===null?Error(o(467)):Error(o(310));et=e,e={memoizedState:et.memoizedState,baseState:et.baseState,baseQueue:et.baseQueue,queue:et.queue,next:null},Bt===null?Ae.memoizedState=Bt=e:Bt=Bt.next=e}return Bt}function Pi(){return{lastEffect:null,events:null,stores:null,memoCache:null}}function ai(e){var t=ti;return ti+=1,js===null&&(js=[]),e=Qu(js,e,t),t=Ae,(Bt===null?t.memoizedState:Bt.next)===null&&(t=t.alternate,A.H=t===null||t.memoizedState===null?Rd:Uc),e}function er(e){if(e!==null&&typeof e=="object"){if(typeof e.then=="function")return ai(e);if(e.$$typeof===U)return ia(e)}throw Error(o(438,String(e)))}function Tc(e){var t=null,a=Ae.updateQueue;if(a!==null&&(t=a.memoCache),t==null){var l=Ae.alternate;l!==null&&(l=l.updateQueue,l!==null&&(l=l.memoCache,l!=null&&(t={data:l.data.map(function(n){return n.slice()}),index:0})))}if(t==null&&(t={data:[],index:0}),a===null&&(a=Pi(),Ae.updateQueue=a),a.memoCache=t,a=t.data[t.index],a===void 0)for(a=t.data[t.index]=Array(e),l=0;l<e;l++)a[l]=W;return t.index++,a}function Ul(e,t){return typeof t=="function"?t(e):t}function tr(e){var t=zt();return Ec(t,et,e)}function Ec(e,t,a){var l=e.queue;if(l===null)throw Error(o(311));l.lastRenderedReducer=a;var n=e.baseQueue,s=l.pending;if(s!==null){if(n!==null){var r=n.next;n.next=s.next,s.next=r}t.baseQueue=n=s,l.pending=null}if(s=e.baseState,n===null)e.memoizedState=s;else{t=n.next;var d=r=null,g=null,w=t,z=!1;do{var L=w.lane&-536870913;if(L!==w.lane?(Ye&L)===L:(Hl&L)===L){var M=w.revertLane;if(M===0)g!==null&&(g=g.next={lane:0,revertLane:0,gesture:null,action:w.action,hasEagerState:w.hasEagerState,eagerState:w.eagerState,next:null}),L===gs&&(z=!0);else if((Hl&M)===M){w=w.next,M===gs&&(z=!0);continue}else L={lane:0,revertLane:w.revertLane,gesture:null,action:w.action,hasEagerState:w.hasEagerState,eagerState:w.eagerState,next:null},g===null?(d=g=L,r=s):g=g.next=L,Ae.lanes|=M,hn|=M;L=w.action,Jn&&a(s,L),s=w.hasEagerState?w.eagerState:a(s,L)}else M={lane:L,revertLane:w.revertLane,gesture:w.gesture,action:w.action,hasEagerState:w.hasEagerState,eagerState:w.eagerState,next:null},g===null?(d=g=M,r=s):g=g.next=M,Ae.lanes|=L,hn|=L;w=w.next}while(w!==null&&w!==t);if(g===null?r=s:g.next=d,!Ha(s,e.memoizedState)&&(Gt=!0,z&&(a=xs,a!==null)))throw a;e.memoizedState=s,e.baseState=r,e.baseQueue=g,l.lastRenderedState=s}return n===null&&(l.lanes=0),[e.memoizedState,l.dispatch]}function Ac(e){var t=zt(),a=t.queue;if(a===null)throw Error(o(311));a.lastRenderedReducer=e;var l=a.dispatch,n=a.pending,s=t.memoizedState;if(n!==null){a.pending=null;var r=n=n.next;do s=e(s,r.action),r=r.next;while(r!==n);Ha(s,t.memoizedState)||(Gt=!0),t.memoizedState=s,t.baseQueue===null&&(t.baseState=s),a.lastRenderedState=s}return[s,l]}function Pu(e,t,a){var l=Ae,n=zt(),s=qe;if(s){if(a===void 0)throw Error(o(407));a=a()}else a=t();var r=!Ha((et||n).memoizedState,a);if(r&&(n.memoizedState=a,Gt=!0),n=n.queue,Dc(ad.bind(null,l,n,e),[e]),n.getSnapshot!==t||r||Bt!==null&&Bt.memoizedState.tag&1){if(l.flags|=2048,Cs(9,{destroy:void 0},td.bind(null,l,n,a,t),null),nt===null)throw Error(o(349));s||(Hl&127)!==0||ed(l,t,a)}return a}function ed(e,t,a){e.flags|=16384,e={getSnapshot:t,value:a},t=Ae.updateQueue,t===null?(t=Pi(),Ae.updateQueue=t,t.stores=[e]):(a=t.stores,a===null?t.stores=[e]:a.push(e))}function td(e,t,a,l){t.value=a,t.getSnapshot=l,ld(t)&&nd(e)}function ad(e,t,a){return a(function(){ld(t)&&nd(e)})}function ld(e){var t=e.getSnapshot;e=e.value;try{var a=t();return!Ha(e,a)}catch{return!0}}function nd(e){var t=Gn(e,2);t!==null&&_a(t,e,2)}function zc(e){var t=ja();if(typeof e=="function"){var a=e;if(e=a(),Jn){Ca(!0);try{a()}finally{Ca(!1)}}}return t.memoizedState=t.baseState=e,t.queue={pending:null,lanes:0,dispatch:null,lastRenderedReducer:Ul,lastRenderedState:e},t}function sd(e,t,a,l){return e.baseState=a,Ec(e,et,typeof l=="function"?l:Ul)}function W0(e,t,a,l,n){if(nr(e))throw Error(o(485));if(e=t.action,e!==null){var s={payload:n,action:e,next:null,isTransition:!0,status:"pending",value:null,reason:null,listeners:[],then:function(r){s.listeners.push(r)}};A.T!==null?a(!0):s.isTransition=!1,l(s),a=t.pending,a===null?(s.next=t.pending=s,id(t,s)):(s.next=a.next,t.pending=a.next=s)}}function id(e,t){var a=t.action,l=t.payload,n=e.state;if(t.isTransition){var s=A.T,r={};A.T=r;try{var d=a(n,l),g=A.S;g!==null&&g(r,d),rd(e,t,d)}catch(w){_c(e,t,w)}finally{s!==null&&r.types!==null&&(s.types=r.types),A.T=s}}else try{s=a(n,l),rd(e,t,s)}catch(w){_c(e,t,w)}}function rd(e,t,a){a!==null&&typeof a=="object"&&typeof a.then=="function"?a.then(function(l){cd(e,t,l)},function(l){return _c(e,t,l)}):cd(e,t,a)}function cd(e,t,a){t.status="fulfilled",t.value=a,od(t),e.state=a,t=e.pending,t!==null&&(a=t.next,a===t?e.pending=null:(a=a.next,t.next=a,id(e,a)))}function _c(e,t,a){var l=e.pending;if(e.pending=null,l!==null){l=l.next;do t.status="rejected",t.reason=a,od(t),t=t.next;while(t!==l)}e.action=null}function od(e){e=e.listeners;for(var t=0;t<e.length;t++)(0,e[t])()}function ud(e,t){return t}function dd(e,t){if(qe){var a=nt.formState;if(a!==null){e:{var l=Ae;if(qe){if(mt){t:{for(var n=mt,s=Pa;n.nodeType!==8;){if(!s){n=null;break t}if(n=tl(n.nextSibling),n===null){n=null;break t}}s=n.data,n=s==="F!"||s==="F"?n:null}if(n){mt=tl(n.nextSibling),l=n.data==="F!";break e}}nn(l)}l=!1}l&&(t=a[0])}}return a=ja(),a.memoizedState=a.baseState=t,l={pending:null,lanes:0,dispatch:null,lastRenderedReducer:ud,lastRenderedState:t},a.queue=l,a=zd.bind(null,Ae,l),l.dispatch=a,l=zc(!1),s=Hc.bind(null,Ae,!1,l.queue),l=ja(),n={state:t,dispatch:null,action:e,pending:null},l.queue=n,a=W0.bind(null,Ae,n,s,a),n.dispatch=a,l.memoizedState=e,[t,a,!1]}function fd(e){var t=zt();return md(t,et,e)}function md(e,t,a){if(t=Ec(e,t,ud)[0],e=tr(Ul)[0],typeof t=="object"&&t!==null&&typeof t.then=="function")try{var l=ai(t)}catch(r){throw r===ys?Xi:r}else l=t;t=zt();var n=t.queue,s=n.dispatch;return a!==t.memoizedState&&(Ae.flags|=2048,Cs(9,{destroy:void 0},I0.bind(null,n,a),null)),[l,s,e]}function I0(e,t){e.action=t}function hd(e){var t=zt(),a=et;if(a!==null)return md(t,a,e);zt(),t=t.memoizedState,a=zt();var l=a.queue.dispatch;return a.memoizedState=e,[t,l,!1]}function Cs(e,t,a,l){return e={tag:e,create:a,deps:l,inst:t,next:null},t=Ae.updateQueue,t===null&&(t=Pi(),Ae.updateQueue=t),a=t.lastEffect,a===null?t.lastEffect=e.next=e:(l=a.next,a.next=e,e.next=l,t.lastEffect=e),e}function pd(){return zt().memoizedState}function ar(e,t,a,l){var n=ja();Ae.flags|=e,n.memoizedState=Cs(1|t,{destroy:void 0},a,l===void 0?null:l)}function lr(e,t,a,l){var n=zt();l=l===void 0?null:l;var s=n.memoizedState.inst;et!==null&&l!==null&&jc(l,et.memoizedState.deps)?n.memoizedState=Cs(t,s,a,l):(Ae.flags|=e,n.memoizedState=Cs(1|t,s,a,l))}function gd(e,t){ar(8390656,8,e,t)}function Dc(e,t){lr(2048,8,e,t)}function $0(e){Ae.flags|=4;var t=Ae.updateQueue;if(t===null)t=Pi(),Ae.updateQueue=t,t.events=[e];else{var a=t.events;a===null?t.events=[e]:a.push(e)}}function xd(e){var t=zt().memoizedState;return $0({ref:t,nextImpl:e}),function(){if((Fe&2)!==0)throw Error(o(440));return t.impl.apply(void 0,arguments)}}function yd(e,t){return lr(4,2,e,t)}function bd(e,t){return lr(4,4,e,t)}function vd(e,t){if(typeof t=="function"){e=e();var a=t(e);return function(){typeof a=="function"?a():t(null)}}if(t!=null)return e=e(),t.current=e,function(){t.current=null}}function Sd(e,t,a){a=a!=null?a.concat([e]):null,lr(4,4,vd.bind(null,t,e),a)}function Rc(){}function jd(e,t){var a=zt();t=t===void 0?null:t;var l=a.memoizedState;return t!==null&&jc(t,l[1])?l[0]:(a.memoizedState=[e,t],e)}function Cd(e,t){var a=zt();t=t===void 0?null:t;var l=a.memoizedState;if(t!==null&&jc(t,l[1]))return l[0];if(l=e(),Jn){Ca(!0);try{e()}finally{Ca(!1)}}return a.memoizedState=[l,t],l}function Oc(e,t,a){return a===void 0||(Hl&1073741824)!==0&&(Ye&261930)===0?e.memoizedState=t:(e.memoizedState=a,e=Nf(),Ae.lanes|=e,hn|=e,a)}function wd(e,t,a,l){return Ha(a,t)?a:vs.current!==null?(e=Oc(e,a,l),Ha(e,t)||(Gt=!0),e):(Hl&42)===0||(Hl&1073741824)!==0&&(Ye&261930)===0?(Gt=!0,e.memoizedState=a):(e=Nf(),Ae.lanes|=e,hn|=e,t)}function Nd(e,t,a,l,n){var s=B.p;B.p=s!==0&&8>s?s:8;var r=A.T,d={};A.T=d,Hc(e,!1,t,a);try{var g=n(),w=A.S;if(w!==null&&w(d,g),g!==null&&typeof g=="object"&&typeof g.then=="function"){var z=K0(g,l);li(e,t,z,qa(e))}else li(e,t,l,qa(e))}catch(L){li(e,t,{then:function(){},status:"rejected",reason:L},qa())}finally{B.p=s,r!==null&&d.types!==null&&(r.types=d.types),A.T=r}}function P0(){}function Lc(e,t,a,l){if(e.tag!==5)throw Error(o(476));var n=Md(e).queue;Nd(e,n,t,oe,a===null?P0:function(){return Td(e),a(l)})}function Md(e){var t=e.memoizedState;if(t!==null)return t;t={memoizedState:oe,baseState:oe,baseQueue:null,queue:{pending:null,lanes:0,dispatch:null,lastRenderedReducer:Ul,lastRenderedState:oe},next:null};var a={};return t.next={memoizedState:a,baseState:a,baseQueue:null,queue:{pending:null,lanes:0,dispatch:null,lastRenderedReducer:Ul,lastRenderedState:a},next:null},e.memoizedState=t,e=e.alternate,e!==null&&(e.memoizedState=t),t}function Td(e){var t=Md(e);t.next===null&&(t=e.alternate.memoizedState),li(e,t.next.queue,{},qa())}function kc(){return ia(vi)}function Ed(){return zt().memoizedState}function Ad(){return zt().memoizedState}function eh(e){for(var t=e.return;t!==null;){switch(t.tag){case 24:case 3:var a=qa();e=cn(a);var l=on(t,e,a);l!==null&&(_a(l,t,a),$s(l,t,a)),t={cache:dc()},e.payload=t;return}t=t.return}}function th(e,t,a){var l=qa();a={lane:l,revertLane:0,gesture:null,action:a,hasEagerState:!1,eagerState:null,next:null},nr(e)?_d(t,a):(a=ec(e,t,a,l),a!==null&&(_a(a,e,l),Dd(a,t,l)))}function zd(e,t,a){var l=qa();li(e,t,a,l)}function li(e,t,a,l){var n={lane:l,revertLane:0,gesture:null,action:a,hasEagerState:!1,eagerState:null,next:null};if(nr(e))_d(t,n);else{var s=e.alternate;if(e.lanes===0&&(s===null||s.lanes===0)&&(s=t.lastRenderedReducer,s!==null))try{var r=t.lastRenderedState,d=s(r,a);if(n.hasEagerState=!0,n.eagerState=d,Ha(d,r))return Ui(e,t,n,0),nt===null&&Hi(),!1}catch{}finally{}if(a=ec(e,t,n,l),a!==null)return _a(a,e,l),Dd(a,t,l),!0}return!1}function Hc(e,t,a,l){if(l={lane:2,revertLane:go(),gesture:null,action:l,hasEagerState:!1,eagerState:null,next:null},nr(e)){if(t)throw Error(o(479))}else t=ec(e,a,l,2),t!==null&&_a(t,e,2)}function nr(e){var t=e.alternate;return e===Ae||t!==null&&t===Ae}function _d(e,t){Ss=Ii=!0;var a=e.pending;a===null?t.next=t:(t.next=a.next,a.next=t),e.pending=t}function Dd(e,t,a){if((a&4194048)!==0){var l=t.lanes;l&=e.pendingLanes,a|=l,t.lanes=a,V(e,a)}}var ni={readContext:ia,use:er,useCallback:wt,useContext:wt,useEffect:wt,useImperativeHandle:wt,useLayoutEffect:wt,useInsertionEffect:wt,useMemo:wt,useReducer:wt,useRef:wt,useState:wt,useDebugValue:wt,useDeferredValue:wt,useTransition:wt,useSyncExternalStore:wt,useId:wt,useHostTransitionStatus:wt,useFormState:wt,useActionState:wt,useOptimistic:wt,useMemoCache:wt,useCacheRefresh:wt};ni.useEffectEvent=wt;var Rd={readContext:ia,use:er,useCallback:function(e,t){return ja().memoizedState=[e,t===void 0?null:t],e},useContext:ia,useEffect:gd,useImperativeHandle:function(e,t,a){a=a!=null?a.concat([e]):null,ar(4194308,4,vd.bind(null,t,e),a)},useLayoutEffect:function(e,t){return ar(4194308,4,e,t)},useInsertionEffect:function(e,t){ar(4,2,e,t)},useMemo:function(e,t){var a=ja();t=t===void 0?null:t;var l=e();if(Jn){Ca(!0);try{e()}finally{Ca(!1)}}return a.memoizedState=[l,t],l},useReducer:function(e,t,a){var l=ja();if(a!==void 0){var n=a(t);if(Jn){Ca(!0);try{a(t)}finally{Ca(!1)}}}else n=t;return l.memoizedState=l.baseState=n,e={pending:null,lanes:0,dispatch:null,lastRenderedReducer:e,lastRenderedState:n},l.queue=e,e=e.dispatch=th.bind(null,Ae,e),[l.memoizedState,e]},useRef:function(e){var t=ja();return e={current:e},t.memoizedState=e},useState:function(e){e=zc(e);var t=e.queue,a=zd.bind(null,Ae,t);return t.dispatch=a,[e.memoizedState,a]},useDebugValue:Rc,useDeferredValue:function(e,t){var a=ja();return Oc(a,e,t)},useTransition:function(){var e=zc(!1);return e=Nd.bind(null,Ae,e.queue,!0,!1),ja().memoizedState=e,[!1,e]},useSyncExternalStore:function(e,t,a){var l=Ae,n=ja();if(qe){if(a===void 0)throw Error(o(407));a=a()}else{if(a=t(),nt===null)throw Error(o(349));(Ye&127)!==0||ed(l,t,a)}n.memoizedState=a;var s={value:a,getSnapshot:t};return n.queue=s,gd(ad.bind(null,l,s,e),[e]),l.flags|=2048,Cs(9,{destroy:void 0},td.bind(null,l,s,a,t),null),a},useId:function(){var e=ja(),t=nt.identifierPrefix;if(qe){var a=Cl,l=jl;a=(l&~(1<<32-Vt(l)-1)).toString(32)+a,t="_"+t+"R_"+a,a=$i++,0<a&&(t+="H"+a.toString(32)),t+="_"}else a=F0++,t="_"+t+"r_"+a.toString(32)+"_";return e.memoizedState=t},useHostTransitionStatus:kc,useFormState:dd,useActionState:dd,useOptimistic:function(e){var t=ja();t.memoizedState=t.baseState=e;var a={pending:null,lanes:0,dispatch:null,lastRenderedReducer:null,lastRenderedState:null};return t.queue=a,t=Hc.bind(null,Ae,!0,a),a.dispatch=t,[e,t]},useMemoCache:Tc,useCacheRefresh:function(){return ja().memoizedState=eh.bind(null,Ae)},useEffectEvent:function(e){var t=ja(),a={impl:e};return t.memoizedState=a,function(){if((Fe&2)!==0)throw Error(o(440));return a.impl.apply(void 0,arguments)}}},Uc={readContext:ia,use:er,useCallback:jd,useContext:ia,useEffect:Dc,useImperativeHandle:Sd,useInsertionEffect:yd,useLayoutEffect:bd,useMemo:Cd,useReducer:tr,useRef:pd,useState:function(){return tr(Ul)},useDebugValue:Rc,useDeferredValue:function(e,t){var a=zt();return wd(a,et.memoizedState,e,t)},useTransition:function(){var e=tr(Ul)[0],t=zt().memoizedState;return[typeof e=="boolean"?e:ai(e),t]},useSyncExternalStore:Pu,useId:Ed,useHostTransitionStatus:kc,useFormState:fd,useActionState:fd,useOptimistic:function(e,t){var a=zt();return sd(a,et,e,t)},useMemoCache:Tc,useCacheRefresh:Ad};Uc.useEffectEvent=xd;var Od={readContext:ia,use:er,useCallback:jd,useContext:ia,useEffect:Dc,useImperativeHandle:Sd,useInsertionEffect:yd,useLayoutEffect:bd,useMemo:Cd,useReducer:Ac,useRef:pd,useState:function(){return Ac(Ul)},useDebugValue:Rc,useDeferredValue:function(e,t){var a=zt();return et===null?Oc(a,e,t):wd(a,et.memoizedState,e,t)},useTransition:function(){var e=Ac(Ul)[0],t=zt().memoizedState;return[typeof e=="boolean"?e:ai(e),t]},useSyncExternalStore:Pu,useId:Ed,useHostTransitionStatus:kc,useFormState:hd,useActionState:hd,useOptimistic:function(e,t){var a=zt();return et!==null?sd(a,et,e,t):(a.baseState=e,[e,a.queue.dispatch])},useMemoCache:Tc,useCacheRefresh:Ad};Od.useEffectEvent=xd;function Bc(e,t,a,l){t=e.memoizedState,a=a(l,t),a=a==null?t:T({},t,a),e.memoizedState=a,e.lanes===0&&(e.updateQueue.baseState=a)}var Gc={enqueueSetState:function(e,t,a){e=e._reactInternals;var l=qa(),n=cn(l);n.payload=t,a!=null&&(n.callback=a),t=on(e,n,l),t!==null&&(_a(t,e,l),$s(t,e,l))},enqueueReplaceState:function(e,t,a){e=e._reactInternals;var l=qa(),n=cn(l);n.tag=1,n.payload=t,a!=null&&(n.callback=a),t=on(e,n,l),t!==null&&(_a(t,e,l),$s(t,e,l))},enqueueForceUpdate:function(e,t){e=e._reactInternals;var a=qa(),l=cn(a);l.tag=2,t!=null&&(l.callback=t),t=on(e,l,a),t!==null&&(_a(t,e,a),$s(t,e,a))}};function Ld(e,t,a,l,n,s,r){return e=e.stateNode,typeof e.shouldComponentUpdate=="function"?e.shouldComponentUpdate(l,s,r):t.prototype&&t.prototype.isPureReactComponent?!Vs(a,l)||!Vs(n,s):!0}function kd(e,t,a,l){e=t.state,typeof t.componentWillReceiveProps=="function"&&t.componentWillReceiveProps(a,l),typeof t.UNSAFE_componentWillReceiveProps=="function"&&t.UNSAFE_componentWillReceiveProps(a,l),t.state!==e&&Gc.enqueueReplaceState(t,t.state,null)}function Wn(e,t){var a=t;if("ref"in t){a={};for(var l in t)l!=="ref"&&(a[l]=t[l])}if(e=e.defaultProps){a===t&&(a=T({},a));for(var n in e)a[n]===void 0&&(a[n]=e[n])}return a}function Hd(e){ki(e)}function Ud(e){console.error(e)}function Bd(e){ki(e)}function sr(e,t){try{var a=e.onUncaughtError;a(t.value,{componentStack:t.stack})}catch(l){setTimeout(function(){throw l})}}function Gd(e,t,a){try{var l=e.onCaughtError;l(a.value,{componentStack:a.stack,errorBoundary:t.tag===1?t.stateNode:null})}catch(n){setTimeout(function(){throw n})}}function Yc(e,t,a){return a=cn(a),a.tag=3,a.payload={element:null},a.callback=function(){sr(e,t)},a}function Yd(e){return e=cn(e),e.tag=3,e}function Qd(e,t,a,l){var n=a.type.getDerivedStateFromError;if(typeof n=="function"){var s=l.value;e.payload=function(){return n(s)},e.callback=function(){Gd(t,a,l)}}var r=a.stateNode;r!==null&&typeof r.componentDidCatch=="function"&&(e.callback=function(){Gd(t,a,l),typeof n!="function"&&(pn===null?pn=new Set([this]):pn.add(this));var d=l.stack;this.componentDidCatch(l.value,{componentStack:d!==null?d:""})})}function ah(e,t,a,l,n){if(a.flags|=32768,l!==null&&typeof l=="object"&&typeof l.then=="function"){if(t=a.alternate,t!==null&&ps(t,a,n,!0),a=Ba.current,a!==null){switch(a.tag){case 31:case 13:return el===null?xr():a.alternate===null&&Nt===0&&(Nt=3),a.flags&=-257,a.flags|=65536,a.lanes=n,l===Zi?a.flags|=16384:(t=a.updateQueue,t===null?a.updateQueue=new Set([l]):t.add(l),mo(e,l,n)),!1;case 22:return a.flags|=65536,l===Zi?a.flags|=16384:(t=a.updateQueue,t===null?(t={transitions:null,markerInstances:null,retryQueue:new Set([l])},a.updateQueue=t):(a=t.retryQueue,a===null?t.retryQueue=new Set([l]):a.add(l)),mo(e,l,n)),!1}throw Error(o(435,a.tag))}return mo(e,l,n),xr(),!1}if(qe)return t=Ba.current,t!==null?((t.flags&65536)===0&&(t.flags|=256),t.flags|=65536,t.lanes=n,l!==ic&&(e=Error(o(422),{cause:l}),Ks(Wa(e,a)))):(l!==ic&&(t=Error(o(423),{cause:l}),Ks(Wa(t,a))),e=e.current.alternate,e.flags|=65536,n&=-n,e.lanes|=n,l=Wa(l,a),n=Yc(e.stateNode,l,n),xc(e,n),Nt!==4&&(Nt=2)),!1;var s=Error(o(520),{cause:l});if(s=Wa(s,a),fi===null?fi=[s]:fi.push(s),Nt!==4&&(Nt=2),t===null)return!0;l=Wa(l,a),a=t;do{switch(a.tag){case 3:return a.flags|=65536,e=n&-n,a.lanes|=e,e=Yc(a.stateNode,l,e),xc(a,e),!1;case 1:if(t=a.type,s=a.stateNode,(a.flags&128)===0&&(typeof t.getDerivedStateFromError=="function"||s!==null&&typeof s.componentDidCatch=="function"&&(pn===null||!pn.has(s))))return a.flags|=65536,n&=-n,a.lanes|=n,n=Yd(n),Qd(n,e,a,l),xc(a,n),!1}a=a.return}while(a!==null);return!1}var Qc=Error(o(461)),Gt=!1;function ra(e,t,a,l){t.child=e===null?Zu(t,null,a,l):Fn(t,e.child,a,l)}function qd(e,t,a,l,n){a=a.render;var s=t.ref;if("ref"in l){var r={};for(var d in l)d!=="ref"&&(r[d]=l[d])}else r=l;return Vn(t),l=Cc(e,t,a,r,s,n),d=wc(),e!==null&&!Gt?(Nc(e,t,n),Bl(e,t,n)):(qe&&d&&nc(t),t.flags|=1,ra(e,t,l,n),t.child)}function Vd(e,t,a,l,n){if(e===null){var s=a.type;return typeof s=="function"&&!tc(s)&&s.defaultProps===void 0&&a.compare===null?(t.tag=15,t.type=s,Xd(e,t,s,l,n)):(e=Gi(a.type,null,l,t,t.mode,n),e.ref=t.ref,e.return=t,t.child=e)}if(s=e.child,!Wc(e,n)){var r=s.memoizedProps;if(a=a.compare,a=a!==null?a:Vs,a(r,l)&&e.ref===t.ref)return Bl(e,t,n)}return t.flags|=1,e=Rl(s,l),e.ref=t.ref,e.return=t,t.child=e}function Xd(e,t,a,l,n){if(e!==null){var s=e.memoizedProps;if(Vs(s,l)&&e.ref===t.ref)if(Gt=!1,t.pendingProps=l=s,Wc(e,n))(e.flags&131072)!==0&&(Gt=!0);else return t.lanes=e.lanes,Bl(e,t,n)}return qc(e,t,a,l,n)}function Zd(e,t,a,l){var n=l.children,s=e!==null?e.memoizedState:null;if(e===null&&t.stateNode===null&&(t.stateNode={_visibility:1,_pendingMarkers:null,_retryCache:null,_transitions:null}),l.mode==="hidden"){if((t.flags&128)!==0){if(s=s!==null?s.baseLanes|a:a,e!==null){for(l=t.child=e.child,n=0;l!==null;)n=n|l.lanes|l.childLanes,l=l.sibling;l=n&~s}else l=0,t.child=null;return Kd(e,t,s,a,l)}if((a&536870912)!==0)t.memoizedState={baseLanes:0,cachePool:null},e!==null&&Vi(t,s!==null?s.cachePool:null),s!==null?Ju(t,s):bc(),Wu(t);else return l=t.lanes=536870912,Kd(e,t,s!==null?s.baseLanes|a:a,a,l)}else s!==null?(Vi(t,s.cachePool),Ju(t,s),dn(),t.memoizedState=null):(e!==null&&Vi(t,null),bc(),dn());return ra(e,t,n,a),t.child}function si(e,t){return e!==null&&e.tag===22||t.stateNode!==null||(t.stateNode={_visibility:1,_pendingMarkers:null,_retryCache:null,_transitions:null}),t.sibling}function Kd(e,t,a,l,n){var s=mc();return s=s===null?null:{parent:Ut._currentValue,pool:s},t.memoizedState={baseLanes:a,cachePool:s},e!==null&&Vi(t,null),bc(),Wu(t),e!==null&&ps(e,t,l,!0),t.childLanes=n,null}function ir(e,t){return t=cr({mode:t.mode,children:t.children},e.mode),t.ref=e.ref,e.child=t,t.return=e,t}function Fd(e,t,a){return Fn(t,e.child,null,a),e=ir(t,t.pendingProps),e.flags|=2,Ga(t),t.memoizedState=null,e}function lh(e,t,a){var l=t.pendingProps,n=(t.flags&128)!==0;if(t.flags&=-129,e===null){if(qe){if(l.mode==="hidden")return e=ir(t,l),t.lanes=536870912,si(null,e);if(Sc(t),(e=mt)?(e=rm(e,Pa),e=e!==null&&e.data==="&"?e:null,e!==null&&(t.memoizedState={dehydrated:e,treeContext:an!==null?{id:jl,overflow:Cl}:null,retryLane:536870912,hydrationErrors:null},a=_u(e),a.return=t,t.child=a,sa=t,mt=null)):e=null,e===null)throw nn(t);return t.lanes=536870912,null}return ir(t,l)}var s=e.memoizedState;if(s!==null){var r=s.dehydrated;if(Sc(t),n)if(t.flags&256)t.flags&=-257,t=Fd(e,t,a);else if(t.memoizedState!==null)t.child=e.child,t.flags|=128,t=null;else throw Error(o(558));else if(Gt||ps(e,t,a,!1),n=(a&e.childLanes)!==0,Gt||n){if(l=nt,l!==null&&(r=I(l,a),r!==0&&r!==s.retryLane))throw s.retryLane=r,Gn(e,r),_a(l,e,r),Qc;xr(),t=Fd(e,t,a)}else e=s.treeContext,mt=tl(r.nextSibling),sa=t,qe=!0,ln=null,Pa=!1,e!==null&&Ou(t,e),t=ir(t,l),t.flags|=4096;return t}return e=Rl(e.child,{mode:l.mode,children:l.children}),e.ref=t.ref,t.child=e,e.return=t,e}function rr(e,t){var a=t.ref;if(a===null)e!==null&&e.ref!==null&&(t.flags|=4194816);else{if(typeof a!="function"&&typeof a!="object")throw Error(o(284));(e===null||e.ref!==a)&&(t.flags|=4194816)}}function qc(e,t,a,l,n){return Vn(t),a=Cc(e,t,a,l,void 0,n),l=wc(),e!==null&&!Gt?(Nc(e,t,n),Bl(e,t,n)):(qe&&l&&nc(t),t.flags|=1,ra(e,t,a,n),t.child)}function Jd(e,t,a,l,n,s){return Vn(t),t.updateQueue=null,a=$u(t,l,a,n),Iu(e),l=wc(),e!==null&&!Gt?(Nc(e,t,s),Bl(e,t,s)):(qe&&l&&nc(t),t.flags|=1,ra(e,t,a,s),t.child)}function Wd(e,t,a,l,n){if(Vn(t),t.stateNode===null){var s=ds,r=a.contextType;typeof r=="object"&&r!==null&&(s=ia(r)),s=new a(l,s),t.memoizedState=s.state!==null&&s.state!==void 0?s.state:null,s.updater=Gc,t.stateNode=s,s._reactInternals=t,s=t.stateNode,s.props=l,s.state=t.memoizedState,s.refs={},pc(t),r=a.contextType,s.context=typeof r=="object"&&r!==null?ia(r):ds,s.state=t.memoizedState,r=a.getDerivedStateFromProps,typeof r=="function"&&(Bc(t,a,r,l),s.state=t.memoizedState),typeof a.getDerivedStateFromProps=="function"||typeof s.getSnapshotBeforeUpdate=="function"||typeof s.UNSAFE_componentWillMount!="function"&&typeof s.componentWillMount!="function"||(r=s.state,typeof s.componentWillMount=="function"&&s.componentWillMount(),typeof s.UNSAFE_componentWillMount=="function"&&s.UNSAFE_componentWillMount(),r!==s.state&&Gc.enqueueReplaceState(s,s.state,null),ei(t,l,s,n),Ps(),s.state=t.memoizedState),typeof s.componentDidMount=="function"&&(t.flags|=4194308),l=!0}else if(e===null){s=t.stateNode;var d=t.memoizedProps,g=Wn(a,d);s.props=g;var w=s.context,z=a.contextType;r=ds,typeof z=="object"&&z!==null&&(r=ia(z));var L=a.getDerivedStateFromProps;z=typeof L=="function"||typeof s.getSnapshotBeforeUpdate=="function",d=t.pendingProps!==d,z||typeof s.UNSAFE_componentWillReceiveProps!="function"&&typeof s.componentWillReceiveProps!="function"||(d||w!==r)&&kd(t,s,l,r),rn=!1;var M=t.memoizedState;s.state=M,ei(t,l,s,n),Ps(),w=t.memoizedState,d||M!==w||rn?(typeof L=="function"&&(Bc(t,a,L,l),w=t.memoizedState),(g=rn||Ld(t,a,g,l,M,w,r))?(z||typeof s.UNSAFE_componentWillMount!="function"&&typeof s.componentWillMount!="function"||(typeof s.componentWillMount=="function"&&s.componentWillMount(),typeof s.UNSAFE_componentWillMount=="function"&&s.UNSAFE_componentWillMount()),typeof s.componentDidMount=="function"&&(t.flags|=4194308)):(typeof s.componentDidMount=="function"&&(t.flags|=4194308),t.memoizedProps=l,t.memoizedState=w),s.props=l,s.state=w,s.context=r,l=g):(typeof s.componentDidMount=="function"&&(t.flags|=4194308),l=!1)}else{s=t.stateNode,gc(e,t),r=t.memoizedProps,z=Wn(a,r),s.props=z,L=t.pendingProps,M=s.context,w=a.contextType,g=ds,typeof w=="object"&&w!==null&&(g=ia(w)),d=a.getDerivedStateFromProps,(w=typeof d=="function"||typeof s.getSnapshotBeforeUpdate=="function")||typeof s.UNSAFE_componentWillReceiveProps!="function"&&typeof s.componentWillReceiveProps!="function"||(r!==L||M!==g)&&kd(t,s,l,g),rn=!1,M=t.memoizedState,s.state=M,ei(t,l,s,n),Ps();var E=t.memoizedState;r!==L||M!==E||rn||e!==null&&e.dependencies!==null&&Qi(e.dependencies)?(typeof d=="function"&&(Bc(t,a,d,l),E=t.memoizedState),(z=rn||Ld(t,a,z,l,M,E,g)||e!==null&&e.dependencies!==null&&Qi(e.dependencies))?(w||typeof s.UNSAFE_componentWillUpdate!="function"&&typeof s.componentWillUpdate!="function"||(typeof s.componentWillUpdate=="function"&&s.componentWillUpdate(l,E,g),typeof s.UNSAFE_componentWillUpdate=="function"&&s.UNSAFE_componentWillUpdate(l,E,g)),typeof s.componentDidUpdate=="function"&&(t.flags|=4),typeof s.getSnapshotBeforeUpdate=="function"&&(t.flags|=1024)):(typeof s.componentDidUpdate!="function"||r===e.memoizedProps&&M===e.memoizedState||(t.flags|=4),typeof s.getSnapshotBeforeUpdate!="function"||r===e.memoizedProps&&M===e.memoizedState||(t.flags|=1024),t.memoizedProps=l,t.memoizedState=E),s.props=l,s.state=E,s.context=g,l=z):(typeof s.componentDidUpdate!="function"||r===e.memoizedProps&&M===e.memoizedState||(t.flags|=4),typeof s.getSnapshotBeforeUpdate!="function"||r===e.memoizedProps&&M===e.memoizedState||(t.flags|=1024),l=!1)}return s=l,rr(e,t),l=(t.flags&128)!==0,s||l?(s=t.stateNode,a=l&&typeof a.getDerivedStateFromError!="function"?null:s.render(),t.flags|=1,e!==null&&l?(t.child=Fn(t,e.child,null,n),t.child=Fn(t,null,a,n)):ra(e,t,a,n),t.memoizedState=s.state,e=t.child):e=Bl(e,t,n),e}function Id(e,t,a,l){return Qn(),t.flags|=256,ra(e,t,a,l),t.child}var Vc={dehydrated:null,treeContext:null,retryLane:0,hydrationErrors:null};function Xc(e){return{baseLanes:e,cachePool:Gu()}}function Zc(e,t,a){return e=e!==null?e.childLanes&~a:0,t&&(e|=Qa),e}function $d(e,t,a){var l=t.pendingProps,n=!1,s=(t.flags&128)!==0,r;if((r=s)||(r=e!==null&&e.memoizedState===null?!1:(At.current&2)!==0),r&&(n=!0,t.flags&=-129),r=(t.flags&32)!==0,t.flags&=-33,e===null){if(qe){if(n?un(t):dn(),(e=mt)?(e=rm(e,Pa),e=e!==null&&e.data!=="&"?e:null,e!==null&&(t.memoizedState={dehydrated:e,treeContext:an!==null?{id:jl,overflow:Cl}:null,retryLane:536870912,hydrationErrors:null},a=_u(e),a.return=t,t.child=a,sa=t,mt=null)):e=null,e===null)throw nn(t);return Ao(e)?t.lanes=32:t.lanes=536870912,null}var d=l.children;return l=l.fallback,n?(dn(),n=t.mode,d=cr({mode:"hidden",children:d},n),l=Yn(l,n,a,null),d.return=t,l.return=t,d.sibling=l,t.child=d,l=t.child,l.memoizedState=Xc(a),l.childLanes=Zc(e,r,a),t.memoizedState=Vc,si(null,l)):(un(t),Kc(t,d))}var g=e.memoizedState;if(g!==null&&(d=g.dehydrated,d!==null)){if(s)t.flags&256?(un(t),t.flags&=-257,t=Fc(e,t,a)):t.memoizedState!==null?(dn(),t.child=e.child,t.flags|=128,t=null):(dn(),d=l.fallback,n=t.mode,l=cr({mode:"visible",children:l.children},n),d=Yn(d,n,a,null),d.flags|=2,l.return=t,d.return=t,l.sibling=d,t.child=l,Fn(t,e.child,null,a),l=t.child,l.memoizedState=Xc(a),l.childLanes=Zc(e,r,a),t.memoizedState=Vc,t=si(null,l));else if(un(t),Ao(d)){if(r=d.nextSibling&&d.nextSibling.dataset,r)var w=r.dgst;r=w,l=Error(o(419)),l.stack="",l.digest=r,Ks({value:l,source:null,stack:null}),t=Fc(e,t,a)}else if(Gt||ps(e,t,a,!1),r=(a&e.childLanes)!==0,Gt||r){if(r=nt,r!==null&&(l=I(r,a),l!==0&&l!==g.retryLane))throw g.retryLane=l,Gn(e,l),_a(r,e,l),Qc;Eo(d)||xr(),t=Fc(e,t,a)}else Eo(d)?(t.flags|=192,t.child=e.child,t=null):(e=g.treeContext,mt=tl(d.nextSibling),sa=t,qe=!0,ln=null,Pa=!1,e!==null&&Ou(t,e),t=Kc(t,l.children),t.flags|=4096);return t}return n?(dn(),d=l.fallback,n=t.mode,g=e.child,w=g.sibling,l=Rl(g,{mode:"hidden",children:l.children}),l.subtreeFlags=g.subtreeFlags&65011712,w!==null?d=Rl(w,d):(d=Yn(d,n,a,null),d.flags|=2),d.return=t,l.return=t,l.sibling=d,t.child=l,si(null,l),l=t.child,d=e.child.memoizedState,d===null?d=Xc(a):(n=d.cachePool,n!==null?(g=Ut._currentValue,n=n.parent!==g?{parent:g,pool:g}:n):n=Gu(),d={baseLanes:d.baseLanes|a,cachePool:n}),l.memoizedState=d,l.childLanes=Zc(e,r,a),t.memoizedState=Vc,si(e.child,l)):(un(t),a=e.child,e=a.sibling,a=Rl(a,{mode:"visible",children:l.children}),a.return=t,a.sibling=null,e!==null&&(r=t.deletions,r===null?(t.deletions=[e],t.flags|=16):r.push(e)),t.child=a,t.memoizedState=null,a)}function Kc(e,t){return t=cr({mode:"visible",children:t},e.mode),t.return=e,e.child=t}function cr(e,t){return e=Ua(22,e,null,t),e.lanes=0,e}function Fc(e,t,a){return Fn(t,e.child,null,a),e=Kc(t,t.pendingProps.children),e.flags|=2,t.memoizedState=null,e}function Pd(e,t,a){e.lanes|=t;var l=e.alternate;l!==null&&(l.lanes|=t),oc(e.return,t,a)}function Jc(e,t,a,l,n,s){var r=e.memoizedState;r===null?e.memoizedState={isBackwards:t,rendering:null,renderingStartTime:0,last:l,tail:a,tailMode:n,treeForkCount:s}:(r.isBackwards=t,r.rendering=null,r.renderingStartTime=0,r.last=l,r.tail=a,r.tailMode=n,r.treeForkCount=s)}function ef(e,t,a){var l=t.pendingProps,n=l.revealOrder,s=l.tail;l=l.children;var r=At.current,d=(r&2)!==0;if(d?(r=r&1|2,t.flags|=128):r&=1,Q(At,r),ra(e,t,l,a),l=qe?Zs:0,!d&&e!==null&&(e.flags&128)!==0)e:for(e=t.child;e!==null;){if(e.tag===13)e.memoizedState!==null&&Pd(e,a,t);else if(e.tag===19)Pd(e,a,t);else if(e.child!==null){e.child.return=e,e=e.child;continue}if(e===t)break e;for(;e.sibling===null;){if(e.return===null||e.return===t)break e;e=e.return}e.sibling.return=e.return,e=e.sibling}switch(n){case"forwards":for(a=t.child,n=null;a!==null;)e=a.alternate,e!==null&&Wi(e)===null&&(n=a),a=a.sibling;a=n,a===null?(n=t.child,t.child=null):(n=a.sibling,a.sibling=null),Jc(t,!1,n,a,s,l);break;case"backwards":case"unstable_legacy-backwards":for(a=null,n=t.child,t.child=null;n!==null;){if(e=n.alternate,e!==null&&Wi(e)===null){t.child=n;break}e=n.sibling,n.sibling=a,a=n,n=e}Jc(t,!0,a,null,s,l);break;case"together":Jc(t,!1,null,null,void 0,l);break;default:t.memoizedState=null}return t.child}function Bl(e,t,a){if(e!==null&&(t.dependencies=e.dependencies),hn|=t.lanes,(a&t.childLanes)===0)if(e!==null){if(ps(e,t,a,!1),(a&t.childLanes)===0)return null}else return null;if(e!==null&&t.child!==e.child)throw Error(o(153));if(t.child!==null){for(e=t.child,a=Rl(e,e.pendingProps),t.child=a,a.return=t;e.sibling!==null;)e=e.sibling,a=a.sibling=Rl(e,e.pendingProps),a.return=t;a.sibling=null}return t.child}function Wc(e,t){return(e.lanes&t)!==0?!0:(e=e.dependencies,!!(e!==null&&Qi(e)))}function nh(e,t,a){switch(t.tag){case 3:Je(t,t.stateNode.containerInfo),sn(t,Ut,e.memoizedState.cache),Qn();break;case 27:case 5:Qt(t);break;case 4:Je(t,t.stateNode.containerInfo);break;case 10:sn(t,t.type,t.memoizedProps.value);break;case 31:if(t.memoizedState!==null)return t.flags|=128,Sc(t),null;break;case 13:var l=t.memoizedState;if(l!==null)return l.dehydrated!==null?(un(t),t.flags|=128,null):(a&t.child.childLanes)!==0?$d(e,t,a):(un(t),e=Bl(e,t,a),e!==null?e.sibling:null);un(t);break;case 19:var n=(e.flags&128)!==0;if(l=(a&t.childLanes)!==0,l||(ps(e,t,a,!1),l=(a&t.childLanes)!==0),n){if(l)return ef(e,t,a);t.flags|=128}if(n=t.memoizedState,n!==null&&(n.rendering=null,n.tail=null,n.lastEffect=null),Q(At,At.current),l)break;return null;case 22:return t.lanes=0,Zd(e,t,a,t.pendingProps);case 24:sn(t,Ut,e.memoizedState.cache)}return Bl(e,t,a)}function tf(e,t,a){if(e!==null)if(e.memoizedProps!==t.pendingProps)Gt=!0;else{if(!Wc(e,a)&&(t.flags&128)===0)return Gt=!1,nh(e,t,a);Gt=(e.flags&131072)!==0}else Gt=!1,qe&&(t.flags&1048576)!==0&&Ru(t,Zs,t.index);switch(t.lanes=0,t.tag){case 16:e:{var l=t.pendingProps;if(e=Zn(t.elementType),t.type=e,typeof e=="function")tc(e)?(l=Wn(e,l),t.tag=1,t=Wd(null,t,e,l,a)):(t.tag=0,t=qc(null,t,e,l,a));else{if(e!=null){var n=e.$$typeof;if(n===le){t.tag=11,t=qd(null,t,e,l,a);break e}else if(n===de){t.tag=14,t=Vd(null,t,e,l,a);break e}}throw t=we(e)||e,Error(o(306,t,""))}}return t;case 0:return qc(e,t,t.type,t.pendingProps,a);case 1:return l=t.type,n=Wn(l,t.pendingProps),Wd(e,t,l,n,a);case 3:e:{if(Je(t,t.stateNode.containerInfo),e===null)throw Error(o(387));l=t.pendingProps;var s=t.memoizedState;n=s.element,gc(e,t),ei(t,l,null,a);var r=t.memoizedState;if(l=r.cache,sn(t,Ut,l),l!==s.cache&&uc(t,[Ut],a,!0),Ps(),l=r.element,s.isDehydrated)if(s={element:l,isDehydrated:!1,cache:r.cache},t.updateQueue.baseState=s,t.memoizedState=s,t.flags&256){t=Id(e,t,l,a);break e}else if(l!==n){n=Wa(Error(o(424)),t),Ks(n),t=Id(e,t,l,a);break e}else{switch(e=t.stateNode.containerInfo,e.nodeType){case 9:e=e.body;break;default:e=e.nodeName==="HTML"?e.ownerDocument.body:e}for(mt=tl(e.firstChild),sa=t,qe=!0,ln=null,Pa=!0,a=Zu(t,null,l,a),t.child=a;a;)a.flags=a.flags&-3|4096,a=a.sibling}else{if(Qn(),l===n){t=Bl(e,t,a);break e}ra(e,t,l,a)}t=t.child}return t;case 26:return rr(e,t),e===null?(a=mm(t.type,null,t.pendingProps,null))?t.memoizedState=a:qe||(a=t.type,e=t.pendingProps,l=wr(Se.current).createElement(a),l[P]=t,l[ne]=e,ca(l,a,e),ct(l),t.stateNode=l):t.memoizedState=mm(t.type,e.memoizedProps,t.pendingProps,e.memoizedState),null;case 27:return Qt(t),e===null&&qe&&(l=t.stateNode=um(t.type,t.pendingProps,Se.current),sa=t,Pa=!0,n=mt,bn(t.type)?(zo=n,mt=tl(l.firstChild)):mt=n),ra(e,t,t.pendingProps.children,a),rr(e,t),e===null&&(t.flags|=4194304),t.child;case 5:return e===null&&qe&&((n=l=mt)&&(l=Oh(l,t.type,t.pendingProps,Pa),l!==null?(t.stateNode=l,sa=t,mt=tl(l.firstChild),Pa=!1,n=!0):n=!1),n||nn(t)),Qt(t),n=t.type,s=t.pendingProps,r=e!==null?e.memoizedProps:null,l=s.children,No(n,s)?l=null:r!==null&&No(n,r)&&(t.flags|=32),t.memoizedState!==null&&(n=Cc(e,t,J0,null,null,a),vi._currentValue=n),rr(e,t),ra(e,t,l,a),t.child;case 6:return e===null&&qe&&((e=a=mt)&&(a=Lh(a,t.pendingProps,Pa),a!==null?(t.stateNode=a,sa=t,mt=null,e=!0):e=!1),e||nn(t)),null;case 13:return $d(e,t,a);case 4:return Je(t,t.stateNode.containerInfo),l=t.pendingProps,e===null?t.child=Fn(t,null,l,a):ra(e,t,l,a),t.child;case 11:return qd(e,t,t.type,t.pendingProps,a);case 7:return ra(e,t,t.pendingProps,a),t.child;case 8:return ra(e,t,t.pendingProps.children,a),t.child;case 12:return ra(e,t,t.pendingProps.children,a),t.child;case 10:return l=t.pendingProps,sn(t,t.type,l.value),ra(e,t,l.children,a),t.child;case 9:return n=t.type._context,l=t.pendingProps.children,Vn(t),n=ia(n),l=l(n),t.flags|=1,ra(e,t,l,a),t.child;case 14:return Vd(e,t,t.type,t.pendingProps,a);case 15:return Xd(e,t,t.type,t.pendingProps,a);case 19:return ef(e,t,a);case 31:return lh(e,t,a);case 22:return Zd(e,t,a,t.pendingProps);case 24:return Vn(t),l=ia(Ut),e===null?(n=mc(),n===null&&(n=nt,s=dc(),n.pooledCache=s,s.refCount++,s!==null&&(n.pooledCacheLanes|=a),n=s),t.memoizedState={parent:l,cache:n},pc(t),sn(t,Ut,n)):((e.lanes&a)!==0&&(gc(e,t),ei(t,null,null,a),Ps()),n=e.memoizedState,s=t.memoizedState,n.parent!==l?(n={parent:l,cache:l},t.memoizedState=n,t.lanes===0&&(t.memoizedState=t.updateQueue.baseState=n),sn(t,Ut,l)):(l=s.cache,sn(t,Ut,l),l!==n.cache&&uc(t,[Ut],a,!0))),ra(e,t,t.pendingProps.children,a),t.child;case 29:throw t.pendingProps}throw Error(o(156,t.tag))}function Gl(e){e.flags|=4}function Ic(e,t,a,l,n){if((t=(e.mode&32)!==0)&&(t=!1),t){if(e.flags|=16777216,(n&335544128)===n)if(e.stateNode.complete)e.flags|=8192;else if(Af())e.flags|=8192;else throw Kn=Zi,hc}else e.flags&=-16777217}function af(e,t){if(t.type!=="stylesheet"||(t.state.loading&4)!==0)e.flags&=-16777217;else if(e.flags|=16777216,!ym(t))if(Af())e.flags|=8192;else throw Kn=Zi,hc}function or(e,t){t!==null&&(e.flags|=4),e.flags&16384&&(t=e.tag!==22?il():536870912,e.lanes|=t,Ts|=t)}function ii(e,t){if(!qe)switch(e.tailMode){case"hidden":t=e.tail;for(var a=null;t!==null;)t.alternate!==null&&(a=t),t=t.sibling;a===null?e.tail=null:a.sibling=null;break;case"collapsed":a=e.tail;for(var l=null;a!==null;)a.alternate!==null&&(l=a),a=a.sibling;l===null?t||e.tail===null?e.tail=null:e.tail.sibling=null:l.sibling=null}}function ht(e){var t=e.alternate!==null&&e.alternate.child===e.child,a=0,l=0;if(t)for(var n=e.child;n!==null;)a|=n.lanes|n.childLanes,l|=n.subtreeFlags&65011712,l|=n.flags&65011712,n.return=e,n=n.sibling;else for(n=e.child;n!==null;)a|=n.lanes|n.childLanes,l|=n.subtreeFlags,l|=n.flags,n.return=e,n=n.sibling;return e.subtreeFlags|=l,e.childLanes=a,t}function sh(e,t,a){var l=t.pendingProps;switch(sc(t),t.tag){case 16:case 15:case 0:case 11:case 7:case 8:case 12:case 9:case 14:return ht(t),null;case 1:return ht(t),null;case 3:return a=t.stateNode,l=null,e!==null&&(l=e.memoizedState.cache),t.memoizedState.cache!==l&&(t.flags|=2048),kl(Ut),ye(),a.pendingContext&&(a.context=a.pendingContext,a.pendingContext=null),(e===null||e.child===null)&&(hs(t)?Gl(t):e===null||e.memoizedState.isDehydrated&&(t.flags&256)===0||(t.flags|=1024,rc())),ht(t),null;case 26:var n=t.type,s=t.memoizedState;return e===null?(Gl(t),s!==null?(ht(t),af(t,s)):(ht(t),Ic(t,n,null,l,a))):s?s!==e.memoizedState?(Gl(t),ht(t),af(t,s)):(ht(t),t.flags&=-16777217):(e=e.memoizedProps,e!==l&&Gl(t),ht(t),Ic(t,n,e,l,a)),null;case 27:if(Le(t),a=Se.current,n=t.type,e!==null&&t.stateNode!=null)e.memoizedProps!==l&&Gl(t);else{if(!l){if(t.stateNode===null)throw Error(o(166));return ht(t),null}e=ee.current,hs(t)?Lu(t):(e=um(n,l,a),t.stateNode=e,Gl(t))}return ht(t),null;case 5:if(Le(t),n=t.type,e!==null&&t.stateNode!=null)e.memoizedProps!==l&&Gl(t);else{if(!l){if(t.stateNode===null)throw Error(o(166));return ht(t),null}if(s=ee.current,hs(t))Lu(t);else{var r=wr(Se.current);switch(s){case 1:s=r.createElementNS("http://www.w3.org/2000/svg",n);break;case 2:s=r.createElementNS("http://www.w3.org/1998/Math/MathML",n);break;default:switch(n){case"svg":s=r.createElementNS("http://www.w3.org/2000/svg",n);break;case"math":s=r.createElementNS("http://www.w3.org/1998/Math/MathML",n);break;case"script":s=r.createElement("div"),s.innerHTML="<script><\/script>",s=s.removeChild(s.firstChild);break;case"select":s=typeof l.is=="string"?r.createElement("select",{is:l.is}):r.createElement("select"),l.multiple?s.multiple=!0:l.size&&(s.size=l.size);break;default:s=typeof l.is=="string"?r.createElement(n,{is:l.is}):r.createElement(n)}}s[P]=t,s[ne]=l;e:for(r=t.child;r!==null;){if(r.tag===5||r.tag===6)s.appendChild(r.stateNode);else if(r.tag!==4&&r.tag!==27&&r.child!==null){r.child.return=r,r=r.child;continue}if(r===t)break e;for(;r.sibling===null;){if(r.return===null||r.return===t)break e;r=r.return}r.sibling.return=r.return,r=r.sibling}t.stateNode=s;e:switch(ca(s,n,l),n){case"button":case"input":case"select":case"textarea":l=!!l.autoFocus;break e;case"img":l=!0;break e;default:l=!1}l&&Gl(t)}}return ht(t),Ic(t,t.type,e===null?null:e.memoizedProps,t.pendingProps,a),null;case 6:if(e&&t.stateNode!=null)e.memoizedProps!==l&&Gl(t);else{if(typeof l!="string"&&t.stateNode===null)throw Error(o(166));if(e=Se.current,hs(t)){if(e=t.stateNode,a=t.memoizedProps,l=null,n=sa,n!==null)switch(n.tag){case 27:case 5:l=n.memoizedProps}e[P]=t,e=!!(e.nodeValue===a||l!==null&&l.suppressHydrationWarning===!0||Pf(e.nodeValue,a)),e||nn(t,!0)}else e=wr(e).createTextNode(l),e[P]=t,t.stateNode=e}return ht(t),null;case 31:if(a=t.memoizedState,e===null||e.memoizedState!==null){if(l=hs(t),a!==null){if(e===null){if(!l)throw Error(o(318));if(e=t.memoizedState,e=e!==null?e.dehydrated:null,!e)throw Error(o(557));e[P]=t}else Qn(),(t.flags&128)===0&&(t.memoizedState=null),t.flags|=4;ht(t),e=!1}else a=rc(),e!==null&&e.memoizedState!==null&&(e.memoizedState.hydrationErrors=a),e=!0;if(!e)return t.flags&256?(Ga(t),t):(Ga(t),null);if((t.flags&128)!==0)throw Error(o(558))}return ht(t),null;case 13:if(l=t.memoizedState,e===null||e.memoizedState!==null&&e.memoizedState.dehydrated!==null){if(n=hs(t),l!==null&&l.dehydrated!==null){if(e===null){if(!n)throw Error(o(318));if(n=t.memoizedState,n=n!==null?n.dehydrated:null,!n)throw Error(o(317));n[P]=t}else Qn(),(t.flags&128)===0&&(t.memoizedState=null),t.flags|=4;ht(t),n=!1}else n=rc(),e!==null&&e.memoizedState!==null&&(e.memoizedState.hydrationErrors=n),n=!0;if(!n)return t.flags&256?(Ga(t),t):(Ga(t),null)}return Ga(t),(t.flags&128)!==0?(t.lanes=a,t):(a=l!==null,e=e!==null&&e.memoizedState!==null,a&&(l=t.child,n=null,l.alternate!==null&&l.alternate.memoizedState!==null&&l.alternate.memoizedState.cachePool!==null&&(n=l.alternate.memoizedState.cachePool.pool),s=null,l.memoizedState!==null&&l.memoizedState.cachePool!==null&&(s=l.memoizedState.cachePool.pool),s!==n&&(l.flags|=2048)),a!==e&&a&&(t.child.flags|=8192),or(t,t.updateQueue),ht(t),null);case 4:return ye(),e===null&&vo(t.stateNode.containerInfo),ht(t),null;case 10:return kl(t.type),ht(t),null;case 19:if(_(At),l=t.memoizedState,l===null)return ht(t),null;if(n=(t.flags&128)!==0,s=l.rendering,s===null)if(n)ii(l,!1);else{if(Nt!==0||e!==null&&(e.flags&128)!==0)for(e=t.child;e!==null;){if(s=Wi(e),s!==null){for(t.flags|=128,ii(l,!1),e=s.updateQueue,t.updateQueue=e,or(t,e),t.subtreeFlags=0,e=a,a=t.child;a!==null;)zu(a,e),a=a.sibling;return Q(At,At.current&1|2),qe&&Ol(t,l.treeForkCount),t.child}e=e.sibling}l.tail!==null&&Tt()>hr&&(t.flags|=128,n=!0,ii(l,!1),t.lanes=4194304)}else{if(!n)if(e=Wi(s),e!==null){if(t.flags|=128,n=!0,e=e.updateQueue,t.updateQueue=e,or(t,e),ii(l,!0),l.tail===null&&l.tailMode==="hidden"&&!s.alternate&&!qe)return ht(t),null}else 2*Tt()-l.renderingStartTime>hr&&a!==536870912&&(t.flags|=128,n=!0,ii(l,!1),t.lanes=4194304);l.isBackwards?(s.sibling=t.child,t.child=s):(e=l.last,e!==null?e.sibling=s:t.child=s,l.last=s)}return l.tail!==null?(e=l.tail,l.rendering=e,l.tail=e.sibling,l.renderingStartTime=Tt(),e.sibling=null,a=At.current,Q(At,n?a&1|2:a&1),qe&&Ol(t,l.treeForkCount),e):(ht(t),null);case 22:case 23:return Ga(t),vc(),l=t.memoizedState!==null,e!==null?e.memoizedState!==null!==l&&(t.flags|=8192):l&&(t.flags|=8192),l?(a&536870912)!==0&&(t.flags&128)===0&&(ht(t),t.subtreeFlags&6&&(t.flags|=8192)):ht(t),a=t.updateQueue,a!==null&&or(t,a.retryQueue),a=null,e!==null&&e.memoizedState!==null&&e.memoizedState.cachePool!==null&&(a=e.memoizedState.cachePool.pool),l=null,t.memoizedState!==null&&t.memoizedState.cachePool!==null&&(l=t.memoizedState.cachePool.pool),l!==a&&(t.flags|=2048),e!==null&&_(Xn),null;case 24:return a=null,e!==null&&(a=e.memoizedState.cache),t.memoizedState.cache!==a&&(t.flags|=2048),kl(Ut),ht(t),null;case 25:return null;case 30:return null}throw Error(o(156,t.tag))}function ih(e,t){switch(sc(t),t.tag){case 1:return e=t.flags,e&65536?(t.flags=e&-65537|128,t):null;case 3:return kl(Ut),ye(),e=t.flags,(e&65536)!==0&&(e&128)===0?(t.flags=e&-65537|128,t):null;case 26:case 27:case 5:return Le(t),null;case 31:if(t.memoizedState!==null){if(Ga(t),t.alternate===null)throw Error(o(340));Qn()}return e=t.flags,e&65536?(t.flags=e&-65537|128,t):null;case 13:if(Ga(t),e=t.memoizedState,e!==null&&e.dehydrated!==null){if(t.alternate===null)throw Error(o(340));Qn()}return e=t.flags,e&65536?(t.flags=e&-65537|128,t):null;case 19:return _(At),null;case 4:return ye(),null;case 10:return kl(t.type),null;case 22:case 23:return Ga(t),vc(),e!==null&&_(Xn),e=t.flags,e&65536?(t.flags=e&-65537|128,t):null;case 24:return kl(Ut),null;case 25:return null;default:return null}}function lf(e,t){switch(sc(t),t.tag){case 3:kl(Ut),ye();break;case 26:case 27:case 5:Le(t);break;case 4:ye();break;case 31:t.memoizedState!==null&&Ga(t);break;case 13:Ga(t);break;case 19:_(At);break;case 10:kl(t.type);break;case 22:case 23:Ga(t),vc(),e!==null&&_(Xn);break;case 24:kl(Ut)}}function ri(e,t){try{var a=t.updateQueue,l=a!==null?a.lastEffect:null;if(l!==null){var n=l.next;a=n;do{if((a.tag&e)===e){l=void 0;var s=a.create,r=a.inst;l=s(),r.destroy=l}a=a.next}while(a!==n)}}catch(d){$e(t,t.return,d)}}function fn(e,t,a){try{var l=t.updateQueue,n=l!==null?l.lastEffect:null;if(n!==null){var s=n.next;l=s;do{if((l.tag&e)===e){var r=l.inst,d=r.destroy;if(d!==void 0){r.destroy=void 0,n=t;var g=a,w=d;try{w()}catch(z){$e(n,g,z)}}}l=l.next}while(l!==s)}}catch(z){$e(t,t.return,z)}}function nf(e){var t=e.updateQueue;if(t!==null){var a=e.stateNode;try{Fu(t,a)}catch(l){$e(e,e.return,l)}}}function sf(e,t,a){a.props=Wn(e.type,e.memoizedProps),a.state=e.memoizedState;try{a.componentWillUnmount()}catch(l){$e(e,t,l)}}function ci(e,t){try{var a=e.ref;if(a!==null){switch(e.tag){case 26:case 27:case 5:var l=e.stateNode;break;case 30:l=e.stateNode;break;default:l=e.stateNode}typeof a=="function"?e.refCleanup=a(l):a.current=l}}catch(n){$e(e,t,n)}}function wl(e,t){var a=e.ref,l=e.refCleanup;if(a!==null)if(typeof l=="function")try{l()}catch(n){$e(e,t,n)}finally{e.refCleanup=null,e=e.alternate,e!=null&&(e.refCleanup=null)}else if(typeof a=="function")try{a(null)}catch(n){$e(e,t,n)}else a.current=null}function rf(e){var t=e.type,a=e.memoizedProps,l=e.stateNode;try{e:switch(t){case"button":case"input":case"select":case"textarea":a.autoFocus&&l.focus();break e;case"img":a.src?l.src=a.src:a.srcSet&&(l.srcset=a.srcSet)}}catch(n){$e(e,e.return,n)}}function $c(e,t,a){try{var l=e.stateNode;Eh(l,e.type,a,t),l[ne]=t}catch(n){$e(e,e.return,n)}}function cf(e){return e.tag===5||e.tag===3||e.tag===26||e.tag===27&&bn(e.type)||e.tag===4}function Pc(e){e:for(;;){for(;e.sibling===null;){if(e.return===null||cf(e.return))return null;e=e.return}for(e.sibling.return=e.return,e=e.sibling;e.tag!==5&&e.tag!==6&&e.tag!==18;){if(e.tag===27&&bn(e.type)||e.flags&2||e.child===null||e.tag===4)continue e;e.child.return=e,e=e.child}if(!(e.flags&2))return e.stateNode}}function eo(e,t,a){var l=e.tag;if(l===5||l===6)e=e.stateNode,t?(a.nodeType===9?a.body:a.nodeName==="HTML"?a.ownerDocument.body:a).insertBefore(e,t):(t=a.nodeType===9?a.body:a.nodeName==="HTML"?a.ownerDocument.body:a,t.appendChild(e),a=a._reactRootContainer,a!=null||t.onclick!==null||(t.onclick=Na));else if(l!==4&&(l===27&&bn(e.type)&&(a=e.stateNode,t=null),e=e.child,e!==null))for(eo(e,t,a),e=e.sibling;e!==null;)eo(e,t,a),e=e.sibling}function ur(e,t,a){var l=e.tag;if(l===5||l===6)e=e.stateNode,t?a.insertBefore(e,t):a.appendChild(e);else if(l!==4&&(l===27&&bn(e.type)&&(a=e.stateNode),e=e.child,e!==null))for(ur(e,t,a),e=e.sibling;e!==null;)ur(e,t,a),e=e.sibling}function of(e){var t=e.stateNode,a=e.memoizedProps;try{for(var l=e.type,n=t.attributes;n.length;)t.removeAttributeNode(n[0]);ca(t,l,a),t[P]=e,t[ne]=a}catch(s){$e(e,e.return,s)}}var Yl=!1,Yt=!1,to=!1,uf=typeof WeakSet=="function"?WeakSet:Set,$t=null;function rh(e,t){if(e=e.containerInfo,Co=_r,e=Su(e),Fr(e)){if("selectionStart"in e)var a={start:e.selectionStart,end:e.selectionEnd};else e:{a=(a=e.ownerDocument)&&a.defaultView||window;var l=a.getSelection&&a.getSelection();if(l&&l.rangeCount!==0){a=l.anchorNode;var n=l.anchorOffset,s=l.focusNode;l=l.focusOffset;try{a.nodeType,s.nodeType}catch{a=null;break e}var r=0,d=-1,g=-1,w=0,z=0,L=e,M=null;t:for(;;){for(var E;L!==a||n!==0&&L.nodeType!==3||(d=r+n),L!==s||l!==0&&L.nodeType!==3||(g=r+l),L.nodeType===3&&(r+=L.nodeValue.length),(E=L.firstChild)!==null;)M=L,L=E;for(;;){if(L===e)break t;if(M===a&&++w===n&&(d=r),M===s&&++z===l&&(g=r),(E=L.nextSibling)!==null)break;L=M,M=L.parentNode}L=E}a=d===-1||g===-1?null:{start:d,end:g}}else a=null}a=a||{start:0,end:0}}else a=null;for(wo={focusedElem:e,selectionRange:a},_r=!1,$t=t;$t!==null;)if(t=$t,e=t.child,(t.subtreeFlags&1028)!==0&&e!==null)e.return=t,$t=e;else for(;$t!==null;){switch(t=$t,s=t.alternate,e=t.flags,t.tag){case 0:if((e&4)!==0&&(e=t.updateQueue,e=e!==null?e.events:null,e!==null))for(a=0;a<e.length;a++)n=e[a],n.ref.impl=n.nextImpl;break;case 11:case 15:break;case 1:if((e&1024)!==0&&s!==null){e=void 0,a=t,n=s.memoizedProps,s=s.memoizedState,l=a.stateNode;try{var re=Wn(a.type,n);e=l.getSnapshotBeforeUpdate(re,s),l.__reactInternalSnapshotBeforeUpdate=e}catch(be){$e(a,a.return,be)}}break;case 3:if((e&1024)!==0){if(e=t.stateNode.containerInfo,a=e.nodeType,a===9)To(e);else if(a===1)switch(e.nodeName){case"HEAD":case"HTML":case"BODY":To(e);break;default:e.textContent=""}}break;case 5:case 26:case 27:case 6:case 4:case 17:break;default:if((e&1024)!==0)throw Error(o(163))}if(e=t.sibling,e!==null){e.return=t.return,$t=e;break}$t=t.return}}function df(e,t,a){var l=a.flags;switch(a.tag){case 0:case 11:case 15:ql(e,a),l&4&&ri(5,a);break;case 1:if(ql(e,a),l&4)if(e=a.stateNode,t===null)try{e.componentDidMount()}catch(r){$e(a,a.return,r)}else{var n=Wn(a.type,t.memoizedProps);t=t.memoizedState;try{e.componentDidUpdate(n,t,e.__reactInternalSnapshotBeforeUpdate)}catch(r){$e(a,a.return,r)}}l&64&&nf(a),l&512&&ci(a,a.return);break;case 3:if(ql(e,a),l&64&&(e=a.updateQueue,e!==null)){if(t=null,a.child!==null)switch(a.child.tag){case 27:case 5:t=a.child.stateNode;break;case 1:t=a.child.stateNode}try{Fu(e,t)}catch(r){$e(a,a.return,r)}}break;case 27:t===null&&l&4&&of(a);case 26:case 5:ql(e,a),t===null&&l&4&&rf(a),l&512&&ci(a,a.return);break;case 12:ql(e,a);break;case 31:ql(e,a),l&4&&hf(e,a);break;case 13:ql(e,a),l&4&&pf(e,a),l&64&&(e=a.memoizedState,e!==null&&(e=e.dehydrated,e!==null&&(a=gh.bind(null,a),kh(e,a))));break;case 22:if(l=a.memoizedState!==null||Yl,!l){t=t!==null&&t.memoizedState!==null||Yt,n=Yl;var s=Yt;Yl=l,(Yt=t)&&!s?Vl(e,a,(a.subtreeFlags&8772)!==0):ql(e,a),Yl=n,Yt=s}break;case 30:break;default:ql(e,a)}}function ff(e){var t=e.alternate;t!==null&&(e.alternate=null,ff(t)),e.child=null,e.deletions=null,e.sibling=null,e.tag===5&&(t=e.stateNode,t!==null&&Dt(t)),e.stateNode=null,e.return=null,e.dependencies=null,e.memoizedProps=null,e.memoizedState=null,e.pendingProps=null,e.stateNode=null,e.updateQueue=null}var yt=null,Ta=!1;function Ql(e,t,a){for(a=a.child;a!==null;)mf(e,t,a),a=a.sibling}function mf(e,t,a){if(lt&&typeof lt.onCommitFiberUnmount=="function")try{lt.onCommitFiberUnmount(xa,a)}catch{}switch(a.tag){case 26:Yt||wl(a,t),Ql(e,t,a),a.memoizedState?a.memoizedState.count--:a.stateNode&&(a=a.stateNode,a.parentNode.removeChild(a));break;case 27:Yt||wl(a,t);var l=yt,n=Ta;bn(a.type)&&(yt=a.stateNode,Ta=!1),Ql(e,t,a),xi(a.stateNode),yt=l,Ta=n;break;case 5:Yt||wl(a,t);case 6:if(l=yt,n=Ta,yt=null,Ql(e,t,a),yt=l,Ta=n,yt!==null)if(Ta)try{(yt.nodeType===9?yt.body:yt.nodeName==="HTML"?yt.ownerDocument.body:yt).removeChild(a.stateNode)}catch(s){$e(a,t,s)}else try{yt.removeChild(a.stateNode)}catch(s){$e(a,t,s)}break;case 18:yt!==null&&(Ta?(e=yt,sm(e.nodeType===9?e.body:e.nodeName==="HTML"?e.ownerDocument.body:e,a.stateNode),Ls(e)):sm(yt,a.stateNode));break;case 4:l=yt,n=Ta,yt=a.stateNode.containerInfo,Ta=!0,Ql(e,t,a),yt=l,Ta=n;break;case 0:case 11:case 14:case 15:fn(2,a,t),Yt||fn(4,a,t),Ql(e,t,a);break;case 1:Yt||(wl(a,t),l=a.stateNode,typeof l.componentWillUnmount=="function"&&sf(a,t,l)),Ql(e,t,a);break;case 21:Ql(e,t,a);break;case 22:Yt=(l=Yt)||a.memoizedState!==null,Ql(e,t,a),Yt=l;break;default:Ql(e,t,a)}}function hf(e,t){if(t.memoizedState===null&&(e=t.alternate,e!==null&&(e=e.memoizedState,e!==null))){e=e.dehydrated;try{Ls(e)}catch(a){$e(t,t.return,a)}}}function pf(e,t){if(t.memoizedState===null&&(e=t.alternate,e!==null&&(e=e.memoizedState,e!==null&&(e=e.dehydrated,e!==null))))try{Ls(e)}catch(a){$e(t,t.return,a)}}function ch(e){switch(e.tag){case 31:case 13:case 19:var t=e.stateNode;return t===null&&(t=e.stateNode=new uf),t;case 22:return e=e.stateNode,t=e._retryCache,t===null&&(t=e._retryCache=new uf),t;default:throw Error(o(435,e.tag))}}function dr(e,t){var a=ch(e);t.forEach(function(l){if(!a.has(l)){a.add(l);var n=xh.bind(null,e,l);l.then(n,n)}})}function Ea(e,t){var a=t.deletions;if(a!==null)for(var l=0;l<a.length;l++){var n=a[l],s=e,r=t,d=r;e:for(;d!==null;){switch(d.tag){case 27:if(bn(d.type)){yt=d.stateNode,Ta=!1;break e}break;case 5:yt=d.stateNode,Ta=!1;break e;case 3:case 4:yt=d.stateNode.containerInfo,Ta=!0;break e}d=d.return}if(yt===null)throw Error(o(160));mf(s,r,n),yt=null,Ta=!1,s=n.alternate,s!==null&&(s.return=null),n.return=null}if(t.subtreeFlags&13886)for(t=t.child;t!==null;)gf(t,e),t=t.sibling}var hl=null;function gf(e,t){var a=e.alternate,l=e.flags;switch(e.tag){case 0:case 11:case 14:case 15:Ea(t,e),Aa(e),l&4&&(fn(3,e,e.return),ri(3,e),fn(5,e,e.return));break;case 1:Ea(t,e),Aa(e),l&512&&(Yt||a===null||wl(a,a.return)),l&64&&Yl&&(e=e.updateQueue,e!==null&&(l=e.callbacks,l!==null&&(a=e.shared.hiddenCallbacks,e.shared.hiddenCallbacks=a===null?l:a.concat(l))));break;case 26:var n=hl;if(Ea(t,e),Aa(e),l&512&&(Yt||a===null||wl(a,a.return)),l&4){var s=a!==null?a.memoizedState:null;if(l=e.memoizedState,a===null)if(l===null)if(e.stateNode===null){e:{l=e.type,a=e.memoizedProps,n=n.ownerDocument||n;t:switch(l){case"title":s=n.getElementsByTagName("title")[0],(!s||s[je]||s[P]||s.namespaceURI==="http://www.w3.org/2000/svg"||s.hasAttribute("itemprop"))&&(s=n.createElement(l),n.head.insertBefore(s,n.querySelector("head > title"))),ca(s,l,a),s[P]=e,ct(s),l=s;break e;case"link":var r=gm("link","href",n).get(l+(a.href||""));if(r){for(var d=0;d<r.length;d++)if(s=r[d],s.getAttribute("href")===(a.href==null||a.href===""?null:a.href)&&s.getAttribute("rel")===(a.rel==null?null:a.rel)&&s.getAttribute("title")===(a.title==null?null:a.title)&&s.getAttribute("crossorigin")===(a.crossOrigin==null?null:a.crossOrigin)){r.splice(d,1);break t}}s=n.createElement(l),ca(s,l,a),n.head.appendChild(s);break;case"meta":if(r=gm("meta","content",n).get(l+(a.content||""))){for(d=0;d<r.length;d++)if(s=r[d],s.getAttribute("content")===(a.content==null?null:""+a.content)&&s.getAttribute("name")===(a.name==null?null:a.name)&&s.getAttribute("property")===(a.property==null?null:a.property)&&s.getAttribute("http-equiv")===(a.httpEquiv==null?null:a.httpEquiv)&&s.getAttribute("charset")===(a.charSet==null?null:a.charSet)){r.splice(d,1);break t}}s=n.createElement(l),ca(s,l,a),n.head.appendChild(s);break;default:throw Error(o(468,l))}s[P]=e,ct(s),l=s}e.stateNode=l}else xm(n,e.type,e.stateNode);else e.stateNode=pm(n,l,e.memoizedProps);else s!==l?(s===null?a.stateNode!==null&&(a=a.stateNode,a.parentNode.removeChild(a)):s.count--,l===null?xm(n,e.type,e.stateNode):pm(n,l,e.memoizedProps)):l===null&&e.stateNode!==null&&$c(e,e.memoizedProps,a.memoizedProps)}break;case 27:Ea(t,e),Aa(e),l&512&&(Yt||a===null||wl(a,a.return)),a!==null&&l&4&&$c(e,e.memoizedProps,a.memoizedProps);break;case 5:if(Ea(t,e),Aa(e),l&512&&(Yt||a===null||wl(a,a.return)),e.flags&32){n=e.stateNode;try{Et(n,"")}catch(re){$e(e,e.return,re)}}l&4&&e.stateNode!=null&&(n=e.memoizedProps,$c(e,n,a!==null?a.memoizedProps:n)),l&1024&&(to=!0);break;case 6:if(Ea(t,e),Aa(e),l&4){if(e.stateNode===null)throw Error(o(162));l=e.memoizedProps,a=e.stateNode;try{a.nodeValue=l}catch(re){$e(e,e.return,re)}}break;case 3:if(Tr=null,n=hl,hl=Nr(t.containerInfo),Ea(t,e),hl=n,Aa(e),l&4&&a!==null&&a.memoizedState.isDehydrated)try{Ls(t.containerInfo)}catch(re){$e(e,e.return,re)}to&&(to=!1,xf(e));break;case 4:l=hl,hl=Nr(e.stateNode.containerInfo),Ea(t,e),Aa(e),hl=l;break;case 12:Ea(t,e),Aa(e);break;case 31:Ea(t,e),Aa(e),l&4&&(l=e.updateQueue,l!==null&&(e.updateQueue=null,dr(e,l)));break;case 13:Ea(t,e),Aa(e),e.child.flags&8192&&e.memoizedState!==null!=(a!==null&&a.memoizedState!==null)&&(mr=Tt()),l&4&&(l=e.updateQueue,l!==null&&(e.updateQueue=null,dr(e,l)));break;case 22:n=e.memoizedState!==null;var g=a!==null&&a.memoizedState!==null,w=Yl,z=Yt;if(Yl=w||n,Yt=z||g,Ea(t,e),Yt=z,Yl=w,Aa(e),l&8192)e:for(t=e.stateNode,t._visibility=n?t._visibility&-2:t._visibility|1,n&&(a===null||g||Yl||Yt||In(e)),a=null,t=e;;){if(t.tag===5||t.tag===26){if(a===null){g=a=t;try{if(s=g.stateNode,n)r=s.style,typeof r.setProperty=="function"?r.setProperty("display","none","important"):r.display="none";else{d=g.stateNode;var L=g.memoizedProps.style,M=L!=null&&L.hasOwnProperty("display")?L.display:null;d.style.display=M==null||typeof M=="boolean"?"":(""+M).trim()}}catch(re){$e(g,g.return,re)}}}else if(t.tag===6){if(a===null){g=t;try{g.stateNode.nodeValue=n?"":g.memoizedProps}catch(re){$e(g,g.return,re)}}}else if(t.tag===18){if(a===null){g=t;try{var E=g.stateNode;n?im(E,!0):im(g.stateNode,!1)}catch(re){$e(g,g.return,re)}}}else if((t.tag!==22&&t.tag!==23||t.memoizedState===null||t===e)&&t.child!==null){t.child.return=t,t=t.child;continue}if(t===e)break e;for(;t.sibling===null;){if(t.return===null||t.return===e)break e;a===t&&(a=null),t=t.return}a===t&&(a=null),t.sibling.return=t.return,t=t.sibling}l&4&&(l=e.updateQueue,l!==null&&(a=l.retryQueue,a!==null&&(l.retryQueue=null,dr(e,a))));break;case 19:Ea(t,e),Aa(e),l&4&&(l=e.updateQueue,l!==null&&(e.updateQueue=null,dr(e,l)));break;case 30:break;case 21:break;default:Ea(t,e),Aa(e)}}function Aa(e){var t=e.flags;if(t&2){try{for(var a,l=e.return;l!==null;){if(cf(l)){a=l;break}l=l.return}if(a==null)throw Error(o(160));switch(a.tag){case 27:var n=a.stateNode,s=Pc(e);ur(e,s,n);break;case 5:var r=a.stateNode;a.flags&32&&(Et(r,""),a.flags&=-33);var d=Pc(e);ur(e,d,r);break;case 3:case 4:var g=a.stateNode.containerInfo,w=Pc(e);eo(e,w,g);break;default:throw Error(o(161))}}catch(z){$e(e,e.return,z)}e.flags&=-3}t&4096&&(e.flags&=-4097)}function xf(e){if(e.subtreeFlags&1024)for(e=e.child;e!==null;){var t=e;xf(t),t.tag===5&&t.flags&1024&&t.stateNode.reset(),e=e.sibling}}function ql(e,t){if(t.subtreeFlags&8772)for(t=t.child;t!==null;)df(e,t.alternate,t),t=t.sibling}function In(e){for(e=e.child;e!==null;){var t=e;switch(t.tag){case 0:case 11:case 14:case 15:fn(4,t,t.return),In(t);break;case 1:wl(t,t.return);var a=t.stateNode;typeof a.componentWillUnmount=="function"&&sf(t,t.return,a),In(t);break;case 27:xi(t.stateNode);case 26:case 5:wl(t,t.return),In(t);break;case 22:t.memoizedState===null&&In(t);break;case 30:In(t);break;default:In(t)}e=e.sibling}}function Vl(e,t,a){for(a=a&&(t.subtreeFlags&8772)!==0,t=t.child;t!==null;){var l=t.alternate,n=e,s=t,r=s.flags;switch(s.tag){case 0:case 11:case 15:Vl(n,s,a),ri(4,s);break;case 1:if(Vl(n,s,a),l=s,n=l.stateNode,typeof n.componentDidMount=="function")try{n.componentDidMount()}catch(w){$e(l,l.return,w)}if(l=s,n=l.updateQueue,n!==null){var d=l.stateNode;try{var g=n.shared.hiddenCallbacks;if(g!==null)for(n.shared.hiddenCallbacks=null,n=0;n<g.length;n++)Ku(g[n],d)}catch(w){$e(l,l.return,w)}}a&&r&64&&nf(s),ci(s,s.return);break;case 27:of(s);case 26:case 5:Vl(n,s,a),a&&l===null&&r&4&&rf(s),ci(s,s.return);break;case 12:Vl(n,s,a);break;case 31:Vl(n,s,a),a&&r&4&&hf(n,s);break;case 13:Vl(n,s,a),a&&r&4&&pf(n,s);break;case 22:s.memoizedState===null&&Vl(n,s,a),ci(s,s.return);break;case 30:break;default:Vl(n,s,a)}t=t.sibling}}function ao(e,t){var a=null;e!==null&&e.memoizedState!==null&&e.memoizedState.cachePool!==null&&(a=e.memoizedState.cachePool.pool),e=null,t.memoizedState!==null&&t.memoizedState.cachePool!==null&&(e=t.memoizedState.cachePool.pool),e!==a&&(e!=null&&e.refCount++,a!=null&&Fs(a))}function lo(e,t){e=null,t.alternate!==null&&(e=t.alternate.memoizedState.cache),t=t.memoizedState.cache,t!==e&&(t.refCount++,e!=null&&Fs(e))}function pl(e,t,a,l){if(t.subtreeFlags&10256)for(t=t.child;t!==null;)yf(e,t,a,l),t=t.sibling}function yf(e,t,a,l){var n=t.flags;switch(t.tag){case 0:case 11:case 15:pl(e,t,a,l),n&2048&&ri(9,t);break;case 1:pl(e,t,a,l);break;case 3:pl(e,t,a,l),n&2048&&(e=null,t.alternate!==null&&(e=t.alternate.memoizedState.cache),t=t.memoizedState.cache,t!==e&&(t.refCount++,e!=null&&Fs(e)));break;case 12:if(n&2048){pl(e,t,a,l),e=t.stateNode;try{var s=t.memoizedProps,r=s.id,d=s.onPostCommit;typeof d=="function"&&d(r,t.alternate===null?"mount":"update",e.passiveEffectDuration,-0)}catch(g){$e(t,t.return,g)}}else pl(e,t,a,l);break;case 31:pl(e,t,a,l);break;case 13:pl(e,t,a,l);break;case 23:break;case 22:s=t.stateNode,r=t.alternate,t.memoizedState!==null?s._visibility&2?pl(e,t,a,l):oi(e,t):s._visibility&2?pl(e,t,a,l):(s._visibility|=2,ws(e,t,a,l,(t.subtreeFlags&10256)!==0||!1)),n&2048&&ao(r,t);break;case 24:pl(e,t,a,l),n&2048&&lo(t.alternate,t);break;default:pl(e,t,a,l)}}function ws(e,t,a,l,n){for(n=n&&((t.subtreeFlags&10256)!==0||!1),t=t.child;t!==null;){var s=e,r=t,d=a,g=l,w=r.flags;switch(r.tag){case 0:case 11:case 15:ws(s,r,d,g,n),ri(8,r);break;case 23:break;case 22:var z=r.stateNode;r.memoizedState!==null?z._visibility&2?ws(s,r,d,g,n):oi(s,r):(z._visibility|=2,ws(s,r,d,g,n)),n&&w&2048&&ao(r.alternate,r);break;case 24:ws(s,r,d,g,n),n&&w&2048&&lo(r.alternate,r);break;default:ws(s,r,d,g,n)}t=t.sibling}}function oi(e,t){if(t.subtreeFlags&10256)for(t=t.child;t!==null;){var a=e,l=t,n=l.flags;switch(l.tag){case 22:oi(a,l),n&2048&&ao(l.alternate,l);break;case 24:oi(a,l),n&2048&&lo(l.alternate,l);break;default:oi(a,l)}t=t.sibling}}var ui=8192;function Ns(e,t,a){if(e.subtreeFlags&ui)for(e=e.child;e!==null;)bf(e,t,a),e=e.sibling}function bf(e,t,a){switch(e.tag){case 26:Ns(e,t,a),e.flags&ui&&e.memoizedState!==null&&Fh(a,hl,e.memoizedState,e.memoizedProps);break;case 5:Ns(e,t,a);break;case 3:case 4:var l=hl;hl=Nr(e.stateNode.containerInfo),Ns(e,t,a),hl=l;break;case 22:e.memoizedState===null&&(l=e.alternate,l!==null&&l.memoizedState!==null?(l=ui,ui=16777216,Ns(e,t,a),ui=l):Ns(e,t,a));break;default:Ns(e,t,a)}}function vf(e){var t=e.alternate;if(t!==null&&(e=t.child,e!==null)){t.child=null;do t=e.sibling,e.sibling=null,e=t;while(e!==null)}}function di(e){var t=e.deletions;if((e.flags&16)!==0){if(t!==null)for(var a=0;a<t.length;a++){var l=t[a];$t=l,jf(l,e)}vf(e)}if(e.subtreeFlags&10256)for(e=e.child;e!==null;)Sf(e),e=e.sibling}function Sf(e){switch(e.tag){case 0:case 11:case 15:di(e),e.flags&2048&&fn(9,e,e.return);break;case 3:di(e);break;case 12:di(e);break;case 22:var t=e.stateNode;e.memoizedState!==null&&t._visibility&2&&(e.return===null||e.return.tag!==13)?(t._visibility&=-3,fr(e)):di(e);break;default:di(e)}}function fr(e){var t=e.deletions;if((e.flags&16)!==0){if(t!==null)for(var a=0;a<t.length;a++){var l=t[a];$t=l,jf(l,e)}vf(e)}for(e=e.child;e!==null;){switch(t=e,t.tag){case 0:case 11:case 15:fn(8,t,t.return),fr(t);break;case 22:a=t.stateNode,a._visibility&2&&(a._visibility&=-3,fr(t));break;default:fr(t)}e=e.sibling}}function jf(e,t){for(;$t!==null;){var a=$t;switch(a.tag){case 0:case 11:case 15:fn(8,a,t);break;case 23:case 22:if(a.memoizedState!==null&&a.memoizedState.cachePool!==null){var l=a.memoizedState.cachePool.pool;l!=null&&l.refCount++}break;case 24:Fs(a.memoizedState.cache)}if(l=a.child,l!==null)l.return=a,$t=l;else e:for(a=e;$t!==null;){l=$t;var n=l.sibling,s=l.return;if(ff(l),l===a){$t=null;break e}if(n!==null){n.return=s,$t=n;break e}$t=s}}}var oh={getCacheForType:function(e){var t=ia(Ut),a=t.data.get(e);return a===void 0&&(a=e(),t.data.set(e,a)),a},cacheSignal:function(){return ia(Ut).controller.signal}},uh=typeof WeakMap=="function"?WeakMap:Map,Fe=0,nt=null,Ue=null,Ye=0,Ie=0,Ya=null,mn=!1,Ms=!1,no=!1,Xl=0,Nt=0,hn=0,$n=0,so=0,Qa=0,Ts=0,fi=null,za=null,io=!1,mr=0,Cf=0,hr=1/0,pr=null,pn=null,Kt=0,gn=null,Es=null,Zl=0,ro=0,co=null,wf=null,mi=0,oo=null;function qa(){return(Fe&2)!==0&&Ye!==0?Ye&-Ye:A.T!==null?go():K()}function Nf(){if(Qa===0)if((Ye&536870912)===0||qe){var e=El;El<<=1,(El&3932160)===0&&(El=262144),Qa=e}else Qa=536870912;return e=Ba.current,e!==null&&(e.flags|=32),Qa}function _a(e,t,a){(e===nt&&(Ie===2||Ie===9)||e.cancelPendingCommit!==null)&&(As(e,0),xn(e,Ye,Qa,!1)),zl(e,a),((Fe&2)===0||e!==nt)&&(e===nt&&((Fe&2)===0&&($n|=a),Nt===4&&xn(e,Ye,Qa,!1)),Nl(e))}function Mf(e,t,a){if((Fe&6)!==0)throw Error(o(327));var l=!a&&(t&127)===0&&(t&e.expiredLanes)===0||bl(e,t),n=l?mh(e,t):fo(e,t,!0),s=l;do{if(n===0){Ms&&!l&&xn(e,t,0,!1);break}else{if(a=e.current.alternate,s&&!dh(a)){n=fo(e,t,!1),s=!1;continue}if(n===2){if(s=t,e.errorRecoveryDisabledLanes&s)var r=0;else r=e.pendingLanes&-536870913,r=r!==0?r:r&536870912?536870912:0;if(r!==0){t=r;e:{var d=e;n=fi;var g=d.current.memoizedState.isDehydrated;if(g&&(As(d,r).flags|=256),r=fo(d,r,!1),r!==2){if(no&&!g){d.errorRecoveryDisabledLanes|=s,$n|=s,n=4;break e}s=za,za=n,s!==null&&(za===null?za=s:za.push.apply(za,s))}n=r}if(s=!1,n!==2)continue}}if(n===1){As(e,0),xn(e,t,0,!0);break}e:{switch(l=e,s=n,s){case 0:case 1:throw Error(o(345));case 4:if((t&4194048)!==t)break;case 6:xn(l,t,Qa,!mn);break e;case 2:za=null;break;case 3:case 5:break;default:throw Error(o(329))}if((t&62914560)===t&&(n=mr+300-Tt(),10<n)){if(xn(l,t,Qa,!mn),yl(l,0,!0)!==0)break e;Zl=t,l.timeoutHandle=lm(Tf.bind(null,l,a,za,pr,io,t,Qa,$n,Ts,mn,s,"Throttled",-0,0),n);break e}Tf(l,a,za,pr,io,t,Qa,$n,Ts,mn,s,null,-0,0)}}break}while(!0);Nl(e)}function Tf(e,t,a,l,n,s,r,d,g,w,z,L,M,E){if(e.timeoutHandle=-1,L=t.subtreeFlags,L&8192||(L&16785408)===16785408){L={stylesheets:null,count:0,imgCount:0,imgBytes:0,suspenseyImages:[],waitingForImages:!0,waitingForViewTransition:!1,unsuspend:Na},bf(t,s,L);var re=(s&62914560)===s?mr-Tt():(s&4194048)===s?Cf-Tt():0;if(re=Jh(L,re),re!==null){Zl=s,e.cancelPendingCommit=re(Lf.bind(null,e,t,s,a,l,n,r,d,g,z,L,null,M,E)),xn(e,s,r,!w);return}}Lf(e,t,s,a,l,n,r,d,g)}function dh(e){for(var t=e;;){var a=t.tag;if((a===0||a===11||a===15)&&t.flags&16384&&(a=t.updateQueue,a!==null&&(a=a.stores,a!==null)))for(var l=0;l<a.length;l++){var n=a[l],s=n.getSnapshot;n=n.value;try{if(!Ha(s(),n))return!1}catch{return!1}}if(a=t.child,t.subtreeFlags&16384&&a!==null)a.return=t,t=a;else{if(t===e)break;for(;t.sibling===null;){if(t.return===null||t.return===e)return!0;t=t.return}t.sibling.return=t.return,t=t.sibling}}return!0}function xn(e,t,a,l){t&=~so,t&=~$n,e.suspendedLanes|=t,e.pingedLanes&=~t,l&&(e.warmLanes|=t),l=e.expirationTimes;for(var n=t;0<n;){var s=31-Vt(n),r=1<<s;l[s]=-1,n&=~r}a!==0&&q(e,a,t)}function gr(){return(Fe&6)===0?(hi(0),!1):!0}function uo(){if(Ue!==null){if(Ie===0)var e=Ue.return;else e=Ue,Ll=qn=null,Mc(e),bs=null,Ws=0,e=Ue;for(;e!==null;)lf(e.alternate,e),e=e.return;Ue=null}}function As(e,t){var a=e.timeoutHandle;a!==-1&&(e.timeoutHandle=-1,_h(a)),a=e.cancelPendingCommit,a!==null&&(e.cancelPendingCommit=null,a()),Zl=0,uo(),nt=e,Ue=a=Rl(e.current,null),Ye=t,Ie=0,Ya=null,mn=!1,Ms=bl(e,t),no=!1,Ts=Qa=so=$n=hn=Nt=0,za=fi=null,io=!1,(t&8)!==0&&(t|=t&32);var l=e.entangledLanes;if(l!==0)for(e=e.entanglements,l&=t;0<l;){var n=31-Vt(l),s=1<<n;t|=e[n],l&=~s}return Xl=t,Hi(),a}function Ef(e,t){Ae=null,A.H=ni,t===ys||t===Xi?(t=qu(),Ie=3):t===hc?(t=qu(),Ie=4):Ie=t===Qc?8:t!==null&&typeof t=="object"&&typeof t.then=="function"?6:1,Ya=t,Ue===null&&(Nt=1,sr(e,Wa(t,e.current)))}function Af(){var e=Ba.current;return e===null?!0:(Ye&4194048)===Ye?el===null:(Ye&62914560)===Ye||(Ye&536870912)!==0?e===el:!1}function zf(){var e=A.H;return A.H=ni,e===null?ni:e}function _f(){var e=A.A;return A.A=oh,e}function xr(){Nt=4,mn||(Ye&4194048)!==Ye&&Ba.current!==null||(Ms=!0),(hn&134217727)===0&&($n&134217727)===0||nt===null||xn(nt,Ye,Qa,!1)}function fo(e,t,a){var l=Fe;Fe|=2;var n=zf(),s=_f();(nt!==e||Ye!==t)&&(pr=null,As(e,t)),t=!1;var r=Nt;e:do try{if(Ie!==0&&Ue!==null){var d=Ue,g=Ya;switch(Ie){case 8:uo(),r=6;break e;case 3:case 2:case 9:case 6:Ba.current===null&&(t=!0);var w=Ie;if(Ie=0,Ya=null,zs(e,d,g,w),a&&Ms){r=0;break e}break;default:w=Ie,Ie=0,Ya=null,zs(e,d,g,w)}}fh(),r=Nt;break}catch(z){Ef(e,z)}while(!0);return t&&e.shellSuspendCounter++,Ll=qn=null,Fe=l,A.H=n,A.A=s,Ue===null&&(nt=null,Ye=0,Hi()),r}function fh(){for(;Ue!==null;)Df(Ue)}function mh(e,t){var a=Fe;Fe|=2;var l=zf(),n=_f();nt!==e||Ye!==t?(pr=null,hr=Tt()+500,As(e,t)):Ms=bl(e,t);e:do try{if(Ie!==0&&Ue!==null){t=Ue;var s=Ya;t:switch(Ie){case 1:Ie=0,Ya=null,zs(e,t,s,1);break;case 2:case 9:if(Yu(s)){Ie=0,Ya=null,Rf(t);break}t=function(){Ie!==2&&Ie!==9||nt!==e||(Ie=7),Nl(e)},s.then(t,t);break e;case 3:Ie=7;break e;case 4:Ie=5;break e;case 7:Yu(s)?(Ie=0,Ya=null,Rf(t)):(Ie=0,Ya=null,zs(e,t,s,7));break;case 5:var r=null;switch(Ue.tag){case 26:r=Ue.memoizedState;case 5:case 27:var d=Ue;if(r?ym(r):d.stateNode.complete){Ie=0,Ya=null;var g=d.sibling;if(g!==null)Ue=g;else{var w=d.return;w!==null?(Ue=w,yr(w)):Ue=null}break t}}Ie=0,Ya=null,zs(e,t,s,5);break;case 6:Ie=0,Ya=null,zs(e,t,s,6);break;case 8:uo(),Nt=6;break e;default:throw Error(o(462))}}hh();break}catch(z){Ef(e,z)}while(!0);return Ll=qn=null,A.H=l,A.A=n,Fe=a,Ue!==null?0:(nt=null,Ye=0,Hi(),Nt)}function hh(){for(;Ue!==null&&!xl();)Df(Ue)}function Df(e){var t=tf(e.alternate,e,Xl);e.memoizedProps=e.pendingProps,t===null?yr(e):Ue=t}function Rf(e){var t=e,a=t.alternate;switch(t.tag){case 15:case 0:t=Jd(a,t,t.pendingProps,t.type,void 0,Ye);break;case 11:t=Jd(a,t,t.pendingProps,t.type.render,t.ref,Ye);break;case 5:Mc(t);default:lf(a,t),t=Ue=zu(t,Xl),t=tf(a,t,Xl)}e.memoizedProps=e.pendingProps,t===null?yr(e):Ue=t}function zs(e,t,a,l){Ll=qn=null,Mc(t),bs=null,Ws=0;var n=t.return;try{if(ah(e,n,t,a,Ye)){Nt=1,sr(e,Wa(a,e.current)),Ue=null;return}}catch(s){if(n!==null)throw Ue=n,s;Nt=1,sr(e,Wa(a,e.current)),Ue=null;return}t.flags&32768?(qe||l===1?e=!0:Ms||(Ye&536870912)!==0?e=!1:(mn=e=!0,(l===2||l===9||l===3||l===6)&&(l=Ba.current,l!==null&&l.tag===13&&(l.flags|=16384))),Of(t,e)):yr(t)}function yr(e){var t=e;do{if((t.flags&32768)!==0){Of(t,mn);return}e=t.return;var a=sh(t.alternate,t,Xl);if(a!==null){Ue=a;return}if(t=t.sibling,t!==null){Ue=t;return}Ue=t=e}while(t!==null);Nt===0&&(Nt=5)}function Of(e,t){do{var a=ih(e.alternate,e);if(a!==null){a.flags&=32767,Ue=a;return}if(a=e.return,a!==null&&(a.flags|=32768,a.subtreeFlags=0,a.deletions=null),!t&&(e=e.sibling,e!==null)){Ue=e;return}Ue=e=a}while(e!==null);Nt=6,Ue=null}function Lf(e,t,a,l,n,s,r,d,g){e.cancelPendingCommit=null;do br();while(Kt!==0);if((Fe&6)!==0)throw Error(o(327));if(t!==null){if(t===e.current)throw Error(o(177));if(s=t.lanes|t.childLanes,s|=Pr,k(e,a,s,r,d,g),e===nt&&(Ue=nt=null,Ye=0),Es=t,gn=e,Zl=a,ro=s,co=n,wf=l,(t.subtreeFlags&10256)!==0||(t.flags&10256)!==0?(e.callbackNode=null,e.callbackPriority=0,yh(ua,function(){return Gf(),null})):(e.callbackNode=null,e.callbackPriority=0),l=(t.flags&13878)!==0,(t.subtreeFlags&13878)!==0||l){l=A.T,A.T=null,n=B.p,B.p=2,r=Fe,Fe|=4;try{rh(e,t,a)}finally{Fe=r,B.p=n,A.T=l}}Kt=1,kf(),Hf(),Uf()}}function kf(){if(Kt===1){Kt=0;var e=gn,t=Es,a=(t.flags&13878)!==0;if((t.subtreeFlags&13878)!==0||a){a=A.T,A.T=null;var l=B.p;B.p=2;var n=Fe;Fe|=4;try{gf(t,e);var s=wo,r=Su(e.containerInfo),d=s.focusedElem,g=s.selectionRange;if(r!==d&&d&&d.ownerDocument&&vu(d.ownerDocument.documentElement,d)){if(g!==null&&Fr(d)){var w=g.start,z=g.end;if(z===void 0&&(z=w),"selectionStart"in d)d.selectionStart=w,d.selectionEnd=Math.min(z,d.value.length);else{var L=d.ownerDocument||document,M=L&&L.defaultView||window;if(M.getSelection){var E=M.getSelection(),re=d.textContent.length,be=Math.min(g.start,re),at=g.end===void 0?be:Math.min(g.end,re);!E.extend&&be>at&&(r=at,at=be,be=r);var j=bu(d,be),b=bu(d,at);if(j&&b&&(E.rangeCount!==1||E.anchorNode!==j.node||E.anchorOffset!==j.offset||E.focusNode!==b.node||E.focusOffset!==b.offset)){var C=L.createRange();C.setStart(j.node,j.offset),E.removeAllRanges(),be>at?(E.addRange(C),E.extend(b.node,b.offset)):(C.setEnd(b.node,b.offset),E.addRange(C))}}}}for(L=[],E=d;E=E.parentNode;)E.nodeType===1&&L.push({element:E,left:E.scrollLeft,top:E.scrollTop});for(typeof d.focus=="function"&&d.focus(),d=0;d<L.length;d++){var R=L[d];R.element.scrollLeft=R.left,R.element.scrollTop=R.top}}_r=!!Co,wo=Co=null}finally{Fe=n,B.p=l,A.T=a}}e.current=t,Kt=2}}function Hf(){if(Kt===2){Kt=0;var e=gn,t=Es,a=(t.flags&8772)!==0;if((t.subtreeFlags&8772)!==0||a){a=A.T,A.T=null;var l=B.p;B.p=2;var n=Fe;Fe|=4;try{df(e,t.alternate,t)}finally{Fe=n,B.p=l,A.T=a}}Kt=3}}function Uf(){if(Kt===4||Kt===3){Kt=0,Ml();var e=gn,t=Es,a=Zl,l=wf;(t.subtreeFlags&10256)!==0||(t.flags&10256)!==0?Kt=5:(Kt=0,Es=gn=null,Bf(e,e.pendingLanes));var n=e.pendingLanes;if(n===0&&(pn=null),J(a),t=t.stateNode,lt&&typeof lt.onCommitFiberRoot=="function")try{lt.onCommitFiberRoot(xa,t,void 0,(t.current.flags&128)===128)}catch{}if(l!==null){t=A.T,n=B.p,B.p=2,A.T=null;try{for(var s=e.onRecoverableError,r=0;r<l.length;r++){var d=l[r];s(d.value,{componentStack:d.stack})}}finally{A.T=t,B.p=n}}(Zl&3)!==0&&br(),Nl(e),n=e.pendingLanes,(a&261930)!==0&&(n&42)!==0?e===oo?mi++:(mi=0,oo=e):mi=0,hi(0)}}function Bf(e,t){(e.pooledCacheLanes&=t)===0&&(t=e.pooledCache,t!=null&&(e.pooledCache=null,Fs(t)))}function br(){return kf(),Hf(),Uf(),Gf()}function Gf(){if(Kt!==5)return!1;var e=gn,t=ro;ro=0;var a=J(Zl),l=A.T,n=B.p;try{B.p=32>a?32:a,A.T=null,a=co,co=null;var s=gn,r=Zl;if(Kt=0,Es=gn=null,Zl=0,(Fe&6)!==0)throw Error(o(331));var d=Fe;if(Fe|=4,Sf(s.current),yf(s,s.current,r,a),Fe=d,hi(0,!1),lt&&typeof lt.onPostCommitFiberRoot=="function")try{lt.onPostCommitFiberRoot(xa,s)}catch{}return!0}finally{B.p=n,A.T=l,Bf(e,t)}}function Yf(e,t,a){t=Wa(a,t),t=Yc(e.stateNode,t,2),e=on(e,t,2),e!==null&&(zl(e,2),Nl(e))}function $e(e,t,a){if(e.tag===3)Yf(e,e,a);else for(;t!==null;){if(t.tag===3){Yf(t,e,a);break}else if(t.tag===1){var l=t.stateNode;if(typeof t.type.getDerivedStateFromError=="function"||typeof l.componentDidCatch=="function"&&(pn===null||!pn.has(l))){e=Wa(a,e),a=Yd(2),l=on(t,a,2),l!==null&&(Qd(a,l,t,e),zl(l,2),Nl(l));break}}t=t.return}}function mo(e,t,a){var l=e.pingCache;if(l===null){l=e.pingCache=new uh;var n=new Set;l.set(t,n)}else n=l.get(t),n===void 0&&(n=new Set,l.set(t,n));n.has(a)||(no=!0,n.add(a),e=ph.bind(null,e,t,a),t.then(e,e))}function ph(e,t,a){var l=e.pingCache;l!==null&&l.delete(t),e.pingedLanes|=e.suspendedLanes&a,e.warmLanes&=~a,nt===e&&(Ye&a)===a&&(Nt===4||Nt===3&&(Ye&62914560)===Ye&&300>Tt()-mr?(Fe&2)===0&&As(e,0):so|=a,Ts===Ye&&(Ts=0)),Nl(e)}function Qf(e,t){t===0&&(t=il()),e=Gn(e,t),e!==null&&(zl(e,t),Nl(e))}function gh(e){var t=e.memoizedState,a=0;t!==null&&(a=t.retryLane),Qf(e,a)}function xh(e,t){var a=0;switch(e.tag){case 31:case 13:var l=e.stateNode,n=e.memoizedState;n!==null&&(a=n.retryLane);break;case 19:l=e.stateNode;break;case 22:l=e.stateNode._retryCache;break;default:throw Error(o(314))}l!==null&&l.delete(t),Qf(e,a)}function yh(e,t){return sl(e,t)}var vr=null,_s=null,ho=!1,Sr=!1,po=!1,yn=0;function Nl(e){e!==_s&&e.next===null&&(_s===null?vr=_s=e:_s=_s.next=e),Sr=!0,ho||(ho=!0,vh())}function hi(e,t){if(!po&&Sr){po=!0;do for(var a=!1,l=vr;l!==null;){if(e!==0){var n=l.pendingLanes;if(n===0)var s=0;else{var r=l.suspendedLanes,d=l.pingedLanes;s=(1<<31-Vt(42|e)+1)-1,s&=n&~(r&~d),s=s&201326741?s&201326741|1:s?s|2:0}s!==0&&(a=!0,Zf(l,s))}else s=Ye,s=yl(l,l===nt?s:0,l.cancelPendingCommit!==null||l.timeoutHandle!==-1),(s&3)===0||bl(l,s)||(a=!0,Zf(l,s));l=l.next}while(a);po=!1}}function bh(){qf()}function qf(){Sr=ho=!1;var e=0;yn!==0&&zh()&&(e=yn);for(var t=Tt(),a=null,l=vr;l!==null;){var n=l.next,s=Vf(l,t);s===0?(l.next=null,a===null?vr=n:a.next=n,n===null&&(_s=a)):(a=l,(e!==0||(s&3)!==0)&&(Sr=!0)),l=n}Kt!==0&&Kt!==5||hi(e),yn!==0&&(yn=0)}function Vf(e,t){for(var a=e.suspendedLanes,l=e.pingedLanes,n=e.expirationTimes,s=e.pendingLanes&-62914561;0<s;){var r=31-Vt(s),d=1<<r,g=n[r];g===-1?((d&a)===0||(d&l)!==0)&&(n[r]=Al(d,t)):g<=t&&(e.expiredLanes|=d),s&=~d}if(t=nt,a=Ye,a=yl(e,e===t?a:0,e.cancelPendingCommit!==null||e.timeoutHandle!==-1),l=e.callbackNode,a===0||e===t&&(Ie===2||Ie===9)||e.cancelPendingCommit!==null)return l!==null&&l!==null&&gl(l),e.callbackNode=null,e.callbackPriority=0;if((a&3)===0||bl(e,a)){if(t=a&-a,t===e.callbackPriority)return t;switch(l!==null&&gl(l),J(a)){case 2:case 8:a=Da;break;case 32:a=ua;break;case 268435456:a=zn;break;default:a=ua}return l=Xf.bind(null,e),a=sl(a,l),e.callbackPriority=t,e.callbackNode=a,t}return l!==null&&l!==null&&gl(l),e.callbackPriority=2,e.callbackNode=null,2}function Xf(e,t){if(Kt!==0&&Kt!==5)return e.callbackNode=null,e.callbackPriority=0,null;var a=e.callbackNode;if(br()&&e.callbackNode!==a)return null;var l=Ye;return l=yl(e,e===nt?l:0,e.cancelPendingCommit!==null||e.timeoutHandle!==-1),l===0?null:(Mf(e,l,t),Vf(e,Tt()),e.callbackNode!=null&&e.callbackNode===a?Xf.bind(null,e):null)}function Zf(e,t){if(br())return null;Mf(e,t,!0)}function vh(){Dh(function(){(Fe&6)!==0?sl(En,bh):qf()})}function go(){if(yn===0){var e=gs;e===0&&(e=Tl,Tl<<=1,(Tl&261888)===0&&(Tl=256)),yn=e}return yn}function Kf(e){return e==null||typeof e=="symbol"||typeof e=="boolean"?null:typeof e=="function"?e:la(""+e)}function Ff(e,t){var a=t.ownerDocument.createElement("input");return a.name=t.name,a.value=t.value,e.id&&a.setAttribute("form",e.id),t.parentNode.insertBefore(a,t),e=new FormData(e),a.parentNode.removeChild(a),e}function Sh(e,t,a,l,n){if(t==="submit"&&a&&a.stateNode===n){var s=Kf((n[ne]||null).action),r=l.submitter;r&&(t=(t=r[ne]||null)?Kf(t.formAction):r.getAttribute("formAction"),t!==null&&(s=t,r=null));var d=new se("action","action",null,l,n);e.push({event:d,listeners:[{instance:null,listener:function(){if(l.defaultPrevented){if(yn!==0){var g=r?Ff(n,r):new FormData(n);Lc(a,{pending:!0,data:g,method:n.method,action:s},null,g)}}else typeof s=="function"&&(d.preventDefault(),g=r?Ff(n,r):new FormData(n),Lc(a,{pending:!0,data:g,method:n.method,action:s},s,g))},currentTarget:n}]})}}for(var xo=0;xo<$r.length;xo++){var yo=$r[xo],jh=yo.toLowerCase(),Ch=yo[0].toUpperCase()+yo.slice(1);ml(jh,"on"+Ch)}ml(wu,"onAnimationEnd"),ml(Nu,"onAnimationIteration"),ml(Mu,"onAnimationStart"),ml("dblclick","onDoubleClick"),ml("focusin","onFocus"),ml("focusout","onBlur"),ml(B0,"onTransitionRun"),ml(G0,"onTransitionStart"),ml(Y0,"onTransitionCancel"),ml(Tu,"onTransitionEnd"),wa("onMouseEnter",["mouseout","mouseover"]),wa("onMouseLeave",["mouseout","mouseover"]),wa("onPointerEnter",["pointerout","pointerover"]),wa("onPointerLeave",["pointerout","pointerover"]),Wt("onChange","change click focusin focusout input keydown keyup selectionchange".split(" ")),Wt("onSelect","focusout contextmenu dragend focusin keydown keyup mousedown mouseup selectionchange".split(" ")),Wt("onBeforeInput",["compositionend","keypress","textInput","paste"]),Wt("onCompositionEnd","compositionend focusout keydown keypress keyup mousedown".split(" ")),Wt("onCompositionStart","compositionstart focusout keydown keypress keyup mousedown".split(" ")),Wt("onCompositionUpdate","compositionupdate focusout keydown keypress keyup mousedown".split(" "));var pi="abort canplay canplaythrough durationchange emptied encrypted ended error loadeddata loadedmetadata loadstart pause play playing progress ratechange resize seeked seeking stalled suspend timeupdate volumechange waiting".split(" "),wh=new Set("beforetoggle cancel close invalid load scroll scrollend toggle".split(" ").concat(pi));function Jf(e,t){t=(t&4)!==0;for(var a=0;a<e.length;a++){var l=e[a],n=l.event;l=l.listeners;e:{var s=void 0;if(t)for(var r=l.length-1;0<=r;r--){var d=l[r],g=d.instance,w=d.currentTarget;if(d=d.listener,g!==s&&n.isPropagationStopped())break e;s=d,n.currentTarget=w;try{s(n)}catch(z){ki(z)}n.currentTarget=null,s=g}else for(r=0;r<l.length;r++){if(d=l[r],g=d.instance,w=d.currentTarget,d=d.listener,g!==s&&n.isPropagationStopped())break e;s=d,n.currentTarget=w;try{s(n)}catch(z){ki(z)}n.currentTarget=null,s=g}}}}function Be(e,t){var a=t[bt];a===void 0&&(a=t[bt]=new Set);var l=e+"__bubble";a.has(l)||(Wf(t,e,2,!1),a.add(l))}function bo(e,t,a){var l=0;t&&(l|=4),Wf(a,e,l,t)}var jr="_reactListening"+Math.random().toString(36).slice(2);function vo(e){if(!e[jr]){e[jr]=!0,vl.forEach(function(a){a!=="selectionchange"&&(wh.has(a)||bo(a,!1,e),bo(a,!0,e))});var t=e.nodeType===9?e:e.ownerDocument;t===null||t[jr]||(t[jr]=!0,bo("selectionchange",!1,t))}}function Wf(e,t,a,l){switch(Nm(t)){case 2:var n=$h;break;case 8:n=Ph;break;default:n=Lo}a=n.bind(null,t,a,e),n=void 0,!ns||t!=="touchstart"&&t!=="touchmove"&&t!=="wheel"||(n=!0),l?n!==void 0?e.addEventListener(t,a,{capture:!0,passive:n}):e.addEventListener(t,a,!0):n!==void 0?e.addEventListener(t,a,{passive:n}):e.addEventListener(t,a,!1)}function So(e,t,a,l,n){var s=l;if((t&1)===0&&(t&2)===0&&l!==null)e:for(;;){if(l===null)return;var r=l.tag;if(r===3||r===4){var d=l.stateNode.containerInfo;if(d===n)break;if(r===4)for(r=l.return;r!==null;){var g=r.tag;if((g===3||g===4)&&r.stateNode.containerInfo===n)return;r=r.return}for(;d!==null;){if(r=ea(d),r===null)return;if(g=r.tag,g===5||g===6||g===26||g===27){l=s=r;continue e}d=d.parentNode}}l=l.return}On(function(){var w=s,z=Ma(a),L=[];e:{var M=Eu.get(e);if(M!==void 0){var E=se,re=e;switch(e){case"keypress":if(_l(a)===0)break e;case"keydown":case"keyup":E=x0;break;case"focusin":re="focus",E=Dl;break;case"focusout":re="blur",E=Dl;break;case"beforeblur":case"afterblur":E=Dl;break;case"click":if(a.button===2)break e;case"auxclick":case"dblclick":case"mousedown":case"mousemove":case"mouseup":case"mouseout":case"mouseover":case"contextmenu":E=Ct;break;case"drag":case"dragend":case"dragenter":case"dragexit":case"dragleave":case"dragover":case"dragstart":case"drop":E=na;break;case"touchcancel":case"touchend":case"touchmove":case"touchstart":E=v0;break;case wu:case Nu:case Mu:E=qr;break;case Tu:E=j0;break;case"scroll":case"scrollend":E=xt;break;case"wheel":E=w0;break;case"copy":case"cut":case"paste":E=u0;break;case"gotpointercapture":case"lostpointercapture":case"pointercancel":case"pointerdown":case"pointermove":case"pointerout":case"pointerover":case"pointerup":E=su;break;case"toggle":case"beforetoggle":E=M0}var be=(t&4)!==0,at=!be&&(e==="scroll"||e==="scrollend"),j=be?M!==null?M+"Capture":null:M;be=[];for(var b=w,C;b!==null;){var R=b;if(C=R.stateNode,R=R.tag,R!==5&&R!==26&&R!==27||C===null||j===null||(R=Ln(b,j),R!=null&&be.push(gi(b,R,C))),at)break;b=b.return}0<be.length&&(M=new E(M,re,null,a,z),L.push({event:M,listeners:be}))}}if((t&7)===0){e:{if(M=e==="mouseover"||e==="pointerover",E=e==="mouseout"||e==="pointerout",M&&a!==ka&&(re=a.relatedTarget||a.fromElement)&&(ea(re)||re[Ge]))break e;if((E||M)&&(M=z.window===z?z:(M=z.ownerDocument)?M.defaultView||M.parentWindow:window,E?(re=a.relatedTarget||a.toElement,E=w,re=re?ea(re):null,re!==null&&(at=h(re),be=re.tag,re!==at||be!==5&&be!==27&&be!==6)&&(re=null)):(E=null,re=w),E!==re)){if(be=Ct,R="onMouseLeave",j="onMouseEnter",b="mouse",(e==="pointerout"||e==="pointerover")&&(be=su,R="onPointerLeave",j="onPointerEnter",b="pointer"),at=E==null?M:pt(E),C=re==null?M:pt(re),M=new be(R,b+"leave",E,a,z),M.target=at,M.relatedTarget=C,R=null,ea(z)===w&&(be=new be(j,b+"enter",re,a,z),be.target=C,be.relatedTarget=at,R=be),at=R,E&&re)t:{for(be=Nh,j=E,b=re,C=0,R=j;R;R=be(R))C++;R=0;for(var ge=b;ge;ge=be(ge))R++;for(;0<C-R;)j=be(j),C--;for(;0<R-C;)b=be(b),R--;for(;C--;){if(j===b||b!==null&&j===b.alternate){be=j;break t}j=be(j),b=be(b)}be=null}else be=null;E!==null&&If(L,M,E,be,!1),re!==null&&at!==null&&If(L,at,re,be,!0)}}e:{if(M=w?pt(w):window,E=M.nodeName&&M.nodeName.toLowerCase(),E==="select"||E==="input"&&M.type==="file")var Ze=mu;else if(du(M))if(hu)Ze=k0;else{Ze=O0;var ue=R0}else E=M.nodeName,!E||E.toLowerCase()!=="input"||M.type!=="checkbox"&&M.type!=="radio"?w&&ta(w.elementType)&&(Ze=mu):Ze=L0;if(Ze&&(Ze=Ze(e,w))){fu(L,Ze,a,z);break e}ue&&ue(e,M,w),e==="focusout"&&w&&M.type==="number"&&w.memoizedProps.value!=null&&Zt(M,"number",M.value)}switch(ue=w?pt(w):window,e){case"focusin":(du(ue)||ue.contentEditable==="true")&&(cs=ue,Jr=w,Xs=null);break;case"focusout":Xs=Jr=cs=null;break;case"mousedown":Wr=!0;break;case"contextmenu":case"mouseup":case"dragend":Wr=!1,ju(L,a,z);break;case"selectionchange":if(U0)break;case"keydown":case"keyup":ju(L,a,z)}var _e;if(Xr)e:{switch(e){case"compositionstart":var Qe="onCompositionStart";break e;case"compositionend":Qe="onCompositionEnd";break e;case"compositionupdate":Qe="onCompositionUpdate";break e}Qe=void 0}else rs?ou(e,a)&&(Qe="onCompositionEnd"):e==="keydown"&&a.keyCode===229&&(Qe="onCompositionStart");Qe&&(iu&&a.locale!=="ko"&&(rs||Qe!=="onCompositionStart"?Qe==="onCompositionEnd"&&rs&&(_e=Di()):(dl=z,kn="value"in dl?dl.value:dl.textContent,rs=!0)),ue=Cr(w,Qe),0<ue.length&&(Qe=new nu(Qe,e,null,a,z),L.push({event:Qe,listeners:ue}),_e?Qe.data=_e:(_e=uu(a),_e!==null&&(Qe.data=_e)))),(_e=E0?A0(e,a):z0(e,a))&&(Qe=Cr(w,"onBeforeInput"),0<Qe.length&&(ue=new nu("onBeforeInput","beforeinput",null,a,z),L.push({event:ue,listeners:Qe}),ue.data=_e)),Sh(L,e,w,a,z)}Jf(L,t)})}function gi(e,t,a){return{instance:e,listener:t,currentTarget:a}}function Cr(e,t){for(var a=t+"Capture",l=[];e!==null;){var n=e,s=n.stateNode;if(n=n.tag,n!==5&&n!==26&&n!==27||s===null||(n=Ln(e,a),n!=null&&l.unshift(gi(e,n,s)),n=Ln(e,t),n!=null&&l.push(gi(e,n,s))),e.tag===3)return l;e=e.return}return[]}function Nh(e){if(e===null)return null;do e=e.return;while(e&&e.tag!==5&&e.tag!==27);return e||null}function If(e,t,a,l,n){for(var s=t._reactName,r=[];a!==null&&a!==l;){var d=a,g=d.alternate,w=d.stateNode;if(d=d.tag,g!==null&&g===l)break;d!==5&&d!==26&&d!==27||w===null||(g=w,n?(w=Ln(a,s),w!=null&&r.unshift(gi(a,w,g))):n||(w=Ln(a,s),w!=null&&r.push(gi(a,w,g)))),a=a.return}r.length!==0&&e.push({event:t,listeners:r})}var Mh=/\r\n?/g,Th=/\u0000|\uFFFD/g;function $f(e){return(typeof e=="string"?e:""+e).replace(Mh,`
`).replace(Th,"")}function Pf(e,t){return t=$f(t),$f(e)===t}function tt(e,t,a,l,n,s){switch(a){case"children":typeof l=="string"?t==="body"||t==="textarea"&&l===""||Et(e,l):(typeof l=="number"||typeof l=="bigint")&&t!=="body"&&Et(e,""+l);break;case"className":Oa(e,"class",l);break;case"tabIndex":Oa(e,"tabindex",l);break;case"dir":case"role":case"viewBox":case"width":case"height":Oa(e,a,l);break;case"style":ls(e,l,s);break;case"data":if(t!=="object"){Oa(e,"data",l);break}case"src":case"href":if(l===""&&(t!=="a"||a!=="href")){e.removeAttribute(a);break}if(l==null||typeof l=="function"||typeof l=="symbol"||typeof l=="boolean"){e.removeAttribute(a);break}l=la(""+l),e.setAttribute(a,l);break;case"action":case"formAction":if(typeof l=="function"){e.setAttribute(a,"javascript:throw new Error('A React form was unexpectedly submitted. If you called form.submit() manually, consider using form.requestSubmit() instead. If you\\'re trying to use event.stopPropagation() in a submit event handler, consider also calling event.preventDefault().')");break}else typeof s=="function"&&(a==="formAction"?(t!=="input"&&tt(e,t,"name",n.name,n,null),tt(e,t,"formEncType",n.formEncType,n,null),tt(e,t,"formMethod",n.formMethod,n,null),tt(e,t,"formTarget",n.formTarget,n,null)):(tt(e,t,"encType",n.encType,n,null),tt(e,t,"method",n.method,n,null),tt(e,t,"target",n.target,n,null)));if(l==null||typeof l=="symbol"||typeof l=="boolean"){e.removeAttribute(a);break}l=la(""+l),e.setAttribute(a,l);break;case"onClick":l!=null&&(e.onclick=Na);break;case"onScroll":l!=null&&Be("scroll",e);break;case"onScrollEnd":l!=null&&Be("scrollend",e);break;case"dangerouslySetInnerHTML":if(l!=null){if(typeof l!="object"||!("__html"in l))throw Error(o(61));if(a=l.__html,a!=null){if(n.children!=null)throw Error(o(60));e.innerHTML=a}}break;case"multiple":e.multiple=l&&typeof l!="function"&&typeof l!="symbol";break;case"muted":e.muted=l&&typeof l!="function"&&typeof l!="symbol";break;case"suppressContentEditableWarning":case"suppressHydrationWarning":case"defaultValue":case"defaultChecked":case"innerHTML":case"ref":break;case"autoFocus":break;case"xlinkHref":if(l==null||typeof l=="function"||typeof l=="boolean"||typeof l=="symbol"){e.removeAttribute("xlink:href");break}a=la(""+l),e.setAttributeNS("http://www.w3.org/1999/xlink","xlink:href",a);break;case"contentEditable":case"spellCheck":case"draggable":case"value":case"autoReverse":case"externalResourcesRequired":case"focusable":case"preserveAlpha":l!=null&&typeof l!="function"&&typeof l!="symbol"?e.setAttribute(a,""+l):e.removeAttribute(a);break;case"inert":case"allowFullScreen":case"async":case"autoPlay":case"controls":case"default":case"defer":case"disabled":case"disablePictureInPicture":case"disableRemotePlayback":case"formNoValidate":case"hidden":case"loop":case"noModule":case"noValidate":case"open":case"playsInline":case"readOnly":case"required":case"reversed":case"scoped":case"seamless":case"itemScope":l&&typeof l!="function"&&typeof l!="symbol"?e.setAttribute(a,""):e.removeAttribute(a);break;case"capture":case"download":l===!0?e.setAttribute(a,""):l!==!1&&l!=null&&typeof l!="function"&&typeof l!="symbol"?e.setAttribute(a,l):e.removeAttribute(a);break;case"cols":case"rows":case"size":case"span":l!=null&&typeof l!="function"&&typeof l!="symbol"&&!isNaN(l)&&1<=l?e.setAttribute(a,l):e.removeAttribute(a);break;case"rowSpan":case"start":l==null||typeof l=="function"||typeof l=="symbol"||isNaN(l)?e.removeAttribute(a):e.setAttribute(a,l);break;case"popover":Be("beforetoggle",e),Be("toggle",e),Ot(e,"popover",l);break;case"xlinkActuate":fa(e,"http://www.w3.org/1999/xlink","xlink:actuate",l);break;case"xlinkArcrole":fa(e,"http://www.w3.org/1999/xlink","xlink:arcrole",l);break;case"xlinkRole":fa(e,"http://www.w3.org/1999/xlink","xlink:role",l);break;case"xlinkShow":fa(e,"http://www.w3.org/1999/xlink","xlink:show",l);break;case"xlinkTitle":fa(e,"http://www.w3.org/1999/xlink","xlink:title",l);break;case"xlinkType":fa(e,"http://www.w3.org/1999/xlink","xlink:type",l);break;case"xmlBase":fa(e,"http://www.w3.org/XML/1998/namespace","xml:base",l);break;case"xmlLang":fa(e,"http://www.w3.org/XML/1998/namespace","xml:lang",l);break;case"xmlSpace":fa(e,"http://www.w3.org/XML/1998/namespace","xml:space",l);break;case"is":Ot(e,"is",l);break;case"innerText":case"textContent":break;default:(!(2<a.length)||a[0]!=="o"&&a[0]!=="O"||a[1]!=="n"&&a[1]!=="N")&&(a=aa.get(a)||a,Ot(e,a,l))}}function jo(e,t,a,l,n,s){switch(a){case"style":ls(e,l,s);break;case"dangerouslySetInnerHTML":if(l!=null){if(typeof l!="object"||!("__html"in l))throw Error(o(61));if(a=l.__html,a!=null){if(n.children!=null)throw Error(o(60));e.innerHTML=a}}break;case"children":typeof l=="string"?Et(e,l):(typeof l=="number"||typeof l=="bigint")&&Et(e,""+l);break;case"onScroll":l!=null&&Be("scroll",e);break;case"onScrollEnd":l!=null&&Be("scrollend",e);break;case"onClick":l!=null&&(e.onclick=Na);break;case"suppressContentEditableWarning":case"suppressHydrationWarning":case"innerHTML":case"ref":break;case"innerText":case"textContent":break;default:if(!Xt.hasOwnProperty(a))e:{if(a[0]==="o"&&a[1]==="n"&&(n=a.endsWith("Capture"),t=a.slice(2,n?a.length-7:void 0),s=e[ne]||null,s=s!=null?s[a]:null,typeof s=="function"&&e.removeEventListener(t,s,n),typeof l=="function")){typeof s!="function"&&s!==null&&(a in e?e[a]=null:e.hasAttribute(a)&&e.removeAttribute(a)),e.addEventListener(t,l,n);break e}a in e?e[a]=l:l===!0?e.setAttribute(a,""):Ot(e,a,l)}}}function ca(e,t,a){switch(t){case"div":case"span":case"svg":case"path":case"a":case"g":case"p":case"li":break;case"img":Be("error",e),Be("load",e);var l=!1,n=!1,s;for(s in a)if(a.hasOwnProperty(s)){var r=a[s];if(r!=null)switch(s){case"src":l=!0;break;case"srcSet":n=!0;break;case"children":case"dangerouslySetInnerHTML":throw Error(o(137,t));default:tt(e,t,s,r,a,null)}}n&&tt(e,t,"srcSet",a.srcSet,a,null),l&&tt(e,t,"src",a.src,a,null);return;case"input":Be("invalid",e);var d=s=r=n=null,g=null,w=null;for(l in a)if(a.hasOwnProperty(l)){var z=a[l];if(z!=null)switch(l){case"name":n=z;break;case"type":r=z;break;case"checked":g=z;break;case"defaultChecked":w=z;break;case"value":s=z;break;case"defaultValue":d=z;break;case"children":case"dangerouslySetInnerHTML":if(z!=null)throw Error(o(137,t));break;default:tt(e,t,l,z,a,null)}}Ht(e,s,d,g,w,r,n,!1);return;case"select":Be("invalid",e),l=r=s=null;for(n in a)if(a.hasOwnProperty(n)&&(d=a[n],d!=null))switch(n){case"value":s=d;break;case"defaultValue":r=d;break;case"multiple":l=d;default:tt(e,t,n,d,a,null)}t=s,a=r,e.multiple=!!l,t!=null?St(e,!!l,t,!1):a!=null&&St(e,!!l,a,!0);return;case"textarea":Be("invalid",e),s=n=l=null;for(r in a)if(a.hasOwnProperty(r)&&(d=a[r],d!=null))switch(r){case"value":l=d;break;case"defaultValue":n=d;break;case"children":s=d;break;case"dangerouslySetInnerHTML":if(d!=null)throw Error(o(91));break;default:tt(e,t,r,d,a,null)}gt(e,l,n,s);return;case"option":for(g in a)if(a.hasOwnProperty(g)&&(l=a[g],l!=null))switch(g){case"selected":e.selected=l&&typeof l!="function"&&typeof l!="symbol";break;default:tt(e,t,g,l,a,null)}return;case"dialog":Be("beforetoggle",e),Be("toggle",e),Be("cancel",e),Be("close",e);break;case"iframe":case"object":Be("load",e);break;case"video":case"audio":for(l=0;l<pi.length;l++)Be(pi[l],e);break;case"image":Be("error",e),Be("load",e);break;case"details":Be("toggle",e);break;case"embed":case"source":case"link":Be("error",e),Be("load",e);case"area":case"base":case"br":case"col":case"hr":case"keygen":case"meta":case"param":case"track":case"wbr":case"menuitem":for(w in a)if(a.hasOwnProperty(w)&&(l=a[w],l!=null))switch(w){case"children":case"dangerouslySetInnerHTML":throw Error(o(137,t));default:tt(e,t,w,l,a,null)}return;default:if(ta(t)){for(z in a)a.hasOwnProperty(z)&&(l=a[z],l!==void 0&&jo(e,t,z,l,a,void 0));return}}for(d in a)a.hasOwnProperty(d)&&(l=a[d],l!=null&&tt(e,t,d,l,a,null))}function Eh(e,t,a,l){switch(t){case"div":case"span":case"svg":case"path":case"a":case"g":case"p":case"li":break;case"input":var n=null,s=null,r=null,d=null,g=null,w=null,z=null;for(E in a){var L=a[E];if(a.hasOwnProperty(E)&&L!=null)switch(E){case"checked":break;case"value":break;case"defaultValue":g=L;default:l.hasOwnProperty(E)||tt(e,t,E,null,l,L)}}for(var M in l){var E=l[M];if(L=a[M],l.hasOwnProperty(M)&&(E!=null||L!=null))switch(M){case"type":s=E;break;case"name":n=E;break;case"checked":w=E;break;case"defaultChecked":z=E;break;case"value":r=E;break;case"defaultValue":d=E;break;case"children":case"dangerouslySetInnerHTML":if(E!=null)throw Error(o(137,t));break;default:E!==L&&tt(e,t,M,E,l,L)}}kt(e,r,d,g,w,z,s,n);return;case"select":E=r=d=M=null;for(s in a)if(g=a[s],a.hasOwnProperty(s)&&g!=null)switch(s){case"value":break;case"multiple":E=g;default:l.hasOwnProperty(s)||tt(e,t,s,null,l,g)}for(n in l)if(s=l[n],g=a[n],l.hasOwnProperty(n)&&(s!=null||g!=null))switch(n){case"value":M=s;break;case"defaultValue":d=s;break;case"multiple":r=s;default:s!==g&&tt(e,t,n,s,l,g)}t=d,a=r,l=E,M!=null?St(e,!!a,M,!1):!!l!=!!a&&(t!=null?St(e,!!a,t,!0):St(e,!!a,a?[]:"",!1));return;case"textarea":E=M=null;for(d in a)if(n=a[d],a.hasOwnProperty(d)&&n!=null&&!l.hasOwnProperty(d))switch(d){case"value":break;case"children":break;default:tt(e,t,d,null,l,n)}for(r in l)if(n=l[r],s=a[r],l.hasOwnProperty(r)&&(n!=null||s!=null))switch(r){case"value":M=n;break;case"defaultValue":E=n;break;case"children":break;case"dangerouslySetInnerHTML":if(n!=null)throw Error(o(91));break;default:n!==s&&tt(e,t,r,n,l,s)}va(e,M,E);return;case"option":for(var re in a)if(M=a[re],a.hasOwnProperty(re)&&M!=null&&!l.hasOwnProperty(re))switch(re){case"selected":e.selected=!1;break;default:tt(e,t,re,null,l,M)}for(g in l)if(M=l[g],E=a[g],l.hasOwnProperty(g)&&M!==E&&(M!=null||E!=null))switch(g){case"selected":e.selected=M&&typeof M!="function"&&typeof M!="symbol";break;default:tt(e,t,g,M,l,E)}return;case"img":case"link":case"area":case"base":case"br":case"col":case"embed":case"hr":case"keygen":case"meta":case"param":case"source":case"track":case"wbr":case"menuitem":for(var be in a)M=a[be],a.hasOwnProperty(be)&&M!=null&&!l.hasOwnProperty(be)&&tt(e,t,be,null,l,M);for(w in l)if(M=l[w],E=a[w],l.hasOwnProperty(w)&&M!==E&&(M!=null||E!=null))switch(w){case"children":case"dangerouslySetInnerHTML":if(M!=null)throw Error(o(137,t));break;default:tt(e,t,w,M,l,E)}return;default:if(ta(t)){for(var at in a)M=a[at],a.hasOwnProperty(at)&&M!==void 0&&!l.hasOwnProperty(at)&&jo(e,t,at,void 0,l,M);for(z in l)M=l[z],E=a[z],!l.hasOwnProperty(z)||M===E||M===void 0&&E===void 0||jo(e,t,z,M,l,E);return}}for(var j in a)M=a[j],a.hasOwnProperty(j)&&M!=null&&!l.hasOwnProperty(j)&&tt(e,t,j,null,l,M);for(L in l)M=l[L],E=a[L],!l.hasOwnProperty(L)||M===E||M==null&&E==null||tt(e,t,L,M,l,E)}function em(e){switch(e){case"css":case"script":case"font":case"img":case"image":case"input":case"link":return!0;default:return!1}}function Ah(){if(typeof performance.getEntriesByType=="function"){for(var e=0,t=0,a=performance.getEntriesByType("resource"),l=0;l<a.length;l++){var n=a[l],s=n.transferSize,r=n.initiatorType,d=n.duration;if(s&&d&&em(r)){for(r=0,d=n.responseEnd,l+=1;l<a.length;l++){var g=a[l],w=g.startTime;if(w>d)break;var z=g.transferSize,L=g.initiatorType;z&&em(L)&&(g=g.responseEnd,r+=z*(g<d?1:(d-w)/(g-w)))}if(--l,t+=8*(s+r)/(n.duration/1e3),e++,10<e)break}}if(0<e)return t/e/1e6}return navigator.connection&&(e=navigator.connection.downlink,typeof e=="number")?e:5}var Co=null,wo=null;function wr(e){return e.nodeType===9?e:e.ownerDocument}function tm(e){switch(e){case"http://www.w3.org/2000/svg":return 1;case"http://www.w3.org/1998/Math/MathML":return 2;default:return 0}}function am(e,t){if(e===0)switch(t){case"svg":return 1;case"math":return 2;default:return 0}return e===1&&t==="foreignObject"?0:e}function No(e,t){return e==="textarea"||e==="noscript"||typeof t.children=="string"||typeof t.children=="number"||typeof t.children=="bigint"||typeof t.dangerouslySetInnerHTML=="object"&&t.dangerouslySetInnerHTML!==null&&t.dangerouslySetInnerHTML.__html!=null}var Mo=null;function zh(){var e=window.event;return e&&e.type==="popstate"?e===Mo?!1:(Mo=e,!0):(Mo=null,!1)}var lm=typeof setTimeout=="function"?setTimeout:void 0,_h=typeof clearTimeout=="function"?clearTimeout:void 0,nm=typeof Promise=="function"?Promise:void 0,Dh=typeof queueMicrotask=="function"?queueMicrotask:typeof nm<"u"?function(e){return nm.resolve(null).then(e).catch(Rh)}:lm;function Rh(e){setTimeout(function(){throw e})}function bn(e){return e==="head"}function sm(e,t){var a=t,l=0;do{var n=a.nextSibling;if(e.removeChild(a),n&&n.nodeType===8)if(a=n.data,a==="/$"||a==="/&"){if(l===0){e.removeChild(n),Ls(t);return}l--}else if(a==="$"||a==="$?"||a==="$~"||a==="$!"||a==="&")l++;else if(a==="html")xi(e.ownerDocument.documentElement);else if(a==="head"){a=e.ownerDocument.head,xi(a);for(var s=a.firstChild;s;){var r=s.nextSibling,d=s.nodeName;s[je]||d==="SCRIPT"||d==="STYLE"||d==="LINK"&&s.rel.toLowerCase()==="stylesheet"||a.removeChild(s),s=r}}else a==="body"&&xi(e.ownerDocument.body);a=n}while(a);Ls(t)}function im(e,t){var a=e;e=0;do{var l=a.nextSibling;if(a.nodeType===1?t?(a._stashedDisplay=a.style.display,a.style.display="none"):(a.style.display=a._stashedDisplay||"",a.getAttribute("style")===""&&a.removeAttribute("style")):a.nodeType===3&&(t?(a._stashedText=a.nodeValue,a.nodeValue=""):a.nodeValue=a._stashedText||""),l&&l.nodeType===8)if(a=l.data,a==="/$"){if(e===0)break;e--}else a!=="$"&&a!=="$?"&&a!=="$~"&&a!=="$!"||e++;a=l}while(a)}function To(e){var t=e.firstChild;for(t&&t.nodeType===10&&(t=t.nextSibling);t;){var a=t;switch(t=t.nextSibling,a.nodeName){case"HTML":case"HEAD":case"BODY":To(a),Dt(a);continue;case"SCRIPT":case"STYLE":continue;case"LINK":if(a.rel.toLowerCase()==="stylesheet")continue}e.removeChild(a)}}function Oh(e,t,a,l){for(;e.nodeType===1;){var n=a;if(e.nodeName.toLowerCase()!==t.toLowerCase()){if(!l&&(e.nodeName!=="INPUT"||e.type!=="hidden"))break}else if(l){if(!e[je])switch(t){case"meta":if(!e.hasAttribute("itemprop"))break;return e;case"link":if(s=e.getAttribute("rel"),s==="stylesheet"&&e.hasAttribute("data-precedence"))break;if(s!==n.rel||e.getAttribute("href")!==(n.href==null||n.href===""?null:n.href)||e.getAttribute("crossorigin")!==(n.crossOrigin==null?null:n.crossOrigin)||e.getAttribute("title")!==(n.title==null?null:n.title))break;return e;case"style":if(e.hasAttribute("data-precedence"))break;return e;case"script":if(s=e.getAttribute("src"),(s!==(n.src==null?null:n.src)||e.getAttribute("type")!==(n.type==null?null:n.type)||e.getAttribute("crossorigin")!==(n.crossOrigin==null?null:n.crossOrigin))&&s&&e.hasAttribute("async")&&!e.hasAttribute("itemprop"))break;return e;default:return e}}else if(t==="input"&&e.type==="hidden"){var s=n.name==null?null:""+n.name;if(n.type==="hidden"&&e.getAttribute("name")===s)return e}else return e;if(e=tl(e.nextSibling),e===null)break}return null}function Lh(e,t,a){if(t==="")return null;for(;e.nodeType!==3;)if((e.nodeType!==1||e.nodeName!=="INPUT"||e.type!=="hidden")&&!a||(e=tl(e.nextSibling),e===null))return null;return e}function rm(e,t){for(;e.nodeType!==8;)if((e.nodeType!==1||e.nodeName!=="INPUT"||e.type!=="hidden")&&!t||(e=tl(e.nextSibling),e===null))return null;return e}function Eo(e){return e.data==="$?"||e.data==="$~"}function Ao(e){return e.data==="$!"||e.data==="$?"&&e.ownerDocument.readyState!=="loading"}function kh(e,t){var a=e.ownerDocument;if(e.data==="$~")e._reactRetry=t;else if(e.data!=="$?"||a.readyState!=="loading")t();else{var l=function(){t(),a.removeEventListener("DOMContentLoaded",l)};a.addEventListener("DOMContentLoaded",l),e._reactRetry=l}}function tl(e){for(;e!=null;e=e.nextSibling){var t=e.nodeType;if(t===1||t===3)break;if(t===8){if(t=e.data,t==="$"||t==="$!"||t==="$?"||t==="$~"||t==="&"||t==="F!"||t==="F")break;if(t==="/$"||t==="/&")return null}}return e}var zo=null;function cm(e){e=e.nextSibling;for(var t=0;e;){if(e.nodeType===8){var a=e.data;if(a==="/$"||a==="/&"){if(t===0)return tl(e.nextSibling);t--}else a!=="$"&&a!=="$!"&&a!=="$?"&&a!=="$~"&&a!=="&"||t++}e=e.nextSibling}return null}function om(e){e=e.previousSibling;for(var t=0;e;){if(e.nodeType===8){var a=e.data;if(a==="$"||a==="$!"||a==="$?"||a==="$~"||a==="&"){if(t===0)return e;t--}else a!=="/$"&&a!=="/&"||t++}e=e.previousSibling}return null}function um(e,t,a){switch(t=wr(a),e){case"html":if(e=t.documentElement,!e)throw Error(o(452));return e;case"head":if(e=t.head,!e)throw Error(o(453));return e;case"body":if(e=t.body,!e)throw Error(o(454));return e;default:throw Error(o(451))}}function xi(e){for(var t=e.attributes;t.length;)e.removeAttributeNode(t[0]);Dt(e)}var al=new Map,dm=new Set;function Nr(e){return typeof e.getRootNode=="function"?e.getRootNode():e.nodeType===9?e:e.ownerDocument}var Kl=B.d;B.d={f:Hh,r:Uh,D:Bh,C:Gh,L:Yh,m:Qh,X:Vh,S:qh,M:Xh};function Hh(){var e=Kl.f(),t=gr();return e||t}function Uh(e){var t=ya(e);t!==null&&t.tag===5&&t.type==="form"?Td(t):Kl.r(e)}var Ds=typeof document>"u"?null:document;function fm(e,t,a){var l=Ds;if(l&&typeof t=="string"&&t){var n=Ee(t);n='link[rel="'+e+'"][href="'+n+'"]',typeof a=="string"&&(n+='[crossorigin="'+a+'"]'),dm.has(n)||(dm.add(n),e={rel:e,crossOrigin:a,href:t},l.querySelector(n)===null&&(t=l.createElement("link"),ca(t,"link",e),ct(t),l.head.appendChild(t)))}}function Bh(e){Kl.D(e),fm("dns-prefetch",e,null)}function Gh(e,t){Kl.C(e,t),fm("preconnect",e,t)}function Yh(e,t,a){Kl.L(e,t,a);var l=Ds;if(l&&e&&t){var n='link[rel="preload"][as="'+Ee(t)+'"]';t==="image"&&a&&a.imageSrcSet?(n+='[imagesrcset="'+Ee(a.imageSrcSet)+'"]',typeof a.imageSizes=="string"&&(n+='[imagesizes="'+Ee(a.imageSizes)+'"]')):n+='[href="'+Ee(e)+'"]';var s=n;switch(t){case"style":s=Rs(e);break;case"script":s=Os(e)}al.has(s)||(e=T({rel:"preload",href:t==="image"&&a&&a.imageSrcSet?void 0:e,as:t},a),al.set(s,e),l.querySelector(n)!==null||t==="style"&&l.querySelector(yi(s))||t==="script"&&l.querySelector(bi(s))||(t=l.createElement("link"),ca(t,"link",e),ct(t),l.head.appendChild(t)))}}function Qh(e,t){Kl.m(e,t);var a=Ds;if(a&&e){var l=t&&typeof t.as=="string"?t.as:"script",n='link[rel="modulepreload"][as="'+Ee(l)+'"][href="'+Ee(e)+'"]',s=n;switch(l){case"audioworklet":case"paintworklet":case"serviceworker":case"sharedworker":case"worker":case"script":s=Os(e)}if(!al.has(s)&&(e=T({rel:"modulepreload",href:e},t),al.set(s,e),a.querySelector(n)===null)){switch(l){case"audioworklet":case"paintworklet":case"serviceworker":case"sharedworker":case"worker":case"script":if(a.querySelector(bi(s)))return}l=a.createElement("link"),ca(l,"link",e),ct(l),a.head.appendChild(l)}}}function qh(e,t,a){Kl.S(e,t,a);var l=Ds;if(l&&e){var n=vt(l).hoistableStyles,s=Rs(e);t=t||"default";var r=n.get(s);if(!r){var d={loading:0,preload:null};if(r=l.querySelector(yi(s)))d.loading=5;else{e=T({rel:"stylesheet",href:e,"data-precedence":t},a),(a=al.get(s))&&_o(e,a);var g=r=l.createElement("link");ct(g),ca(g,"link",e),g._p=new Promise(function(w,z){g.onload=w,g.onerror=z}),g.addEventListener("load",function(){d.loading|=1}),g.addEventListener("error",function(){d.loading|=2}),d.loading|=4,Mr(r,t,l)}r={type:"stylesheet",instance:r,count:1,state:d},n.set(s,r)}}}function Vh(e,t){Kl.X(e,t);var a=Ds;if(a&&e){var l=vt(a).hoistableScripts,n=Os(e),s=l.get(n);s||(s=a.querySelector(bi(n)),s||(e=T({src:e,async:!0},t),(t=al.get(n))&&Do(e,t),s=a.createElement("script"),ct(s),ca(s,"link",e),a.head.appendChild(s)),s={type:"script",instance:s,count:1,state:null},l.set(n,s))}}function Xh(e,t){Kl.M(e,t);var a=Ds;if(a&&e){var l=vt(a).hoistableScripts,n=Os(e),s=l.get(n);s||(s=a.querySelector(bi(n)),s||(e=T({src:e,async:!0,type:"module"},t),(t=al.get(n))&&Do(e,t),s=a.createElement("script"),ct(s),ca(s,"link",e),a.head.appendChild(s)),s={type:"script",instance:s,count:1,state:null},l.set(n,s))}}function mm(e,t,a,l){var n=(n=Se.current)?Nr(n):null;if(!n)throw Error(o(446));switch(e){case"meta":case"title":return null;case"style":return typeof a.precedence=="string"&&typeof a.href=="string"?(t=Rs(a.href),a=vt(n).hoistableStyles,l=a.get(t),l||(l={type:"style",instance:null,count:0,state:null},a.set(t,l)),l):{type:"void",instance:null,count:0,state:null};case"link":if(a.rel==="stylesheet"&&typeof a.href=="string"&&typeof a.precedence=="string"){e=Rs(a.href);var s=vt(n).hoistableStyles,r=s.get(e);if(r||(n=n.ownerDocument||n,r={type:"stylesheet",instance:null,count:0,state:{loading:0,preload:null}},s.set(e,r),(s=n.querySelector(yi(e)))&&!s._p&&(r.instance=s,r.state.loading=5),al.has(e)||(a={rel:"preload",as:"style",href:a.href,crossOrigin:a.crossOrigin,integrity:a.integrity,media:a.media,hrefLang:a.hrefLang,referrerPolicy:a.referrerPolicy},al.set(e,a),s||Zh(n,e,a,r.state))),t&&l===null)throw Error(o(528,""));return r}if(t&&l!==null)throw Error(o(529,""));return null;case"script":return t=a.async,a=a.src,typeof a=="string"&&t&&typeof t!="function"&&typeof t!="symbol"?(t=Os(a),a=vt(n).hoistableScripts,l=a.get(t),l||(l={type:"script",instance:null,count:0,state:null},a.set(t,l)),l):{type:"void",instance:null,count:0,state:null};default:throw Error(o(444,e))}}function Rs(e){return'href="'+Ee(e)+'"'}function yi(e){return'link[rel="stylesheet"]['+e+"]"}function hm(e){return T({},e,{"data-precedence":e.precedence,precedence:null})}function Zh(e,t,a,l){e.querySelector('link[rel="preload"][as="style"]['+t+"]")?l.loading=1:(t=e.createElement("link"),l.preload=t,t.addEventListener("load",function(){return l.loading|=1}),t.addEventListener("error",function(){return l.loading|=2}),ca(t,"link",a),ct(t),e.head.appendChild(t))}function Os(e){return'[src="'+Ee(e)+'"]'}function bi(e){return"script[async]"+e}function pm(e,t,a){if(t.count++,t.instance===null)switch(t.type){case"style":var l=e.querySelector('style[data-href~="'+Ee(a.href)+'"]');if(l)return t.instance=l,ct(l),l;var n=T({},a,{"data-href":a.href,"data-precedence":a.precedence,href:null,precedence:null});return l=(e.ownerDocument||e).createElement("style"),ct(l),ca(l,"style",n),Mr(l,a.precedence,e),t.instance=l;case"stylesheet":n=Rs(a.href);var s=e.querySelector(yi(n));if(s)return t.state.loading|=4,t.instance=s,ct(s),s;l=hm(a),(n=al.get(n))&&_o(l,n),s=(e.ownerDocument||e).createElement("link"),ct(s);var r=s;return r._p=new Promise(function(d,g){r.onload=d,r.onerror=g}),ca(s,"link",l),t.state.loading|=4,Mr(s,a.precedence,e),t.instance=s;case"script":return s=Os(a.src),(n=e.querySelector(bi(s)))?(t.instance=n,ct(n),n):(l=a,(n=al.get(s))&&(l=T({},a),Do(l,n)),e=e.ownerDocument||e,n=e.createElement("script"),ct(n),ca(n,"link",l),e.head.appendChild(n),t.instance=n);case"void":return null;default:throw Error(o(443,t.type))}else t.type==="stylesheet"&&(t.state.loading&4)===0&&(l=t.instance,t.state.loading|=4,Mr(l,a.precedence,e));return t.instance}function Mr(e,t,a){for(var l=a.querySelectorAll('link[rel="stylesheet"][data-precedence],style[data-precedence]'),n=l.length?l[l.length-1]:null,s=n,r=0;r<l.length;r++){var d=l[r];if(d.dataset.precedence===t)s=d;else if(s!==n)break}s?s.parentNode.insertBefore(e,s.nextSibling):(t=a.nodeType===9?a.head:a,t.insertBefore(e,t.firstChild))}function _o(e,t){e.crossOrigin==null&&(e.crossOrigin=t.crossOrigin),e.referrerPolicy==null&&(e.referrerPolicy=t.referrerPolicy),e.title==null&&(e.title=t.title)}function Do(e,t){e.crossOrigin==null&&(e.crossOrigin=t.crossOrigin),e.referrerPolicy==null&&(e.referrerPolicy=t.referrerPolicy),e.integrity==null&&(e.integrity=t.integrity)}var Tr=null;function gm(e,t,a){if(Tr===null){var l=new Map,n=Tr=new Map;n.set(a,l)}else n=Tr,l=n.get(a),l||(l=new Map,n.set(a,l));if(l.has(e))return l;for(l.set(e,null),a=a.getElementsByTagName(e),n=0;n<a.length;n++){var s=a[n];if(!(s[je]||s[P]||e==="link"&&s.getAttribute("rel")==="stylesheet")&&s.namespaceURI!=="http://www.w3.org/2000/svg"){var r=s.getAttribute(t)||"";r=e+r;var d=l.get(r);d?d.push(s):l.set(r,[s])}}return l}function xm(e,t,a){e=e.ownerDocument||e,e.head.insertBefore(a,t==="title"?e.querySelector("head > title"):null)}function Kh(e,t,a){if(a===1||t.itemProp!=null)return!1;switch(e){case"meta":case"title":return!0;case"style":if(typeof t.precedence!="string"||typeof t.href!="string"||t.href==="")break;return!0;case"link":if(typeof t.rel!="string"||typeof t.href!="string"||t.href===""||t.onLoad||t.onError)break;switch(t.rel){case"stylesheet":return e=t.disabled,typeof t.precedence=="string"&&e==null;default:return!0}case"script":if(t.async&&typeof t.async!="function"&&typeof t.async!="symbol"&&!t.onLoad&&!t.onError&&t.src&&typeof t.src=="string")return!0}return!1}function ym(e){return!(e.type==="stylesheet"&&(e.state.loading&3)===0)}function Fh(e,t,a,l){if(a.type==="stylesheet"&&(typeof l.media!="string"||matchMedia(l.media).matches!==!1)&&(a.state.loading&4)===0){if(a.instance===null){var n=Rs(l.href),s=t.querySelector(yi(n));if(s){t=s._p,t!==null&&typeof t=="object"&&typeof t.then=="function"&&(e.count++,e=Er.bind(e),t.then(e,e)),a.state.loading|=4,a.instance=s,ct(s);return}s=t.ownerDocument||t,l=hm(l),(n=al.get(n))&&_o(l,n),s=s.createElement("link"),ct(s);var r=s;r._p=new Promise(function(d,g){r.onload=d,r.onerror=g}),ca(s,"link",l),a.instance=s}e.stylesheets===null&&(e.stylesheets=new Map),e.stylesheets.set(a,t),(t=a.state.preload)&&(a.state.loading&3)===0&&(e.count++,a=Er.bind(e),t.addEventListener("load",a),t.addEventListener("error",a))}}var Ro=0;function Jh(e,t){return e.stylesheets&&e.count===0&&zr(e,e.stylesheets),0<e.count||0<e.imgCount?function(a){var l=setTimeout(function(){if(e.stylesheets&&zr(e,e.stylesheets),e.unsuspend){var s=e.unsuspend;e.unsuspend=null,s()}},6e4+t);0<e.imgBytes&&Ro===0&&(Ro=62500*Ah());var n=setTimeout(function(){if(e.waitingForImages=!1,e.count===0&&(e.stylesheets&&zr(e,e.stylesheets),e.unsuspend)){var s=e.unsuspend;e.unsuspend=null,s()}},(e.imgBytes>Ro?50:800)+t);return e.unsuspend=a,function(){e.unsuspend=null,clearTimeout(l),clearTimeout(n)}}:null}function Er(){if(this.count--,this.count===0&&(this.imgCount===0||!this.waitingForImages)){if(this.stylesheets)zr(this,this.stylesheets);else if(this.unsuspend){var e=this.unsuspend;this.unsuspend=null,e()}}}var Ar=null;function zr(e,t){e.stylesheets=null,e.unsuspend!==null&&(e.count++,Ar=new Map,t.forEach(Wh,e),Ar=null,Er.call(e))}function Wh(e,t){if(!(t.state.loading&4)){var a=Ar.get(e);if(a)var l=a.get(null);else{a=new Map,Ar.set(e,a);for(var n=e.querySelectorAll("link[data-precedence],style[data-precedence]"),s=0;s<n.length;s++){var r=n[s];(r.nodeName==="LINK"||r.getAttribute("media")!=="not all")&&(a.set(r.dataset.precedence,r),l=r)}l&&a.set(null,l)}n=t.instance,r=n.getAttribute("data-precedence"),s=a.get(r)||l,s===l&&a.set(null,n),a.set(r,n),this.count++,l=Er.bind(this),n.addEventListener("load",l),n.addEventListener("error",l),s?s.parentNode.insertBefore(n,s.nextSibling):(e=e.nodeType===9?e.head:e,e.insertBefore(n,e.firstChild)),t.state.loading|=4}}var vi={$$typeof:U,Provider:null,Consumer:null,_currentValue:oe,_currentValue2:oe,_threadCount:0};function Ih(e,t,a,l,n,s,r,d,g){this.tag=1,this.containerInfo=e,this.pingCache=this.current=this.pendingChildren=null,this.timeoutHandle=-1,this.callbackNode=this.next=this.pendingContext=this.context=this.cancelPendingCommit=null,this.callbackPriority=0,this.expirationTimes=Ra(-1),this.entangledLanes=this.shellSuspendCounter=this.errorRecoveryDisabledLanes=this.expiredLanes=this.warmLanes=this.pingedLanes=this.suspendedLanes=this.pendingLanes=0,this.entanglements=Ra(0),this.hiddenUpdates=Ra(null),this.identifierPrefix=l,this.onUncaughtError=n,this.onCaughtError=s,this.onRecoverableError=r,this.pooledCache=null,this.pooledCacheLanes=0,this.formState=g,this.incompleteTransitions=new Map}function bm(e,t,a,l,n,s,r,d,g,w,z,L){return e=new Ih(e,t,a,r,g,w,z,L,d),t=1,s===!0&&(t|=24),s=Ua(3,null,null,t),e.current=s,s.stateNode=e,t=dc(),t.refCount++,e.pooledCache=t,t.refCount++,s.memoizedState={element:l,isDehydrated:a,cache:t},pc(s),e}function vm(e){return e?(e=ds,e):ds}function Sm(e,t,a,l,n,s){n=vm(n),l.context===null?l.context=n:l.pendingContext=n,l=cn(t),l.payload={element:a},s=s===void 0?null:s,s!==null&&(l.callback=s),a=on(e,l,t),a!==null&&(_a(a,e,t),$s(a,e,t))}function jm(e,t){if(e=e.memoizedState,e!==null&&e.dehydrated!==null){var a=e.retryLane;e.retryLane=a!==0&&a<t?a:t}}function Oo(e,t){jm(e,t),(e=e.alternate)&&jm(e,t)}function Cm(e){if(e.tag===13||e.tag===31){var t=Gn(e,67108864);t!==null&&_a(t,e,67108864),Oo(e,67108864)}}function wm(e){if(e.tag===13||e.tag===31){var t=qa();t=ie(t);var a=Gn(e,t);a!==null&&_a(a,e,t),Oo(e,t)}}var _r=!0;function $h(e,t,a,l){var n=A.T;A.T=null;var s=B.p;try{B.p=2,Lo(e,t,a,l)}finally{B.p=s,A.T=n}}function Ph(e,t,a,l){var n=A.T;A.T=null;var s=B.p;try{B.p=8,Lo(e,t,a,l)}finally{B.p=s,A.T=n}}function Lo(e,t,a,l){if(_r){var n=ko(l);if(n===null)So(e,t,l,Dr,a),Mm(e,l);else if(tp(n,e,t,a,l))l.stopPropagation();else if(Mm(e,l),t&4&&-1<ep.indexOf(e)){for(;n!==null;){var s=ya(n);if(s!==null)switch(s.tag){case 3:if(s=s.stateNode,s.current.memoizedState.isDehydrated){var r=rt(s.pendingLanes);if(r!==0){var d=s;for(d.pendingLanes|=2,d.entangledLanes|=2;r;){var g=1<<31-Vt(r);d.entanglements[1]|=g,r&=~g}Nl(s),(Fe&6)===0&&(hr=Tt()+500,hi(0))}}break;case 31:case 13:d=Gn(s,2),d!==null&&_a(d,s,2),gr(),Oo(s,2)}if(s=ko(l),s===null&&So(e,t,l,Dr,a),s===n)break;n=s}n!==null&&l.stopPropagation()}else So(e,t,l,null,a)}}function ko(e){return e=Ma(e),Ho(e)}var Dr=null;function Ho(e){if(Dr=null,e=ea(e),e!==null){var t=h(e);if(t===null)e=null;else{var a=t.tag;if(a===13){if(e=S(t),e!==null)return e;e=null}else if(a===31){if(e=N(t),e!==null)return e;e=null}else if(a===3){if(t.stateNode.current.memoizedState.isDehydrated)return t.tag===3?t.stateNode.containerInfo:null;e=null}else t!==e&&(e=null)}}return Dr=e,null}function Nm(e){switch(e){case"beforetoggle":case"cancel":case"click":case"close":case"contextmenu":case"copy":case"cut":case"auxclick":case"dblclick":case"dragend":case"dragstart":case"drop":case"focusin":case"focusout":case"input":case"invalid":case"keydown":case"keypress":case"keyup":case"mousedown":case"mouseup":case"paste":case"pause":case"play":case"pointercancel":case"pointerdown":case"pointerup":case"ratechange":case"reset":case"resize":case"seeked":case"submit":case"toggle":case"touchcancel":case"touchend":case"touchstart":case"volumechange":case"change":case"selectionchange":case"textInput":case"compositionstart":case"compositionend":case"compositionupdate":case"beforeblur":case"afterblur":case"beforeinput":case"blur":case"fullscreenchange":case"focus":case"hashchange":case"popstate":case"select":case"selectstart":return 2;case"drag":case"dragenter":case"dragexit":case"dragleave":case"dragover":case"mousemove":case"mouseout":case"mouseover":case"pointermove":case"pointerout":case"pointerover":case"scroll":case"touchmove":case"wheel":case"mouseenter":case"mouseleave":case"pointerenter":case"pointerleave":return 8;case"message":switch(Jt()){case En:return 2;case Da:return 8;case ua:case An:return 32;case zn:return 268435456;default:return 32}default:return 32}}var Uo=!1,vn=null,Sn=null,jn=null,Si=new Map,ji=new Map,Cn=[],ep="mousedown mouseup touchcancel touchend touchstart auxclick dblclick pointercancel pointerdown pointerup dragend dragstart drop compositionend compositionstart keydown keypress keyup input textInput copy cut paste click change contextmenu reset".split(" ");function Mm(e,t){switch(e){case"focusin":case"focusout":vn=null;break;case"dragenter":case"dragleave":Sn=null;break;case"mouseover":case"mouseout":jn=null;break;case"pointerover":case"pointerout":Si.delete(t.pointerId);break;case"gotpointercapture":case"lostpointercapture":ji.delete(t.pointerId)}}function Ci(e,t,a,l,n,s){return e===null||e.nativeEvent!==s?(e={blockedOn:t,domEventName:a,eventSystemFlags:l,nativeEvent:s,targetContainers:[n]},t!==null&&(t=ya(t),t!==null&&Cm(t)),e):(e.eventSystemFlags|=l,t=e.targetContainers,n!==null&&t.indexOf(n)===-1&&t.push(n),e)}function tp(e,t,a,l,n){switch(t){case"focusin":return vn=Ci(vn,e,t,a,l,n),!0;case"dragenter":return Sn=Ci(Sn,e,t,a,l,n),!0;case"mouseover":return jn=Ci(jn,e,t,a,l,n),!0;case"pointerover":var s=n.pointerId;return Si.set(s,Ci(Si.get(s)||null,e,t,a,l,n)),!0;case"gotpointercapture":return s=n.pointerId,ji.set(s,Ci(ji.get(s)||null,e,t,a,l,n)),!0}return!1}function Tm(e){var t=ea(e.target);if(t!==null){var a=h(t);if(a!==null){if(t=a.tag,t===13){if(t=S(a),t!==null){e.blockedOn=t,te(e.priority,function(){wm(a)});return}}else if(t===31){if(t=N(a),t!==null){e.blockedOn=t,te(e.priority,function(){wm(a)});return}}else if(t===3&&a.stateNode.current.memoizedState.isDehydrated){e.blockedOn=a.tag===3?a.stateNode.containerInfo:null;return}}}e.blockedOn=null}function Rr(e){if(e.blockedOn!==null)return!1;for(var t=e.targetContainers;0<t.length;){var a=ko(e.nativeEvent);if(a===null){a=e.nativeEvent;var l=new a.constructor(a.type,a);ka=l,a.target.dispatchEvent(l),ka=null}else return t=ya(a),t!==null&&Cm(t),e.blockedOn=a,!1;t.shift()}return!0}function Em(e,t,a){Rr(e)&&a.delete(t)}function ap(){Uo=!1,vn!==null&&Rr(vn)&&(vn=null),Sn!==null&&Rr(Sn)&&(Sn=null),jn!==null&&Rr(jn)&&(jn=null),Si.forEach(Em),ji.forEach(Em)}function Or(e,t){e.blockedOn===t&&(e.blockedOn=null,Uo||(Uo=!0,u.unstable_scheduleCallback(u.unstable_NormalPriority,ap)))}var Lr=null;function Am(e){Lr!==e&&(Lr=e,u.unstable_scheduleCallback(u.unstable_NormalPriority,function(){Lr===e&&(Lr=null);for(var t=0;t<e.length;t+=3){var a=e[t],l=e[t+1],n=e[t+2];if(typeof l!="function"){if(Ho(l||a)===null)continue;break}var s=ya(a);s!==null&&(e.splice(t,3),t-=3,Lc(s,{pending:!0,data:n,method:a.method,action:l},l,n))}}))}function Ls(e){function t(g){return Or(g,e)}vn!==null&&Or(vn,e),Sn!==null&&Or(Sn,e),jn!==null&&Or(jn,e),Si.forEach(t),ji.forEach(t);for(var a=0;a<Cn.length;a++){var l=Cn[a];l.blockedOn===e&&(l.blockedOn=null)}for(;0<Cn.length&&(a=Cn[0],a.blockedOn===null);)Tm(a),a.blockedOn===null&&Cn.shift();if(a=(e.ownerDocument||e).$$reactFormReplay,a!=null)for(l=0;l<a.length;l+=3){var n=a[l],s=a[l+1],r=n[ne]||null;if(typeof s=="function")r||Am(a);else if(r){var d=null;if(s&&s.hasAttribute("formAction")){if(n=s,r=s[ne]||null)d=r.formAction;else if(Ho(n)!==null)continue}else d=r.action;typeof d=="function"?a[l+1]=d:(a.splice(l,3),l-=3),Am(a)}}}function zm(){function e(s){s.canIntercept&&s.info==="react-transition"&&s.intercept({handler:function(){return new Promise(function(r){return n=r})},focusReset:"manual",scroll:"manual"})}function t(){n!==null&&(n(),n=null),l||setTimeout(a,20)}function a(){if(!l&&!navigation.transition){var s=navigation.currentEntry;s&&s.url!=null&&navigation.navigate(s.url,{state:s.getState(),info:"react-transition",history:"replace"})}}if(typeof navigation=="object"){var l=!1,n=null;return navigation.addEventListener("navigate",e),navigation.addEventListener("navigatesuccess",t),navigation.addEventListener("navigateerror",t),setTimeout(a,100),function(){l=!0,navigation.removeEventListener("navigate",e),navigation.removeEventListener("navigatesuccess",t),navigation.removeEventListener("navigateerror",t),n!==null&&(n(),n=null)}}}function Bo(e){this._internalRoot=e}kr.prototype.render=Bo.prototype.render=function(e){var t=this._internalRoot;if(t===null)throw Error(o(409));var a=t.current,l=qa();Sm(a,l,e,t,null,null)},kr.prototype.unmount=Bo.prototype.unmount=function(){var e=this._internalRoot;if(e!==null){this._internalRoot=null;var t=e.containerInfo;Sm(e.current,2,null,e,null,null),gr(),t[Ge]=null}};function kr(e){this._internalRoot=e}kr.prototype.unstable_scheduleHydration=function(e){if(e){var t=K();e={blockedOn:null,target:e,priority:t};for(var a=0;a<Cn.length&&t!==0&&t<Cn[a].priority;a++);Cn.splice(a,0,e),a===0&&Tm(e)}};var _m=c.version;if(_m!=="19.2.0")throw Error(o(527,_m,"19.2.0"));B.findDOMNode=function(e){var t=e._reactInternals;if(t===void 0)throw typeof e.render=="function"?Error(o(188)):(e=Object.keys(e).join(","),Error(o(268,e)));return e=p(t),e=e!==null?D(e):null,e=e===null?null:e.stateNode,e};var lp={bundleType:0,version:"19.2.0",rendererPackageName:"react-dom",currentDispatcherRef:A,reconcilerVersion:"19.2.0"};if(typeof __REACT_DEVTOOLS_GLOBAL_HOOK__<"u"){var Hr=__REACT_DEVTOOLS_GLOBAL_HOOK__;if(!Hr.isDisabled&&Hr.supportsFiber)try{xa=Hr.inject(lp),lt=Hr}catch{}}return Ni.createRoot=function(e,t){if(!m(e))throw Error(o(299));var a=!1,l="",n=Hd,s=Ud,r=Bd;return t!=null&&(t.unstable_strictMode===!0&&(a=!0),t.identifierPrefix!==void 0&&(l=t.identifierPrefix),t.onUncaughtError!==void 0&&(n=t.onUncaughtError),t.onCaughtError!==void 0&&(s=t.onCaughtError),t.onRecoverableError!==void 0&&(r=t.onRecoverableError)),t=bm(e,1,!1,null,null,a,l,null,n,s,r,zm),e[Ge]=t.current,vo(e),new Bo(t)},Ni.hydrateRoot=function(e,t,a){if(!m(e))throw Error(o(299));var l=!1,n="",s=Hd,r=Ud,d=Bd,g=null;return a!=null&&(a.unstable_strictMode===!0&&(l=!0),a.identifierPrefix!==void 0&&(n=a.identifierPrefix),a.onUncaughtError!==void 0&&(s=a.onUncaughtError),a.onCaughtError!==void 0&&(r=a.onCaughtError),a.onRecoverableError!==void 0&&(d=a.onRecoverableError),a.formState!==void 0&&(g=a.formState)),t=bm(e,1,!0,t,a??null,l,n,g,s,r,d,zm),t.context=vm(null),a=t.current,l=qa(),l=ie(l),n=cn(l),n.callback=null,on(a,n,l),a=l,t.current.lanes=a,zl(t,a),Nl(t),e[Ge]=t.current,vo(e),new kr(t)},Ni.version="19.2.0",Ni}var Zm;function Dp(){if(Zm)return Qo.exports;Zm=1;function u(){if(!(typeof __REACT_DEVTOOLS_GLOBAL_HOOK__>"u"||typeof __REACT_DEVTOOLS_GLOBAL_HOOK__.checkDCE!="function"))try{__REACT_DEVTOOLS_GLOBAL_HOOK__.checkDCE(u)}catch(c){console.error(c)}}return u(),Qo.exports=_p(),Qo.exports}var Rp=Dp();const Op=Im(Rp),ts=[{id:"normal",label:"Normal skin",description:"Baseline healthy skin without major inflammatory or structural changes.",category:"normal",parameterOverrides:{},affectedStructures:[]},{id:"psoriasis",label:"Psoriasis",description:"Chronic autoimmune condition with epidermal hyperplasia, accelerated keratinocyte turnover (3-5 days vs 28 days), and neutrophilic inflammation. Characterized by well-demarcated erythematous plaques with silvery scale.",category:"inflammatory",icdCode:"L40.0",parameterOverrides:{epidermisThicknessFactor:1.8,stratumCorneumFlakeDensityFactor:2,keratinocyteSizeFactor:1.1,dermalCollagenDensityFactor:.9,inflammationClusterDensity:1.5,vascularDilationFactor:1.4,erythemaIntensity:1.3},clinicalFeatures:["Silvery scale","Auspitz sign","Koebner phenomenon","Nail pitting"],affectedStructures:["epidermis","keratinocytes","stratum_corneum","blood_vessels"]},{id:"eczema",label:"Atopic Dermatitis",description:"Chronic inflammatory skin disease with impaired epidermal barrier function due to filaggrin deficiency. Features spongiotic dermatitis with intense pruritus and characteristic distribution patterns.",category:"inflammatory",icdCode:"L20.9",parameterOverrides:{epidermisThicknessFactor:1.3,stratumCorneumFlakeDensityFactor:1.3,keratinocyteSizeFactor:.95,inflammationClusterDensity:1.8,edemaFactor:1.4,mastCellDegranulationFactor:1.5},clinicalFeatures:["Pruritus","Xerosis","Lichenification","Flexural distribution"],affectedStructures:["epidermis","stratum_corneum","dermis","nerves"]},{id:"acne",label:"Acne Vulgaris",description:"Chronic inflammatory disease of the pilosebaceous unit involving follicular hyperkeratinization, sebaceous hyperplasia, Cutibacterium acnes colonization, and inflammation.",category:"inflammatory",icdCode:"L70.0",parameterOverrides:{epidermisThicknessFactor:1.15,stratumCorneumFlakeDensityFactor:1.4,keratinocyteSizeFactor:1.05,inflammationClusterDensity:2,vascularDilationFactor:1.2},clinicalFeatures:["Comedones","Papules","Pustules","Nodules","Scarring"],affectedStructures:["hair_follicle","epidermis","dermis"]},{id:"rosacea",label:"Rosacea",description:"Chronic neurovascular disorder with centrofacial erythema, telangiectasias, and flushing. May progress to papulopustular or phymatous subtypes.",category:"inflammatory",icdCode:"L71.9",parameterOverrides:{epidermisThicknessFactor:.95,dermalCollagenDensityFactor:.85,inflammationClusterDensity:1.3,vascularDilationFactor:1.8,vascularDensityFactor:1.3,erythemaIntensity:1.6},clinicalFeatures:["Flushing","Telangiectasia","Centrofacial erythema","Papules/pustules"],affectedStructures:["blood_vessels","dermis","nerves"]},{id:"urticaria",label:"Urticaria (Hives)",description:"IgE-mediated mast cell degranulation causing dermal edema and wheals. Characterized by transient, pruritic, erythematous plaques that resolve within 24 hours.",category:"allergic",icdCode:"L50.9",parameterOverrides:{epidermisThicknessFactor:1,dermalThicknessFactor:1.3,edemaFactor:2,mastCellDegranulationFactor:2.5,vascularDilationFactor:1.6,erythemaIntensity:1.5,inflammationClusterDensity:.8},clinicalFeatures:["Wheals","Pruritus","Dermal edema","Transient lesions (<24h)"],affectedStructures:["dermis","blood_vessels"]},{id:"contact_dermatitis",label:"Contact Dermatitis",description:"Inflammatory reaction to external allergen (allergic) or irritant (irritant). Type IV hypersensitivity with spongiotic dermatitis, vesicles, and eczematous changes at contact sites.",category:"allergic",icdCode:"L25.9",parameterOverrides:{epidermisThicknessFactor:1.25,stratumCorneumFlakeDensityFactor:1.2,inflammationClusterDensity:2.2,edemaFactor:1.6,mastCellDegranulationFactor:1.3,vascularDilationFactor:1.3,erythemaIntensity:1.4},clinicalFeatures:["Eczematous patches","Geometric distribution","Vesicles","Pruritus"],affectedStructures:["epidermis","dermis","stratum_corneum"]},{id:"vitiligo",label:"Vitiligo",description:"Autoimmune destruction of melanocytes causing depigmented patches. T-cell mediated attack on melanocytes results in progressive loss of pigmentation.",category:"pigmentary",icdCode:"L80",parameterOverrides:{epidermisThicknessFactor:1,pigmentationFactor:.1,melanocyteDensityFactor:.05,melaninDistribution:"absent",inflammationClusterDensity:.5},clinicalFeatures:["Depigmented macules/patches","Well-demarcated borders","Wood's lamp accentuation","Koebner phenomenon"],affectedStructures:["epidermis"]},{id:"melanoma",label:"Melanoma",description:"Malignant neoplasm of melanocytes. Most dangerous skin cancer with potential for metastasis. Features asymmetry, border irregularity, color variation, and diameter >6mm (ABCDE criteria).",category:"neoplastic",icdCode:"C43.9",parameterOverrides:{epidermisThicknessFactor:1.3,pigmentationFactor:1.8,melanocyteDensityFactor:3,melaninDistribution:"irregular",dermalCollagenDensityFactor:.7,atypicalCellDensity:2.5,tumorPresent:!0,tumorDepth:"invasive",tumorMorphology:"diffuse",vascularDensityFactor:1.4},clinicalFeatures:["Asymmetry","Border irregularity","Color variation","Diameter >6mm","Evolution"],affectedStructures:["epidermis","dermis","hypodermis"]},{id:"bcc",label:"Basal Cell Carcinoma",description:"Most common skin cancer arising from basal keratinocytes. Slow-growing, locally invasive but rarely metastasizes. Classic pearly papule with telangiectasias and rolled borders.",category:"neoplastic",icdCode:"C44.91",parameterOverrides:{epidermisThicknessFactor:1.4,keratinocyteSizeFactor:1.2,dermalCollagenDensityFactor:.75,atypicalCellDensity:1.8,tumorPresent:!0,tumorDepth:"superficial",tumorMorphology:"nodular",vascularDensityFactor:1.5,vascularDilationFactor:1.3},clinicalFeatures:["Pearly papule","Telangiectasias","Rolled borders","Central ulceration"],affectedStructures:["epidermis","dermis","keratinocytes"]},{id:"photoaging",label:"Photoaging",description:"Chronic UV damage causing solar elastosis, collagen degradation by MMP upregulation, and epidermal changes. Manifests as wrinkles, dyspigmentation, and leathery texture.",category:"aging",icdCode:"L57.8",parameterOverrides:{epidermisThicknessFactor:.85,dermalCollagenDensityFactor:.6,dermalThicknessFactor:.8,pigmentationFactor:1.2,melaninDistribution:"patchy",vascularDilationFactor:1.1},clinicalFeatures:["Wrinkles","Solar lentigines","Telangiectasias","Leathery texture","Actinic keratoses"],affectedStructures:["collagen","dermis","epidermis"]}],Mn=[{id:"macro",label:"Layers",camera:{position:[9,7,11],target:[0,0,0]},lod:{instanceMultiplier:.5,curveSegments:40,sphereSegments:8}},{id:"meso",label:"Follicle",camera:{position:[5,4,4],target:[0,-.5,0]},lod:{instanceMultiplier:1,curveSegments:60,sphereSegments:16}},{id:"micro",label:"Cells",camera:{position:[2.5,2.5,1.5],target:[0,.7,0]},lod:{instanceMultiplier:1.5,curveSegments:80,sphereSegments:24}}];function Mi(u){const c=Mn.find(f=>f.id===u);return(c==null?void 0:c.lod)??Mn[1].lod}const Io=[{id:"basic_layers",label:"Layer overview",steps:[{id:"layers_overview",camera:{position:[9,7,11],target:[0,0,0]},title:"All layers",narrative:"Overview of the epidermis, dermis, and hypodermis as an integrated organ."},{id:"epidermis_focus",camera:{position:[4.5,4.5,3],target:[0,1.3,0]},title:"Epidermis",narrative:"Focus on the epidermis, highlighting the stratum corneum and the living keratinocyte layers beneath."},{id:"dermis_focus",camera:{position:[4.5,3.5,3],target:[0,-.3,0]},title:"Dermis",narrative:"Examine the collagen matrix, blood vessels, hair follicles, and sweat glands within the dermis."},{id:"hypodermis_focus",camera:{position:[4.5,1.5,3],target:[0,-2.5,0]},title:"Hypodermis",narrative:"View the adipose lobules and their role in cushioning and insulating the overlying skin."}]},{id:"psoriasis_tour",label:"Psoriasis pathology",steps:[{id:"psoriasis_overview",camera:{position:[8,6,10],target:[0,.5,0]},title:"Psoriatic skin",narrative:"Psoriasis causes epidermal hyperplasia with characteristic silvery scales on erythematous plaques."},{id:"psoriasis_epidermis",camera:{position:[3,4,2.5],target:[0,1.5,0]},title:"Thickened epidermis",narrative:"Notice the increased epidermal thickness due to rapid keratinocyte proliferation (hyperkeratosis)."},{id:"psoriasis_stratum",camera:{position:[2,3.5,1.5],target:[0,2,0]},title:"Stratum corneum",narrative:"The stratum corneum shows parakeratosis with retained nuclei and increased flaking."},{id:"psoriasis_dermis",camera:{position:[4,3,3],target:[0,-.2,0]},title:"Dermal inflammation",narrative:"The dermis shows dilated blood vessels and inflammatory infiltrates characteristic of psoriasis."}]},{id:"acne_tour",label:"Acne pathology",steps:[{id:"acne_overview",camera:{position:[7,5,9],target:[0,0,0]},title:"Acne vulgaris",narrative:"Acne involves follicular hyperkeratinization, sebum overproduction, and bacterial colonization."},{id:"acne_follicle",camera:{position:[3,3,2],target:[0,0,0]},title:"Blocked follicle",narrative:"Hair follicles become blocked by keratin plugs and sebum, forming comedones."},{id:"acne_inflammation",camera:{position:[4,2.5,3],target:[0,-.5,0]},title:"Inflammatory response",narrative:"P. acnes bacteria trigger inflammation, leading to papules, pustules, or nodules."}]},{id:"vascular_tour",label:"Vascular anatomy",steps:[{id:"vascular_overview",camera:{position:[8,5,8],target:[0,-.5,0]},title:"Skin vasculature",narrative:"The skin contains an extensive vascular network essential for temperature regulation and nutrient delivery."},{id:"vascular_superficial",camera:{position:[4,4,3],target:[0,.5,0]},title:"Superficial plexus",narrative:"The superficial vascular plexus lies at the dermal-epidermal junction, supplying the epidermis."},{id:"vascular_deep",camera:{position:[4,2,3],target:[0,-1,0]},title:"Deep plexus",narrative:"The deep vascular plexus resides at the dermal-hypodermal interface, connecting to larger vessels."}]},{id:"appendages_tour",label:"Skin appendages",steps:[{id:"appendages_overview",camera:{position:[7,5,8],target:[0,0,0]},title:"Adnexal structures",narrative:"Skin appendages include hair follicles, sweat glands, and sebaceous glands."},{id:"hair_structure",camera:{position:[3,3,2],target:[0,-.3,0]},title:"Hair follicle",narrative:"Hair follicles extend deep into the dermis with associated arrector pili muscles."},{id:"sweat_structure",camera:{position:[3,2,2.5],target:[-1,-1,0]},title:"Eccrine sweat gland",narrative:"Eccrine sweat glands are coiled tubular glands that open directly to the skin surface."}]},{id:"nerve_tour",label:"Nerve distribution",steps:[{id:"nerve_overview",camera:{position:[8,5,9],target:[0,0,0]},title:"Cutaneous nerves",narrative:"The skin is richly innervated with sensory and autonomic nerve fibers."},{id:"nerve_dermis",camera:{position:[4,3,3],target:[0,-.5,0]},title:"Dermal nerve plexus",narrative:"Nerve bundles branch throughout the dermis, supplying sensory receptors and appendages."},{id:"nerve_epidermis",camera:{position:[3,4,2],target:[0,1,0]},title:"Free nerve endings",narrative:"Free nerve endings extend into the epidermis, detecting pain, temperature, and itch."}]},{id:"wound_healing_tour",label:"Wound healing",steps:[{id:"wound_overview",camera:{position:[8,6,10],target:[0,0,0]},title:"Wound healing phases",narrative:"Wound healing proceeds through hemostasis, inflammation, proliferation, and remodeling phases."},{id:"wound_inflammation",camera:{position:[5,4,4],target:[0,0,0]},title:"Inflammatory phase",narrative:"Neutrophils and macrophages clean the wound site and release growth factors."},{id:"wound_proliferation",camera:{position:[4,3.5,3],target:[0,.5,0]},title:"Proliferative phase",narrative:"Keratinocytes migrate to re-epithelialize while fibroblasts deposit new collagen matrix."},{id:"wound_remodeling",camera:{position:[4,3,3],target:[0,-.3,0]},title:"Remodeling phase",narrative:"Collagen reorganizes over months, strengthening the scar tissue to near-normal tensile strength."}]}],Km=10,Lp=300,Zo=300,kp=30,Hp=500;function Up(u){const c=x.useRef({startTime:0,startX:0,startY:0,lastTapTime:0,lastTapX:0,lastTapY:0,initialPinchDistance:null,longPressTimer:null}),f=x.useCallback((v,p)=>{const D=v.clientX-p.clientX,T=v.clientY-p.clientY;return Math.sqrt(D*D+T*T)},[]),o=x.useCallback((v,p)=>({x:(v.clientX+p.clientX)/2,y:(v.clientY+p.clientY)/2}),[]),m=x.useCallback(()=>{c.current.longPressTimer&&(clearTimeout(c.current.longPressTimer),c.current.longPressTimer=null)},[]),h=x.useCallback(v=>{const p=c.current;if(m(),v.touches.length===1){const D=v.touches[0];p.startTime=Date.now(),p.startX=D.clientX,p.startY=D.clientY,u.onLongPress&&(p.longPressTimer=setTimeout(()=>{var T;(T=u.onLongPress)==null||T.call(u,D.clientX,D.clientY)},Hp))}else v.touches.length===2&&(p.initialPinchDistance=f(v.touches[0],v.touches[1]))},[u,m,f]),S=x.useCallback(v=>{var D,T;const p=c.current;if(m(),v.touches.length===1){const G=v.touches[0],Y=G.clientX-p.startX,X=G.clientY-p.startY;Math.sqrt(Y*Y+X*X)>Km&&((D=u.onPan)==null||D.call(u,Y,X),p.startX=G.clientX,p.startY=G.clientY)}else if(v.touches.length===2&&p.initialPinchDistance!==null){const G=f(v.touches[0],v.touches[1]),Y=G/p.initialPinchDistance,X=o(v.touches[0],v.touches[1]);(T=u.onPinch)==null||T.call(u,Y,X.x,X.y),p.initialPinchDistance=G}},[u,m,f,o]),N=x.useCallback(v=>{var D;const p=c.current;if(m(),v.touches.length<2&&(p.initialPinchDistance=null),v.changedTouches.length===1&&v.touches.length===0){const T=v.changedTouches[0],G=Date.now()-p.startTime,Y=T.clientX-p.startX,X=T.clientY-p.startY,O=Math.sqrt(Y*Y+X*X);if(G<Lp&&O<Km){const xe=Date.now()-p.lastTapTime,Z=Math.sqrt(Math.pow(T.clientX-p.lastTapX,2)+Math.pow(T.clientY-p.lastTapY,2));xe<Zo&&Z<kp?((D=u.onDoubleTap)==null||D.call(u,T.clientX,T.clientY),p.lastTapTime=0):(p.lastTapTime=Date.now(),p.lastTapX=T.clientX,p.lastTapY=T.clientY,setTimeout(()=>{var me;Date.now()-p.lastTapTime>=Zo-10&&((me=u.onTap)==null||me.call(u,T.clientX,T.clientY))},Zo))}}},[u,m]);return{onTouchStart:h,onTouchMove:S,onTouchEnd:N}}const Tn=1,Va={epidermisThicknessMm:.12,papillaryDermisHeightMm:.3,dermisThicknessMm:2.5,hypodermisThicknessMm:4,skinPatchWidthMm:6,skinPatchDepthMm:6},Br={clinical:{epidermis:{color:16425829,roughness:.55,metalness:0,opacity:.35,transmission:.05,thickness:.4},papillary:{color:16767179,roughness:.8,metalness:0,opacity:.28},reticular:{color:16763318,roughness:.85,metalness:0,opacity:.25},hypodermis:{color:16773334,roughness:.9,metalness:0,opacity:.8},collagen:{color:16708551,roughness:.5,metalness:0},vessels:{oxy:13382468,deoxy:9116186,roughness:.4,metalness:0},sweat:{color:3718648,roughness:.4,metalness:0,opacity:.9},hair:{color:1120295,roughness:.6,metalness:.2}},he:{epidermis:{color:15774921,roughness:.6,metalness:0,opacity:.38},papillary:{color:14469099,roughness:.7,metalness:0,opacity:.32},reticular:{color:12956640,roughness:.75,metalness:0,opacity:.28},hypodermis:{color:16246471,roughness:.9,metalness:0,opacity:.85},collagen:{color:11642334,roughness:.55,metalness:0},vessels:{oxy:8138052,deoxy:4856364,roughness:.45,metalness:0},sweat:{color:9225983,roughness:.45,metalness:0,opacity:.9},hair:{color:854804,roughness:.65,metalness:.15}},masson:{epidermis:{color:16173233,roughness:.55,metalness:0,opacity:.36},papillary:{color:10467327,roughness:.75,metalness:0,opacity:.3},reticular:{color:8166655,roughness:.8,metalness:0,opacity:.26},hypodermis:{color:16313817,roughness:.9,metalness:0,opacity:.85},collagen:{color:6261759,roughness:.6,metalness:0},vessels:{oxy:11739168,deoxy:7344144,roughness:.4,metalness:0},sweat:{color:5949695,roughness:.45,metalness:0,opacity:.9},hair:{color:657938,roughness:.6,metalness:.15}}},Bp=240,Ko={basal:.18,spinous:.28,granular:.24},Fm={1:{melaninBase:.05,melaninUVBoost:.15,transmissionLoss:.05},2:{melaninBase:.08,melaninUVBoost:.18,transmissionLoss:.07},3:{melaninBase:.12,melaninUVBoost:.2,transmissionLoss:.09},4:{melaninBase:.18,melaninUVBoost:.22,transmissionLoss:.12},5:{melaninBase:.25,melaninUVBoost:.24,transmissionLoss:.15},6:{melaninBase:.32,melaninUVBoost:.26,transmissionLoss:.18}},$o={dose:0,decaySeconds:120},Po={value:5.5},Wl=[{id:"inflammatory",tStart:0,tEnd:.33,dayStart:0,dayEnd:4,label:"Inflammatory",description:"Hemostasis and inflammation - blood clotting, neutrophil and macrophage recruitment",color:16739179},{id:"proliferative",tStart:.33,tEnd:.66,dayStart:5,dayEnd:21,label:"Proliferative",description:"Granulation tissue formation, angiogenesis, re-epithelialization, wound contraction",color:16767293},{id:"remodeling",tStart:.66,tEnd:1,dayStart:21,dayEnd:365,label:"Remodeling",description:"Collagen reorganization, scar maturation, tensile strength recovery",color:7064439}],tu=[{type:"platelet",arrivalT:0,peakT:.05,declineT:.15,maxCount:50,color:16739179,size:.03},{type:"neutrophil",arrivalT:.02,peakT:.12,declineT:.25,maxCount:80,color:7649791,size:.06},{type:"macrophage",arrivalT:.08,peakT:.2,declineT:.5,maxCount:60,color:47252,size:.08},{type:"fibroblast",arrivalT:.15,peakT:.45,declineT:.75,maxCount:100,color:16632686,size:.05},{type:"keratinocyte",arrivalT:.3,peakT:.55,declineT:.7,maxCount:40,color:14774357,size:.04},{type:"myofibroblast",arrivalT:.35,peakT:.5,declineT:.65,maxCount:30,color:14037041,size:.06}],es=[{id:"clotFormation",t:.05,label:"Clot Formation",description:"Blood clot forms, platelets aggregate"},{id:"neutrophilPeak",t:.12,label:"Neutrophil Peak",description:"Neutrophils peak - clearing debris and pathogens"},{id:"macrophageArrival",t:.15,label:"Macrophage Arrival",description:"Macrophages arrive - orchestrating healing response"},{id:"granulationStart",t:.25,label:"Granulation Begins",description:"Granulation tissue forming at wound base"},{id:"angiogenesisStart",t:.3,label:"Angiogenesis Start",description:"New blood vessels sprouting toward wound"},{id:"reepithelialization50",t:.45,label:"Epidermis 50% Closed",description:"Keratinocytes have covered half the wound surface"},{id:"woundContraction",t:.5,label:"Wound Contraction",description:"Myofibroblasts contracting wound edges"},{id:"reepithelialization100",t:.65,label:"Epidermis Closed",description:"Wound surface fully re-epithelialized"},{id:"collagenRemodeling",t:.7,label:"Collagen Remodeling",description:"Type III collagen being replaced by Type I"},{id:"scarMaturation",t:.9,label:"Scar Maturation",description:"Scar tissue maturing and strengthening"}];function Pm(u){return Wl.find(f=>u>=f.tStart&&u<f.tEnd)||Wl[Wl.length-1]}function Gp(u){const c=Pm(u),f=(u-c.tStart)/(c.tEnd-c.tStart),o=c.dayStart+f*(c.dayEnd-c.dayStart);return o<1?"Hours after injury":o<7?`Day ${Math.floor(o)}`:o<30?`Week ${Math.floor(o/7)}`:o<365?`Month ${Math.floor(o/30)}`:`Year ${Math.floor(o/365)}`}function Il(u){return 1-Math.pow(1-u,3)}function e0(u){return u<.5?4*u*u*u:1-Math.pow(-2*u+2,3)/2}const Pt={initialWidth:1.5,initialDepth:2,finalWidth:.3,finalDepth:.5,contractionComplete:.65},au={platelets:50,neutrophils:80,macrophages:60};class Yp{constructor(){this.t=0,this.lastEmittedEvents=new Set,this.subscriptions=[],this.currentPhase=Wl[0]}on(c,f){const o={event:c,callback:f};return this.subscriptions.push(o),()=>{const m=this.subscriptions.indexOf(o);m>-1&&this.subscriptions.splice(m,1)}}emit(c,f,o){this.subscriptions.filter(m=>m.event===c||m.event==="*").forEach(m=>m.callback(f,o))}setProgress(c){const f=Math.max(0,Math.min(1,c)),o=this.t;this.t=f,this.emit("progressUpdate",f);const m=Pm(f);m.id!==this.currentPhase.id&&(this.currentPhase=m,this.emit("phaseChange",f)),f<o&&es.forEach(h=>{h.t>f&&this.lastEmittedEvents.delete(h.id)}),es.forEach(h=>{f>=h.t&&!this.lastEmittedEvents.has(h.id)&&(this.lastEmittedEvents.add(h.id),this.emit(h.id,f,h),this.emit("milestone",f,h))})}getProgress(){return this.t}getCurrentPhase(){return this.currentPhase}getDayLabel(){return Gp(this.t)}getEventsWithStatus(){return es.map(c=>({...c,fired:this.lastEmittedEvents.has(c.id)}))}getFiredEvents(){return es.filter(c=>this.lastEmittedEvents.has(c.id))}getNextEvent(){return es.find(c=>!this.lastEmittedEvents.has(c.id))||null}reset(){this.t=0,this.lastEmittedEvents.clear(),this.currentPhase=Wl[0],this.emit("reset",0)}hasReachedEvent(c){return this.lastEmittedEvents.has(c)}getPhaseProgress(){const c=this.currentPhase;return c.tEnd===c.tStart?0:(this.t-c.tStart)/(c.tEnd-c.tStart)}dispose(){this.subscriptions=[],this.lastEmittedEvents.clear()}}function Qp(u=0,c){const f=x.useRef(null);f.current||(f.current=new Yp);const[o,m]=x.useState(u),[h,S]=x.useState(Wl[0]),[N,v]=x.useState("Hours after injury"),[p,D]=x.useState(es.map(Y=>({...Y,fired:!1}))),T=x.useCallback(Y=>{const X=f.current;X&&(X.setProgress(Y),m(X.getProgress()),S(X.getCurrentPhase()),v(X.getDayLabel()),D(X.getEventsWithStatus()),c==null||c(Y))},[c]),G=x.useCallback(()=>{const Y=f.current;Y&&(Y.reset(),m(0),S(Wl[0]),v("Hours after injury"),D(es.map(X=>({...X,fired:!1}))))},[]);return x.useEffect(()=>{T(u)},[]),x.useEffect(()=>()=>{var Y;(Y=f.current)==null||Y.dispose()},[]),{controller:f.current,progress:o,setProgress:T,currentPhase:h,dayLabel:N,events:p,reset:G}}class qp{constructor(c={}){this.options={width:c.width??Pt.initialWidth,depth:c.depth??Pt.initialDepth,position:c.position??new Ce(0,0,0),dermisTop:c.dermisTop??1.5,dermisBottom:c.dermisBottom??-1.5},this.group=new ll,this.group.position.copy(this.options.position);const{cavityGeometry:f,rimGeometry:o,initialPositions:m,contractedPositions:h}=this.createWoundGeometry();this.initialPositions=m,this.contractedPositions=h;const S=new _t({color:13382451,roughness:.8,metalness:0,transparent:!0,opacity:.9,side:Jl}),N=new _t({color:16755336,roughness:.6,metalness:0,side:Jl});this.woundCavityMesh=new oa(f,S),this.woundCavityMesh.userData.type="wound_cavity",this.group.add(this.woundCavityMesh),this.woundRimMesh=new oa(o,N),this.woundRimMesh.userData.type="wound_rim",this.group.add(this.woundRimMesh)}createWoundGeometry(){const{width:c,depth:f,dermisTop:o,dermisBottom:m}=this.options,h=c/2,S=c*1.5,N=S/2,v=o-f,p=16,D=8,T=[],G=[],Y=[];for(let W=0;W<=p;W++){const F=-N+W/p*S,he=W/p;for(let ae=0;ae<=D;ae++){const we=ae/D;let Pe,A;we<.5?(Pe=-h+we*h,A=o-we*2*f):(Pe=(we-.5)*h,A=v+(we-.5)*2*f);const B=Math.sin(we*Math.PI)*.2;A-=B,T.push(Pe,A,F),Y.push(we,he)}}for(let W=0;W<p;W++)for(let F=0;F<D;F++){const he=W*(D+1)+F,ae=he+1,we=(W+1)*(D+1)+F,Pe=we+1;G.push(he,we,ae),G.push(ae,we,Pe)}const X=new Jo;X.setAttribute("position",new Gs(T,3)),X.setAttribute("uv",new Gs(Y,2)),X.setIndex(G),X.computeVertexNormals();const O=[],xe=[],Z=[],me=.1;for(let W=0;W<=p;W++){const F=-N+W/p*S;O.push(-h-me,o,F),O.push(h+me,o,F),O.push(-h,o,F),O.push(h,o,F);const he=W/p;Z.push(0,he),Z.push(1,he),Z.push(.3,he),Z.push(.7,he)}for(let W=0;W<p;W++){const F=W*4;xe.push(F,F+4,F+2),xe.push(F+2,F+4,F+6),xe.push(F+3,F+7,F+1),xe.push(F+1,F+7,F+5)}const U=new Jo;U.setAttribute("position",new Gs(O,3)),U.setAttribute("uv",new Gs(Z,2)),U.setIndex(xe),U.computeVertexNormals();const le=new Float32Array(T),fe=new Float32Array(T.length),De=c*(Pt.finalWidth/Pt.initialWidth),de=f*(Pt.finalDepth/Pt.initialDepth),ce=De/c,ve=de/f;for(let W=0;W<T.length;W+=3){fe[W]=T[W]*ce;const F=T[W+1],ae=(o-F)*ve;fe[W+1]=o-ae,fe[W+2]=T[W+2]}return{cavityGeometry:X,rimGeometry:U,initialPositions:le,contractedPositions:fe}}updateContraction(c){const o=Pt.contractionComplete;let m=0;c>=.35&&(m=Math.min((c-.35)/(o-.35),1));const h=Il(m),S=this.woundCavityMesh.geometry.attributes.position,N=S.array;for(let v=0;v<N.length;v++)N[v]=this.initialPositions[v]+(this.contractedPositions[v]-this.initialPositions[v])*h;S.needsUpdate=!0,this.woundCavityMesh.geometry.computeVertexNormals(),this.updateRimContraction(h),this.updateWoundColors(c)}updateRimContraction(c){const f=this.woundRimMesh.geometry.attributes.position,o=f.array,h=this.options.width*(Pt.finalWidth/Pt.initialWidth)/this.options.width;for(let S=0;S<o.length;S+=3){const N=o[S],v=N*h;o[S]=N+(v-N)*c}f.needsUpdate=!0,this.woundRimMesh.geometry.computeVertexNormals()}updateWoundColors(c){const f=this.woundCavityMesh.material,o=this.woundRimMesh.material;if(c<.1)f.color.setHex(13382451);else if(c<.33){const m=(c-.1)/.23;f.color.lerpColors(new Xe(13382451),new Xe(9109504),m)}else if(c<.66){const m=(c-.33)/.33;f.color.lerpColors(new Xe(9109504),new Xe(16751001),m)}else{const m=(c-.66)/.34;f.color.lerpColors(new Xe(16751001),new Xe(15654348),m)}if(c<.5)o.color.setHex(16755336);else{const m=(c-.5)/.5;o.color.lerpColors(new Xe(16755336),new Xe(16347926),m)}}getWoundBounds(){const c=new Wo;return c.setFromObject(this.group),c}getWoundCenter(){return this.getWoundBounds().getCenter(new Ce)}getCurrentWidth(c){const o=Pt.contractionComplete,m=this.options.width,h=m*(Pt.finalWidth/Pt.initialWidth);if(c<.35)return m;if(c>o)return h;const S=(c-.35)/(o-.35),N=Il(S);return m+(h-m)*N}getCurrentDepth(c){const o=Pt.contractionComplete,m=this.options.depth,h=m*(Pt.finalDepth/Pt.initialDepth);if(c<.35)return m;if(c>o)return h;const S=(c-.35)/(o-.35),N=Il(S);return m+(h-m)*N}getCurrentSpawnBounds(c){const f=this.getCurrentWidth(c),o=this.getCurrentDepth(c),m=f/2,S=this.options.width*1.5/2,N=this.options.position,v=this.options.dermisTop,p=v-o;return new Wo(new Ce(N.x-m,p,N.z-S),new Ce(N.x+m,v,N.z+S))}setVisible(c){this.group.visible=c}setClippingPlanes(c){const f=this.woundCavityMesh.material,o=this.woundRimMesh.material;f.clippingPlanes=c,f.clipShadows=!0,o.clippingPlanes=c,o.clipShadows=!0}dispose(){this.woundCavityMesh.geometry.dispose(),this.woundRimMesh.geometry.dispose(),this.woundCavityMesh.material.dispose(),this.woundRimMesh.material.dispose(),this.group.parent&&this.group.parent.remove(this.group)}}class Vp{constructor(c={}){const{woundWidth:f=Pt.initialWidth,woundDepth:o=Pt.initialDepth,textureSize:m=128}=c;this.group=new ll,this.group.name="ClotMesh",this.fibrinTexture=this.generateFibrinTexture(m),this.material=new _t({map:this.fibrinTexture,color:13369344,roughness:.8,metalness:.1,transparent:!0,alphaTest:.3,side:Jl,depthWrite:!0});const h=this.createClotGeometry(f,o);this.clotMesh=new oa(h,this.material),this.clotMesh.name="ClotSurface",this.clotMesh.position.y=.05,this.group.add(this.clotMesh),this.group.visible=!1}generateFibrinTexture(c){const f=new Uint8Array(c*c*4);for(let m=0;m<c;m++)for(let h=0;h<c;h++){const S=(m*c+h)*4,N=h/c,v=m/c,p=this.fractalNoise(N*8,v*8,4),D=this.fractalNoise(N*12+100,v*12+100,3),T=Math.sin(N*Math.PI*6+p*2)*.5+.5,G=Math.sin(v*Math.PI*8+D*2)*.5+.5,O=(T+G)*.5*.6+p*.4>.35?1:0,xe=.8+D*.2;f[S]=Math.floor(255*xe),f[S+1]=Math.floor(50*xe),f[S+2]=Math.floor(50*xe),f[S+3]=Math.floor(255*O)}const o=new sp(f,c,c,ip);return o.wrapS=Dm,o.wrapT=Dm,o.needsUpdate=!0,o}fractalNoise(c,f,o){let m=0,h=1,S=1,N=0;for(let v=0;v<o;v++)m+=this.noise2D(c*S,f*S)*h,N+=h,h*=.5,S*=2;return m/N}noise2D(c,f){const o=Math.sin(c*12.9898+f*78.233)*43758.5453;return o-Math.floor(o)}createClotGeometry(c,f){const o=c*.5,m=f*.35,h=32,S=8,N=.15,v=[],p=[],D=[];v.push(0,N,0),p.push(.5,.5);for(let G=1;G<=S;G++){const Y=G/S;for(let X=0;X<h;X++){const O=X/h*Math.PI*2,xe=Math.cos(O)*o*Y,Z=Math.sin(O)*m*Y,U=Math.sqrt(Math.max(0,1-Y*Y))*N;v.push(xe,U,Z);const le=(Math.cos(O)*Y+1)/2,fe=(Math.sin(O)*Y+1)/2;p.push(le,fe)}}for(let G=0;G<h;G++){const Y=(G+1)%h;D.push(0,1+G,1+Y)}for(let G=1;G<S;G++){const Y=1+(G-1)*h,X=1+G*h;for(let O=0;O<h;O++){const xe=(O+1)%h,Z=Y+O,me=Y+xe,U=X+O,le=X+xe;D.push(Z,U,me),D.push(me,U,le)}}const T=new Jo;return T.setAttribute("position",new Gs(v,3)),T.setAttribute("uv",new Gs(p,2)),T.setIndex(D),T.computeVertexNormals(),T}update(c){if(c<.02){this.group.visible=!1;return}if(this.group.visible=!0,c<.08){const f=(c-.02)/.06;this.clotMesh.scale.setScalar(Il(f)),this.material.opacity=Il(f)}else this.clotMesh.scale.setScalar(1),this.material.opacity=1;this.updateClotColor(c),this.updateScabRegression(c)}updateClotColor(c){const f=new Xe;if(c<.08)f.setHex(13369344);else if(c<.15){const o=(c-.08)/.07;f.lerpColors(new Xe(13369344),new Xe(9109504),o)}else if(c<.3){const o=(c-.15)/.15;f.lerpColors(new Xe(9109504),new Xe(4849664),o)}else{const o=Math.min((c-.3)/.2,1);f.lerpColors(new Xe(4849664),new Xe(2759178),o)}this.material.color=f}updateScabRegression(c){if(c<.5){this.clotMesh.position.y=.05;return}const f=(c-.5)/.3,o=Math.max(0,1-f*1.2);if(this.clotMesh.scale.setScalar(o),this.clotMesh.position.y=.05+f*.2,c>.65){const m=(c-.65)/.1;this.material.opacity=Math.max(0,1-m)}c>.75&&(this.group.visible=!1)}setClippingPlanes(c){this.material.clippingPlanes=c,this.material.clipShadows=!0}dispose(){this.fibrinTexture.dispose(),this.material.dispose(),this.clotMesh.geometry.dispose()}}class lu{constructor(c,f){this.activeCount=0,this.config=c,this.woundCenter=f,this.particles=[],this.dummy=new Fl;const o=this.createParticleGeometry(),m=new _t({color:c.color,roughness:.4,metalness:.1,transparent:!0,opacity:.9});this.instancedMesh=new Pn(o,m,c.maxParticles),this.instancedMesh.instanceMatrix.setUsage(rp),this.instancedMesh.frustumCulled=!1;for(let h=0;h<c.maxParticles;h++)this.particles.push({position:new Ce,velocity:new Ce,life:0,maxLife:1,active:!1,targetPosition:new Ce,phase:"spawning"}),this.dummy.position.set(0,0,0),this.dummy.scale.setScalar(0),this.dummy.updateMatrix(),this.instancedMesh.setMatrixAt(h,this.dummy.matrix);this.instancedMesh.instanceMatrix.needsUpdate=!0}createParticleGeometry(){return new Ei(this.config.particleSize,8,6)}getSpawnPosition(){const c=this.config.spawnRegion;return new Ce(c.min.x+Math.random()*(c.max.x-c.min.x),c.min.y+Math.random()*(c.max.y-c.min.y),c.min.z+Math.random()*(c.max.z-c.min.z))}spawnParticle(){for(let c=0;c<this.particles.length;c++)if(!this.particles[c].active){const f=this.particles[c];return f.active=!0,f.position.copy(this.getSpawnPosition()),f.velocity.set((Math.random()-.5)*.02,(Math.random()-.5)*.02,(Math.random()-.5)*.02),f.life=0,f.maxLife=.8+Math.random()*.4,f.phase="spawning",f.targetPosition.copy(this.woundCenter),this.activeCount++,c}return null}despawnParticle(c){this.particles[c].active&&(this.particles[c].active=!1,this.activeCount--,this.dummy.position.set(0,0,0),this.dummy.scale.setScalar(0),this.dummy.updateMatrix(),this.instancedMesh.setMatrixAt(c,this.dummy.matrix))}getTargetCount(c){const{arrivalT:f,peakT:o,declineT:m,maxParticles:h}=this.config;if(c<f)return 0;if(c<o){const N=(c-f)/(o-f);return Math.floor(h*Il(N))}if(c<m)return h;const S=(c-m)/(1-m);return Math.floor(h*(1-e0(Math.min(S*2,1))))}update(c,f){const o=this.getTargetCount(c);for(;this.activeCount<o&&this.spawnParticle()!==null;);if(this.activeCount>o){let m=this.activeCount-o;for(let h=this.particles.length-1;h>=0&&m>0;h--)this.particles[h].active&&(this.particles[h].phase="fading",m--)}for(let m=0;m<this.particles.length;m++){const h=this.particles[m];if(!h.active)continue;if(h.life+=f,this.updateParticleBehavior(h,c,f),h.phase==="fading"&&h.life>h.maxLife*.2){this.despawnParticle(m);continue}this.dummy.position.copy(h.position);let S=1;h.phase==="spawning"?(S=Math.min(h.life/.3,1),S>=1&&(h.phase="active")):h.phase==="fading"&&(S=1-h.life/(h.maxLife*.2)),this.dummy.scale.setScalar(S),this.dummy.updateMatrix(),this.instancedMesh.setMatrixAt(m,this.dummy.matrix)}this.instancedMesh.instanceMatrix.needsUpdate=!0}getActiveCount(){return this.activeCount}setClippingPlanes(c){this.instancedMesh.material.clippingPlanes=c}setSpawnRegion(c){this.config.spawnRegion=c.clone()}dispose(){this.instancedMesh.geometry.dispose(),this.instancedMesh.material.dispose()}}class Xp extends lu{constructor(c,f){const o=tu.find(m=>m.type==="platelet");super({maxParticles:au.platelets,particleSize:o.size,color:new Xe(o.color),arrivalT:o.arrivalT,peakT:o.peakT,declineT:o.declineT,spawnRegion:c.clone()},f),this.instancedMesh.name="PlateletSystem"}createParticleGeometry(){const c=new Yr(this.config.particleSize,this.config.particleSize,this.config.particleSize*.3,8);return c.rotateX(Math.random()*Math.PI),c}updateParticleBehavior(c,f,o){const h=Math.atan2(c.position.z-this.woundCenter.z,c.position.x-this.woundCenter.x),S=this.woundCenter.x+Math.cos(h)*.4,N=this.woundCenter.z+Math.sin(h)*.4,v=this.woundCenter.y+.1;c.velocity.x+=(S-c.position.x)*.02*o,c.velocity.z+=(N-c.position.z)*.02*o,c.velocity.y+=(v-c.position.y)*.03*o,c.velocity.x+=(Math.random()-.5)*.001,c.velocity.z+=(Math.random()-.5)*.001,c.velocity.multiplyScalar(.98),c.position.add(c.velocity)}}class Zp extends lu{constructor(c,f){const o=tu.find(h=>h.type==="neutrophil"),m=c.clone().expandByScalar(1.5);super({maxParticles:au.neutrophils,particleSize:o.size,color:new Xe(o.color),arrivalT:o.arrivalT,peakT:o.peakT,declineT:o.declineT,spawnRegion:m},f),this.instancedMesh.name="NeutrophilSystem"}getSpawnPosition(){const c=Math.random()*Math.PI*2,f=1.2+Math.random()*.5,o=-.5+Math.random()*.8;return new Ce(this.woundCenter.x+Math.cos(c)*f,this.woundCenter.y+o,this.woundCenter.z+Math.sin(c)*f)}updateParticleBehavior(c,f,o){const m=new Ce().subVectors(this.woundCenter,c.position);m.length()>.1?(m.normalize(),c.velocity.add(m.multiplyScalar(.03*o)),c.velocity.x+=(Math.random()-.5)*.02*o,c.velocity.z+=(Math.random()-.5)*.02*o,c.velocity.y+=(Math.random()-.5)*.01*o):(c.velocity.x+=(Math.random()-.5)*.03*o,c.velocity.z+=(Math.random()-.5)*.03*o),c.velocity.multiplyScalar(.95);const S=.015;c.velocity.length()>S&&c.velocity.normalize().multiplyScalar(S),c.position.add(c.velocity),c.position.y=Math.max(this.woundCenter.y-1.5,Math.min(this.woundCenter.y+.3,c.position.y))}}class Kp extends lu{constructor(c,f){const o=tu.find(h=>h.type==="macrophage"),m=c.clone().expandByScalar(1);super({maxParticles:au.macrophages,particleSize:o.size,color:new Xe(o.color),arrivalT:o.arrivalT,peakT:o.peakT,declineT:o.declineT,spawnRegion:m},f),this.phagocytosisTargets=new Map,this.instancedMesh.name="MacrophageSystem"}getSpawnPosition(){const c=Math.random()*Math.PI*2,f=1+Math.random()*.3,o=-.8+Math.random()*.6;return new Ce(this.woundCenter.x+Math.cos(c)*f,this.woundCenter.y+o,this.woundCenter.z+Math.sin(c)*f)}updateParticleBehavior(c,f,o){const m=this.particles.indexOf(c);this.phagocytosisTargets.has(m)||this.phagocytosisTargets.set(m,new Ce(this.woundCenter.x+(Math.random()-.5)*.8,this.woundCenter.y-.3-Math.random()*.5,this.woundCenter.z+(Math.random()-.5)*.8));const h=this.phagocytosisTargets.get(m),S=new Ce().subVectors(h,c.position);S.length()<.1?this.phagocytosisTargets.set(m,new Ce(this.woundCenter.x+(Math.random()-.5)*.8,this.woundCenter.y-.3-Math.random()*.5,this.woundCenter.z+(Math.random()-.5)*.8)):(S.normalize(),c.velocity.add(S.multiplyScalar(.015*o))),c.velocity.y+=Math.sin(c.life*8)*.001,c.velocity.multiplyScalar(.92);const v=.008;c.velocity.length()>v&&c.velocity.normalize().multiplyScalar(v),c.position.add(c.velocity)}}class Fp{constructor(c){this.vessels=[],this.normalVesselColor=new Xe(10030850),this.dilatedVesselColor=new Xe(16724787),this.sprouts=[],this.woundCenter=c.woundCenter,this.woundRadius=c.woundRadius,this.sproutGroup=new ll,this.sproutGroup.name="AngiogenesisSprouts"}registerVessels(c){this.vessels=c.map(f=>{const o=new Wo().setFromObject(f),m=new Ce;o.getCenter(m);const h=m.distanceTo(this.woundCenter),S=h<this.woundRadius*3,N=f.material,v=N.color?N.color.clone():this.normalVesselColor.clone(),p=f.scale.clone();return{mesh:f,baseScale:p,baseColor:v,distanceFromWound:h,isNearWound:S}})}update(c){this.updateVasodilation(c),this.updateAngiogenesis(c),this.updateRegression(c)}updateVasodilation(c){let f=1;if(c<.05)f=1+Il(c/.05)*.5;else if(c<.3)f=1.5;else if(c<.5){const h=(c-.3)/.2;f=1.5-e0(h)*.5}else f=1;const o=new Xe,m=Math.max(0,(f-1)/.5);o.lerpColors(this.normalVesselColor,this.dilatedVesselColor,m),this.vessels.forEach(h=>{if(!h.isNearWound)return;const S=1-h.distanceFromWound/(this.woundRadius*3),N=1+(f-1)*S;h.mesh.scale.set(h.baseScale.x*N,h.baseScale.y*N,h.baseScale.z);const v=h.mesh.material;v.color&&v.color.copy(h.baseColor).lerp(o,S*m)})}updateAngiogenesis(c){if(c<.3){this.sproutGroup.visible=!1;return}this.sproutGroup.visible=!0;const f=Math.min((c-.3)/.25,1);this.sprouts.length===0&&f>0&&this.createVesselSprouts(),this.sprouts.forEach((o,m)=>{const h=m*.05,S=Math.max(0,f-h);if(S>0){o.visible=!0,o.scale.z=Il(Math.min(S*3,1));const N=1+Math.sin(c*10+m)*.05;o.scale.x=o.scale.y=N}else o.visible=!1})}createVesselSprouts(){const f=new _t({color:16724787,roughness:.5,transparent:!0,opacity:.8});for(let o=0;o<6;o++){const m=o/6*Math.PI*2,h=this.woundRadius*.8,S=new Ce(this.woundCenter.x+Math.cos(m)*h,this.woundCenter.y-.5,this.woundCenter.z+Math.sin(m)*h),N=new Ce(this.woundCenter.x+Math.cos(m)*h*.5,this.woundCenter.y-.3,this.woundCenter.z+Math.sin(m)*h*.5),v=new Ce(this.woundCenter.x,this.woundCenter.y-.1,this.woundCenter.z),p=new Us([S,N,v]),D=new Bs(p,12,.02,6,!1),T=new oa(D,f.clone());T.name=`VesselSprout_${o}`,T.visible=!1,this.sprouts.push(T),this.sproutGroup.add(T)}}updateRegression(c){if(c<.66){this.sprouts.forEach(o=>{const m=o.material;m.opacity=.8});return}const f=Math.min((c-.66)/.25,1);this.sprouts.forEach((o,m)=>{const h=m*.02,S=Math.max(0,f-h),N=o.material;N.opacity=Math.max(0,.8*(1-S));const v=Math.max(0,1-S),p=1+Math.sin(c*10+m)*.05;o.scale.set(p*v,p*v,Il(1)*v)})}getSproutGroup(){return this.sproutGroup}setClippingPlanes(c){this.vessels.forEach(f=>{const o=f.mesh.material;o.clippingPlanes=c}),this.sprouts.forEach(f=>{const o=f.material;o.clippingPlanes=c})}dispose(){this.sprouts.forEach(c=>{c.geometry.dispose(),c.material.dispose()}),this.sprouts=[],this.vessels=[]}}const t0={epidermisThickness:Va.epidermisThicknessMm*Tn,papillaryHeight:Va.papillaryDermisHeightMm*Tn,dermisThickness:Va.dermisThicknessMm*Tn,hypodermisThickness:Va.hypodermisThicknessMm*Tn,flakeCount:400,keratinocyteCount:800,collagenFiberCount:800,adipocyteCount:200};function Ti(u,c,f=1){const o=ts.find(v=>v.id===u),m=t0,h={...m},S=((c==null?void 0:c.instanceMultiplier)??1)*f;if(h.flakeCount=Math.round(m.flakeCount*S),h.keratinocyteCount=Math.round(m.keratinocyteCount*S),h.collagenFiberCount=Math.round(m.collagenFiberCount*S),h.adipocyteCount=Math.round(m.adipocyteCount*S),!o)return h;const N=o.parameterOverrides;return N.epidermisThicknessFactor!==void 0&&(h.epidermisThickness=m.epidermisThickness*N.epidermisThicknessFactor),N.stratumCorneumFlakeDensityFactor!==void 0&&(h.flakeCount=Math.round(h.flakeCount*N.stratumCorneumFlakeDensityFactor)),N.keratinocyteSizeFactor!==void 0&&(h.keratinocyteCount=Math.round(h.keratinocyteCount*N.keratinocyteSizeFactor)),N.dermalCollagenDensityFactor!==void 0&&(h.collagenFiberCount=Math.round(h.collagenFiberCount*N.dermalCollagenDensityFactor)),N.inflammationClusterDensity,h}const Qr=x.forwardRef(({explodeValue:u,visibility:c,onSelectStructure:f,onHoverStructure:o,diseaseId:m,timelineId:h,timelineT:S,zoomLevelId:N,activeTourId:v,activeTourStepIndex:p,clippingNormalized:D,autoRotate:T=!1,palette:G="clinical",phototype:Y=3,uvState:X=$o,hydration:O=.6,phValue:xe=Po.value,collagenReduced:Z,onLoadingChange:me,cutawayEnabled:U=!1},le)=>{const fe=x.useRef(null),[De,de]=x.useState(!0);x.useEffect(()=>{me==null||me(De,De?50:100)},[De,me]);const ce=x.useRef(null),ve=x.useRef(null),W=x.useRef(null),F=x.useRef(null),he=x.useRef(o);x.useEffect(()=>{he.current=o},[o]),x.useImperativeHandle(le,()=>({resetView:()=>{const k=ve.current,q=F.current;if(!k||!q)return;const V=Mn.find(ne=>ne.id==="macro");if(!V)return;const I=new Ce(...V.camera.position),ie=new Ce(...V.camera.target),J=k.position.clone(),K=q.target.clone(),te=600,$=Date.now(),P=()=>{const ne=Date.now()-$,Ge=Math.min(ne/te,1),bt=1-Math.pow(1-Ge,3);k.position.lerpVectors(J,I,bt),q.target.lerpVectors(K,ie,bt),q.update(),Ge<1&&requestAnimationFrame(P)};P()},captureScreenshot:()=>{const k=W.current,q=ce.current,V=ve.current;return!k||!q||!V?null:(k.render(q,V),k.domElement.toDataURL("image/png"))},getRenderer:()=>W.current,setAnchorScale:k=>{const q=dt.current;q&&(q.scale.setScalar(k),q.updateMatrixWorld(!0))},resetAnchor:()=>{const k=dt.current;k&&(k.position.set(0,0,0),k.quaternion.identity(),k.updateMatrixWorld(!0))}}),[]);const ae=x.useRef(null),we=x.useRef(null),Pe=x.useRef(null),A=x.useRef(null),B=x.useRef({hair:null,sweat:null,collagen:null,nerves:null,vessels:[]}),oe=x.useRef(null),Re=x.useRef(null),Te=x.useRef(null),y=x.useRef(t0.collagenFiberCount),_=x.useRef(null),Q=x.useRef(null),ee=x.useRef(null),pe=x.useRef([]),Se=x.useRef("clinical"),Ne=x.useRef(null),Je=x.useRef(null);x.useRef(null);const ye=x.useRef(null),Qt=x.useRef(null),Le=x.useRef(null),Ft=x.useRef(null),Mt=x.useRef(null),st=x.useRef(null),qt=x.useRef(null),it=x.useRef(null),nl=x.useRef(performance.now()),We=x.useRef(null),dt=x.useRef(null),sl=x.useRef(!1),gl=x.useRef(null),xl=x.useRef(null),Ml=x.useRef(null),Tt=x.useRef(null),Jt=x.useRef(null),En=x.useRef(h),Da=x.useRef(S),ua=x.useRef($o),An=x.useRef(Po),zn=x.useRef(Va.skinPatchWidthMm*Tn),_n=x.useRef(Va.skinPatchDepthMm*Tn);x.useEffect(()=>{En.current=h,Da.current=S},[h,S]),x.useEffect(()=>{ua.current=X},[X]),x.useEffect(()=>{An.current={value:xe}},[xe]),x.useEffect(()=>{if(G&&Se.current!==G){Se.current=G;const k=Mi(N),q=Ti(m,k,sl.current?.6:1);Al(),il(q),Ra(u)}},[G]);const ga=x.useRef({}),xa=x.useRef(null),lt=x.useRef(f),Ca=x.useRef(new Rm),Vt=x.useRef(new Om);x.useEffect(()=>{lt.current=f},[f]);const $l=x.useCallback((k,q)=>{var ie,J,K,te;if(!W.current||!ve.current||!ce.current)return null;const V=W.current.domElement.getBoundingClientRect();Vt.current.x=(k-V.left)/V.width*2-1,Vt.current.y=-((q-V.top)/V.height)*2+1,Ca.current.setFromCamera(Vt.current,ve.current);const I=Ca.current.intersectObjects(ce.current.children,!0);for(const $ of I){const P=$.object,ne=((ie=P.userData)==null?void 0:ie.type)||((J=P.userData)==null?void 0:J.parentType)||((te=(K=P.parent)==null?void 0:K.userData)==null?void 0:te.type);if(ne)return ne}return null},[]),Dn=x.useCallback((k,q)=>{var ie,J,K,te;if(!ce.current)return null;const V=Ca.current;V.ray.origin.copy(k),V.ray.direction.copy(q).normalize();const I=V.intersectObjects(ce.current.children,!0);for(const $ of I){const P=$.object,ne=((ie=P.userData)==null?void 0:ie.type)||((J=P.userData)==null?void 0:J.parentType)||((te=(K=P.parent)==null?void 0:K.userData)==null?void 0:te.type);if(ne)return ne}return null},[]),as=x.useCallback((k,q)=>{var I;const V=$l(k,q);(I=lt.current)==null||I.call(lt,V??null)},[$l]),Tl=x.useCallback(()=>{const k=ve.current,q=F.current;if(!k||!q)return;const V=Mn.find(ne=>ne.id==="macro");if(!V)return;const I=new Ce(...V.camera.position),ie=new Ce(...V.camera.target),J=k.position.clone(),K=q.target.clone(),te=600,$=Date.now(),P=()=>{const ne=Date.now()-$,Ge=Math.min(ne/te,1),bt=1-Math.pow(1-Ge,3);k.position.lerpVectors(J,I,bt),q.target.lerpVectors(K,ie,bt),q.update(),Ge<1&&requestAnimationFrame(P)};P()},[]),El=x.useCallback((k,q)=>{var I;const V=$l(k,q);V&&((I=he.current)==null||I.call(he,V,k,q),setTimeout(()=>{var ie;(ie=he.current)==null||ie.call(he,null,0,0)},2e3))},[$l]),Pl=Up({onTap:as,onDoubleTap:Tl,onLongPress:El}),rt=k=>{const q=Ne.current;return q&&(k.clippingPlanes=[q],k.clipShadows=!0),pe.current.push(k),k},yl=x.useCallback((k,q,V)=>{const I=B.current.collagen;if(!I)return;const ie=I.material,J=y.current||I.count||I.instanceMatrix.count,te=.15+ha.clamp(V,0,1)*.2;k?(I.count=Math.max(50,Math.round(J*.35)),ie.opacity=q==="wound_healing"?Math.min(te,.25):.35,ie.transparent=!0):(I.count=J,q==="wound_healing"?(ie.opacity=te,ie.transparent=!0):(ie.opacity=1,ie.transparent=!1)),I.instanceMatrix.needsUpdate=!0},[]),bl=x.useCallback((k,q,V,I)=>{const ie=oe.current,J=Re.current,K=_.current;if(!ie||!J)return;const{positions:te,scales:$,fullScales:P,count:ne,epiHeight:Ge}=J,bt=ye.current?ye.current.getCurrentWidth(k)/2:.75,Ve=bt*1.5,da=.25,H=.65,je=.45,Dt=.85,ea=ha.clamp((k-da)/(H-da),0,1),ya=ha.clamp((k-je)/(Dt-je),0,1),pt=new Fl,vt=K??new Float32Array(ne),ct=1+(An.current.value-5.5)*.08,vl=Bp*(1-.25*(V-.5))/ct,Xt=Ko.basal,Wt=Xt+Ko.spinous,wa=Wt+Ko.granular;for(let ot=0;ot<ne;ot++){if(vt.length===ne&&vl>0){let St=vt[ot]+I/vl;St>=1&&(St=St%1,te[ot*3]=(Math.random()-.5)*(zn.current*.9),te[ot*3+1]=-Ge/2+Math.random()*(Ge*.15),te[ot*3+2]=(Math.random()-.5)*(_n.current*.9)),vt[ot]=St}const Rt=vt.length===ne?vt[ot]:Math.random(),Xa=Rt<Xt?0:Rt<Wt?1:Rt<wa?2:3,ba=te[ot*3],Ot=te[ot*3+1],Oa=te[ot*3+2],fa=$[ot],Lt=P[ot],rl=ba/(bt*1.25),cl=Oa/(Ve*1.25),ol=Math.abs(rl)<=1&&Math.abs(cl)<=1;let ke=ba,He=Oa,ze=Ot,Ee=fa;ol&&(ke=ha.lerp(ba,0,ea*.85),He=ha.lerp(Oa,0,ea*.85),ze=ha.lerp(Ot,Ge*.3,ea*.6),Ee=ha.lerp(fa,Lt,ya)),Ee=ol?Ee:Lt*(.85+.25*ya);const kt=Rt*Ge*.4;ze=ha.clamp(ze+kt,-Ge/2,Ge/2),Rt>.8&&(Ee*=ha.lerp(1,.6,(Rt-.8)/.2));let Ht=1;Xa===2&&(Ht=1.05),Xa===3&&(Ht=.92),pt.position.set(ke,ze,He),pt.rotation.set(0,0,0);const Zt=1+q*.08;pt.scale.set(Ee*Zt*Ht,Ee*Zt*Ht,Ee*Zt*Ht),pt.updateMatrix(),ie.setMatrixAt(ot,pt.matrix)}if(ie.instanceMatrix.needsUpdate=!0,_.current&&_.current!==vt&&(_.current=vt),Te.current){const ot=ha.lerp(.35,.9,ya)*(.9-.2*(1-V));Te.current.opacity=ot,Te.current.transparent=!0}if(Q.current){const ot=ha.clamp(q*.6,.02,.6),Rt=new Fl,Xa=Q.current.count;for(let ba=0;ba<Xa;ba++)Q.current.getMatrixAt(ba,Rt.matrix),Rt.scale.setScalar(ot),Rt.updateMatrix(),Q.current.setMatrixAt(ba,Rt.matrix);Q.current.instanceMatrix.needsUpdate=!0}},[]),Al=()=>{[ae.current,we.current,Pe.current].forEach(q=>{if(q)for(q.traverse(V=>{const I=V;(I.isMesh||I.isInstancedMesh)&&(I.geometry&&I.geometry.dispose(),I.material&&(Array.isArray(I.material)?I.material.forEach(ie=>ie.dispose()):I.material.dispose()))});q.children.length;)q.remove(q.children[0])}),pe.current=[],B.current={hair:null,sweat:null,collagen:null,nerves:null,vessels:[]},oe.current=null,Re.current=null,Te.current=null,ga.current={}},il=k=>{const q=ae.current,V=we.current,I=Pe.current;if(!q||!V||!I)return;const ie=Va.skinPatchWidthMm*Tn,J=Va.skinPatchDepthMm*Tn,K=k.epidermisThickness,te=Math.min(k.papillaryHeight,k.dermisThickness*.5),$=k.dermisThickness,P=k.hypodermisThickness,ne=0,Ge=$/2+K/2,bt=-$/2-P/2;q.position.set(0,Ge,0),V.position.set(0,ne,0),I.position.set(0,bt,0),A.current={epidermis:Ge,dermis:ne,hypodermis:bt};const Ve=Br[Se.current],da=rt(new _t({color:Ve.epidermis.color,roughness:Ve.epidermis.roughness,metalness:Ve.epidermis.metalness,transparent:!0,opacity:Ve.epidermis.opacity??.35,transmission:Ve.epidermis.transmission??0,thickness:Ve.epidermis.thickness??.5,side:Jl,depthWrite:!1})),H={woundCenter:{value:new Ce(0,0,0)},woundHalfWidth:{value:.75},woundHalfLength:{value:.6},woundFalloff:{value:.1},reliefScale:{value:.08},reliefFreq:{value:8}};da.userData.woundUniforms=H,da.onBeforeCompile=se=>{se.uniforms.woundCenter=H.woundCenter,se.uniforms.woundHalfWidth=H.woundHalfWidth,se.uniforms.woundHalfLength=H.woundHalfLength,se.uniforms.woundFalloff=H.woundFalloff,se.uniforms.reliefScale=H.reliefScale,se.uniforms.reliefFreq=H.reliefFreq,se.vertexShader=se.vertexShader.replace("varying vec3 vViewPosition;",`varying vec3 vViewPosition;
varying vec3 vWorldPosition;`).replace("#include <worldpos_vertex>",`#include <worldpos_vertex>
  vWorldPosition = worldPosition.xyz;`),se.fragmentShader=se.fragmentShader.replace("void main() {",`varying vec3 vWorldPosition;
           uniform vec3 woundCenter;
           uniform float woundHalfWidth;
           uniform float woundHalfLength;
           uniform float woundFalloff;
           uniform float reliefScale;
           uniform float reliefFreq;
           void main() {`).replace("#include <alphatest_fragment>",`
            vec2 d = vec2(
              (vWorldPosition.x - woundCenter.x) / woundHalfWidth,
              (vWorldPosition.z - woundCenter.z) / woundHalfLength
            );
            float r = length(d); // 0 center, 1 rim
            float hole = smoothstep(1.0 - woundFalloff, 1.0, r);
            // Micro-relief (simple sinusoidal along Langer-like direction X)
            float relief = sin(vWorldPosition.x * reliefFreq) * cos(vWorldPosition.z * reliefFreq) * reliefScale;
            // Slight normal perturbation via rough alpha adjustment
            float reliefMask = 1.0 + relief * 0.15;
            diffuseColor.a *= hole;
            diffuseColor.rgb *= reliefMask;
          #include <alphatest_fragment>`)},da.needsUpdate=!0;const je=new Ur(ie,K,J),Dt=new oa(je,da);Qt.current=da,Dt.receiveShadow=!0,Dt.castShadow=!1,Dt.userData.type="epidermis",q.add(Dt);const ea=new Yr(.25,.25,.05,6),ya=rt(new _t({color:16710083,roughness:.6,metalness:0,transparent:!0,opacity:.9}));Te.current=ya;const pt=new Pn(ea,ya,k.flakeCount);pt.castShadow=!1,pt.receiveShadow=!1,pt.userData.type="stratum_corneum",ga.current.stratum_corneum=pt;const vt=new Fl;for(let se=0;se<k.flakeCount;se++){vt.position.set((Math.random()-.5)*ie,K/2*.9+Math.random()*.2,(Math.random()-.5)*J),vt.rotation.set(0,Math.random()*Math.PI*2,0);const Oe=.7+Math.random()*.5;vt.scale.set(Oe,Oe,Oe),vt.updateMatrix(),pt.setMatrixAt(se,vt.matrix)}pt.instanceMatrix.needsUpdate=!0,q.add(pt);const ct=new cp(.25,0),vl=rt(new _t({color:16764848,roughness:.4,metalness:0,transmission:.2,thickness:.5})),Xt=new Pn(ct,vl,k.keratinocyteCount);Xt.castShadow=!0,Xt.receiveShadow=!0,Xt.userData.type="keratinocytes",ga.current.keratinocytes=Xt,oe.current=Xt;const Wt=new Float32Array(k.keratinocyteCount*3),wa=new Float32Array(k.keratinocyteCount),ot=new Float32Array(k.keratinocyteCount),Rt=new Float32Array(k.keratinocyteCount);new Uint8Array(k.keratinocyteCount);const Xa=Pt.initialWidth/2,ba=Xa*1.5,Ot=new Fl;for(let se=0;se<k.keratinocyteCount;se++){const Oe=Math.random(),xt=-K/2+Oe*K*.9,ut=(Math.random()-.5)*(ie*.9),ft=(Math.random()-.5)*(J*.9);Ot.position.set(ut,xt,ft);const It=.7+Oe*.4,Ct=Math.abs(ut)<Xa&&Math.abs(ft)<ba?It*(.2+Math.random()*.2):It;Ot.scale.set(Ct,Ct,Ct),Ot.rotation.set(Math.random()*Math.PI,Math.random()*Math.PI,Math.random()*Math.PI),Ot.updateMatrix(),Xt.setMatrixAt(se,Ot.matrix),Wt[se*3]=Ot.position.x,Wt[se*3+1]=Ot.position.y,Wt[se*3+2]=Ot.position.z,wa[se]=Ct,ot[se]=It,Rt[se]=Math.random()}Xt.instanceMatrix.needsUpdate=!0,Re.current={positions:Wt,scales:wa,fullScales:ot,count:k.keratinocyteCount,epiHeight:K},_.current=Rt,q.add(Xt);const Oa=new Ei(.18,8,6),fa=rt(new _t({color:3878703,roughness:.5,metalness:0,transparent:!0,opacity:.9})),Lt=80,rl=new Pn(Oa,fa,Lt),cl=new Fl;for(let se=0;se<Lt;se++){cl.position.set((Math.random()-.5)*(ie*.85),-K/2+.05,(Math.random()-.5)*(J*.85));const Oe=.9+Math.random()*.2;cl.scale.set(Oe,Oe,Oe),cl.updateMatrix(),rl.setMatrixAt(se,cl.matrix)}rl.instanceMatrix.needsUpdate=!0,ee.current=rl,q.add(rl);const ol=new Ei(.08,6,4),ke=rt(new _t({color:1973019,roughness:.3,metalness:0,transparent:!0,opacity:.85})),He=200,ze=new Pn(ol,ke,He),Ee=new Fl;for(let se=0;se<He;se++)Ee.position.set((Math.random()-.5)*(ie*.7),-K/2+Math.random()*(K*.4),(Math.random()-.5)*(J*.7)),Ee.scale.setScalar(.01),Ee.updateMatrix(),ze.setMatrixAt(se,Ee.matrix);ze.instanceMatrix.needsUpdate=!0,Q.current=ze,q.add(ze);const kt=rt(new _t({color:Ve.papillary.color,roughness:Ve.papillary.roughness,metalness:Ve.papillary.metalness,transparent:!0,opacity:Ve.papillary.opacity??.28,side:Jl,depthWrite:!1})),Ht=new Ur(ie,te,J,20,1,20),Zt=Ht.attributes.position,St=Zt.array;for(let se=0;se<St.length;se+=3){const Oe=St[se+1];if(Math.abs(Oe-te/2)<1e-4){const xt=St[se]/(ie/2),ut=St[se+2]/(J/2),ft=(Math.sin(xt*Math.PI*2)*Math.cos(ut*Math.PI*2)+Math.sin((xt+ut)*3))*.12,It=Math.exp(-((xt*xt+ut*ut)*.8));St[se+1]=Oe+te*.35*It+te*.2*ft}}Zt.needsUpdate=!0,Ht.computeVertexNormals();const va=new oa(Ht,kt);va.position.y=$/2-te/2,va.receiveShadow=!0,va.castShadow=!1,va.userData.type="dermis_papillary",V.add(va);const gt=$-te,Et=rt(new _t({color:Ve.reticular.color,roughness:Ve.reticular.roughness,metalness:Ve.reticular.metalness,transparent:!0,opacity:Ve.reticular.opacity??.25,side:Jl,depthWrite:!1})),ul=new Ur(ie,gt,J),Sa=new oa(ul,Et);Sa.position.y=-te/2,Sa.receiveShadow=!0,Sa.castShadow=!1,Sa.userData.type="dermis_reticular",V.add(Sa);const ls=new Yr(.05,.05,.9,6),ta=rt(new _t({color:Ve.collagen.color,roughness:Ve.collagen.roughness,metalness:Ve.collagen.metalness}));y.current=k.collagenFiberCount;const aa=new Pn(ls,ta,k.collagenFiberCount);aa.castShadow=!0,aa.receiveShadow=!0,aa.userData.type="collagen",ga.current.collagen=aa,B.current.collagen=aa;const La=new Fl;for(let se=0;se<k.collagenFiberCount;se++){const Oe=Math.random()<.25,xt=Oe?te:$-te,ut=Oe?$/2-te/2:-te/2;La.position.set((Math.random()-.5)*ie,ut+(Math.random()-.5)*xt,(Math.random()-.5)*J),Oe?La.rotation.set(Math.random()*Math.PI*.25,Math.random()*Math.PI,Math.random()*Math.PI*.25):La.rotation.set(Math.random()*Math.PI*.15,Math.random()*Math.PI,Math.random()*Math.PI*.15);const ft=Oe?.6+Math.random()*.2:1+Math.random()*.6;La.scale.set(1,ft,1),La.updateMatrix(),aa.setMatrixAt(se,La.matrix)}aa.instanceMatrix.needsUpdate=!0,V.add(aa);const la=new ll;la.userData.type="sweat_gland",ga.current.sweat_gland=la,B.current.sweat=la;const Na=rt(new _t({color:Ve.sweat.color,roughness:Ve.sweat.roughness,metalness:Ve.sweat.metalness,transparent:!0,opacity:Ve.sweat.opacity??.9})),ka=(se,Oe)=>{const xt=[];for(let ma=0;ma<30;ma++){const na=ma*.5,Sl=Math.cos(na)*.3+se,Dl=-$/2+ma*($/60),Hn=Math.sin(na)*.3+Oe;xt.push(new Ce(Sl,Dl,Hn))}const ut=xt[xt.length-1],ft=new Ce(ut.x,$/2+K*.2,ut.z);xt.push(new Ce(ut.x,ut.y+.4,ut.z),ft);const It=new Us(xt),fl=new Bs(It,80,.06,8,!1),Ct=new oa(fl,Na);Ct.castShadow=!0,Ct.receiveShadow=!0,Ct.userData.parentType="sweat_gland",la.add(Ct)};ka(-1.2,-.5),ka(1,.7),V.add(la);const Ma=new ll;Ma.userData.type="hair_follicle",ga.current.hair_follicle=Ma,B.current.hair=Ma;const en=rt(new _t({color:Ve.hair.color,roughness:Ve.hair.roughness,metalness:Ve.hair.metalness})),tn=rt(new _t({color:988970,roughness:.5,metalness:.1})),_i=rt(new _t({color:8330525,roughness:.4,metalness:.1})),Rn=(se,Oe)=>{const xt=-$/2+.4,ut=new Ei(.25,16,16),ft=new oa(ut,tn);ft.position.set(se,xt,Oe),ft.castShadow=!0,ft.receiveShadow=!0,ft.userData.parentType="hair_follicle",Ma.add(ft);const It=new Us([new Ce(se,xt,Oe),new Ce(se+.1,0,Oe),new Ce(se+.1,$/2+K,Oe)]),fl=new Bs(It,60,.05,8,!1),Ct=new oa(fl,en);Ct.castShadow=!0,Ct.receiveShadow=!0,Ct.userData.parentType="hair_follicle",Ma.add(Ct);const ma=new Yr(.04,.04,.9,8),na=new oa(ma,_i);na.position.set(se-.4,xt+.3,Oe),na.rotation.z=-.7,na.castShadow=!0,na.receiveShadow=!0,na.userData.parentType="hair_follicle",Ma.add(na)};Rn(-.8,-.3),Rn(.2,.5),Rn(1.2,-.6),V.add(Ma);const On=new ll;On.userData.type="blood_vessels";const Ln=rt(new _t({color:10030850,roughness:.6,metalness:.1,transparent:!0,opacity:.9})),Za=[],ns=se=>{const Oe=[new Ce(-ie/2,se,-J/3),new Ce(-ie/4,se+.2,0),new Ce(ie/4,se-.1,J/4),new Ce(ie/2,se,J/3)],xt=new Us(Oe),ut=new Bs(xt,80,.08,12,!1),ft=new oa(ut,Ln);ft.castShadow=!0,ft.receiveShadow=!0,ft.userData.parentType="blood_vessels",On.add(ft),Za.push(ft)};ns(-.6),ns(.3),V.add(On),B.current.vessels=Za,ga.current.blood_vessels=On;const Ka=new ll;Ka.userData.type="nerves",ga.current.nerves=Ka,B.current.nerves=Ka;const dl=rt(new _t({color:16498468,roughness:.3,metalness:.1,transparent:!0,opacity:.85})),kn=(se,Oe,xt)=>{const ut=[];for(let ma=0;ma<=20;ma++){const na=ma/20,Sl=-$/2-P*.3+na*($+P*.3+xt),Dl=Math.sin(na*Math.PI*3)*.1,Hn=Math.cos(na*Math.PI*2)*.1;ut.push(new Ce(se+Dl,Sl,Oe+Hn))}const It=new Us(ut),fl=new Bs(It,40,.03,6,!1),Ct=new oa(fl,dl);Ct.castShadow=!0,Ct.receiveShadow=!0,Ct.userData.parentType="nerves",Ka.add(Ct);for(let ma=0;ma<3;ma++){const na=.4+ma*.2,Sl=It.getPoint(na),Dl=new Ce(Sl.x+(Math.random()-.5)*.8,Sl.y+.3,Sl.z+(Math.random()-.5)*.8),Hn=new Us([Sl,Dl]),qr=new Bs(Hn,10,.015,4,!1),Oi=new oa(qr,dl);Oi.userData.parentType="nerves",Ka.add(Oi)}};kn(-1.5,0,K*.3),kn(.5,-1,K*.2),kn(1.5,.8,K*.4),V.add(Ka);const ss=rt(new _t({color:16774338,roughness:.4,metalness:0,transparent:!0,opacity:.4,side:Jl,depthWrite:!1})),Di=new Ur(ie,P,J),_l=new oa(Di,ss);_l.receiveShadow=!0,_l.castShadow=!1,_l.userData.type="hypodermis",I.add(_l);const is=rt(new _t({color:16771899,roughness:.1,metalness:0,clearcoat:1,clearcoatRoughness:.2,transparent:!0,opacity:.95})),Ri=new Ei(.35,16,16),jt=new Pn(Ri,is,k.adipocyteCount);jt.castShadow=!0,jt.receiveShadow=!0,jt.userData.type="adipose",ga.current.adipose=jt;const Fa=new Fl;for(let se=0;se<k.adipocyteCount;se++){Fa.position.set((Math.random()-.5)*ie*.9,(Math.random()-.5)*P*.8,(Math.random()-.5)*J*.9);const Oe=.8+Math.random()*.5;Fa.scale.set(Oe,Oe,Oe),Fa.updateMatrix(),jt.setMatrixAt(se,Fa.matrix)}jt.instanceMatrix.needsUpdate=!0,I.add(jt)},Ra=k=>{const q=A.current;if(!q)return;const V=ae.current,I=we.current,ie=Pe.current,J=k*3;V&&(V.position.y=q.epidermis+J),I&&(I.position.y=q.dermis),ie&&(ie.position.y=q.hypodermis-J)},zl=(k,q)=>{const V=ga.current,I=(ie,J)=>{const K=te=>{if(!te.material)return;(Array.isArray(te.material)?te.material:[te.material]).forEach(P=>{!P||!P.color||(J==="restore"?P.userData&&P.userData.originalColor&&P.color.copy(P.userData.originalColor):(P.userData||(P.userData={}),P.userData.originalColor||(P.userData.originalColor=P.color.clone()),P.color.offsetHSL(0,.1,.15)))})};K(ie),ie.traverse(te=>{te!==ie&&K(te)})};k&&V[k]&&I(V[k],"restore"),q&&V[q]&&I(V[q],"highlight")};return x.useEffect(()=>{if(!fe.current||ce.current)return;const k=new op;k.background=new Xe(988970),k.fog=new up(988970,.02),ce.current=k;const q=new ll;q.name="AnchorGroup",k.add(q),dt.current=q;const V=fe.current,I=V.clientWidth||window.innerWidth,ie=V.clientHeight||window.innerHeight,J=new dp(50,I/ie,.1,100);ve.current=J;const K=new fp({antialias:!0,alpha:!0});K.setPixelRatio(Math.min(window.devicePixelRatio,2)),K.setSize(I,ie),K.shadowMap.enabled=!0,K.shadowMap.type=mp,K.outputColorSpace=hp,K.toneMapping=pp,K.toneMappingExposure=1,K.localClippingEnabled=!0,W.current=K,fe.current.appendChild(K.domElement);const te=new Cp(J,K.domElement);te.enableDamping=!0,te.dampingFactor=.05,te.enablePan=!0,te.enableZoom=!0,te.enableRotate=!0,te.panSpeed=1,te.zoomSpeed=1.2,te.rotateSpeed=.8,te.minDistance=2,te.maxDistance=25,te.maxPolarAngle=Math.PI/1.5,F.current=te;const $=Mn.find(ke=>ke.id==="macro");$?(J.position.fromArray($.camera.position),te.target.fromArray($.camera.target),te.update()):(J.position.set(8,6,8),te.target.set(0,0,0),te.update());const P=new gp(16777215,.4);k.add(P);const ne=new xp(16777215,1.4);ne.position.set(6,10,4),ne.castShadow=!0,ne.shadow.mapSize.width=2048,ne.shadow.mapSize.height=2048,ne.shadow.camera.near=.5,ne.shadow.camera.far=30,ne.shadow.camera.left=-10,ne.shadow.camera.right=10,ne.shadow.camera.top=10,ne.shadow.camera.bottom=-10,k.add(ne);const Ge=new yp(6333946,.5);Ge.position.set(-4,4,-6),k.add(Ge);const bt=new Lm(new Ce(0,-1,0),100);Ne.current=bt;const Ve=new Lm(new Ce(0,0,1),0);Je.current=Ve;const da=dt.current,H=new ll;ae.current=H,da.add(H);const je=new ll;we.current=je,da.add(je);const Dt=new ll;Pe.current=Dt,da.add(Dt);const ea=new bp(.08,.1,32),ya=new vp({color:3718648,side:Jl}),pt=new oa(ea,ya);pt.rotation.x=-Math.PI/2,pt.visible=!1,k.add(pt),Jt.current=pt;const vt=new Rm,ct=new Om,vl=ke=>{var Ee,kt,Ht,Zt;if(!W.current||!ve.current||!ce.current)return null;const He=W.current.domElement.getBoundingClientRect();ct.x=(ke.clientX-He.left)/He.width*2-1,ct.y=-((ke.clientY-He.top)/He.height)*2+1,vt.setFromCamera(ct,ve.current);const ze=vt.intersectObjects(ce.current.children,!0);for(const St of ze){const va=St.object,gt=((Ee=va.userData)==null?void 0:Ee.type)||((kt=va.userData)==null?void 0:kt.parentType)||((Zt=(Ht=va.parent)==null?void 0:Ht.userData)==null?void 0:Zt.type);if(gt)return gt}return null},Xt=K.domElement,Wt=ke=>{var ze;const He=vl(ke);(ze=lt.current)==null||ze.call(lt,He??null)},wa=ke=>{const He=K.xr.getController(ke);He.addEventListener("select",()=>{var ze;if(K.xr.isPresenting&&Tt.current&&dt.current){dt.current.matrix.copy(Tt.current),dt.current.matrix.decompose(dt.current.position,dt.current.quaternion,dt.current.scale),dt.current.updateMatrixWorld(!0);const Ee=Mi(N),kt=Ti(m,Ee,.6);Al(),il(kt),Ra(u)}else{const Ee=new km;Ee.identity().extractRotation(He.matrixWorld);const kt=new Ce(0,0,-1).applyMatrix4(Ee),Ht=new Ce().setFromMatrixPosition(He.matrixWorld),Zt=Dn(Ht,kt);Zt&&((ze=lt.current)==null||ze.call(lt,Zt))}}),k.add(He)};wa(0),wa(1);const ot=async()=>{var He;const ke=K.xr.getSession();ke&&(gl.current=await ke.requestReferenceSpace("local-floor").catch(()=>null),xl.current=await ke.requestReferenceSpace("viewer").catch(()=>null),xl.current&&(Ml.current=await((He=ke.requestHitTestSource)==null?void 0:He.call(ke,{space:xl.current}).catch(()=>null))),ke.addEventListener("end",()=>{var ze,Ee;(Ee=(ze=Ml.current)==null?void 0:ze.cancel)==null||Ee.call(ze),Ml.current=null,xl.current=null,gl.current=null,Jt.current&&(Jt.current.visible=!1)}))};K.xr.addEventListener("sessionstart",ot);let Rt=0;const Xa=50,ba=ke=>{var Ee;const He=Date.now();if(He-Rt<Xa)return;Rt=He;const ze=vl(ke);ze!==xa.current&&(zl(xa.current,ze),xa.current=ze,(Ee=he.current)==null||Ee.call(he,ze,ke.clientX,ke.clientY))};Xt.addEventListener("click",Wt),Xt.addEventListener("mousemove",ba);const Ot=()=>{if(!W.current||!ve.current||!fe.current)return;const ke=fe.current.clientWidth||window.innerWidth,He=fe.current.clientHeight||window.innerHeight;W.current.setSize(ke,He),ve.current.aspect=ke/He,ve.current.updateProjectionMatrix()};window.addEventListener("resize",Ot);const Oa=new ResizeObserver(Ot);Oa.observe(fe.current);const fa=(ke,He)=>{var Ht,Zt,St,va;if(!W.current||!ce.current||!ve.current)return;const ze=performance.now(),Ee=(ze-nl.current)/1e3;nl.current=ze;const kt=Math.min(Ee,.1);if(sl.current=W.current.xr.isPresenting,W.current.xr.isPresenting&&He&&Ml.current){const gt=gl.current??W.current.xr.getReferenceSpace(),Et=He.getHitTestResults(Ml.current);if(Et.length>0){const ul=gt?Et[0].getPose(gt):null;if(ul){const Sa=new km().fromArray(ul.transform.matrix);Tt.current=Sa,Jt.current&&(Jt.current.visible=!0,Jt.current.position.setFromMatrixPosition(Sa),Jt.current.quaternion.setFromRotationMatrix(Sa))}}else Jt.current&&(Jt.current.visible=!1)}if(En.current==="wound_healing"){const gt=ha.clamp(Da.current,0,1),Et=(Ht=ye.current)==null?void 0:Ht.getCurrentSpawnBounds(gt),ul=Qt.current;if((Zt=ul==null?void 0:ul.userData)!=null&&Zt.woundUniforms){const ta=ul.userData.woundUniforms,aa=ye.current?ye.current.getCurrentWidth(gt)/2:ta.woundHalfWidth.value,La=aa*1.5,la=.45,ka=ha.clamp((gt-la)/(.85-la),0,1),Ma=.02;ta.woundCenter.value.copy(((St=ye.current)==null?void 0:St.getWoundCenter())??new Ce(0,0,0)),ta.woundHalfWidth.value=Math.max(Ma,aa*(1-.9*ka)),ta.woundHalfLength.value=Math.max(Ma*1.5,La*(1-.9*ka)),ta.woundFalloff.value=ha.lerp(.12,.04,ka)}if(it.current){const ta=it.current.material,aa=ye.current?ye.current.getCurrentWidth(gt)/2:.75,La=aa*1.5;ta.uniforms.uHalfWidth.value=aa,ta.uniforms.uHalfLength.value=La;const la=.33,Na=.65;let ka=0;gt>=la&&(ka=ha.clamp((gt-la)/(Na-la),0,1)),ta.uniforms.uProgress.value=ka,it.current.scale.set(aa*2,1,La*2),it.current.position.y=((Et==null?void 0:Et.min.y)??-.2)+.05}ye.current&&ye.current.updateContraction(gt);const Sa=Fm[Y]||Fm[3];if(ua.current.dose>0&&ua.current.decaySeconds>0){const ta=Math.exp(-kt/ua.current.decaySeconds);ua.current={...ua.current,dose:ua.current.dose*ta}}const ls=Sa.melaninBase+ua.current.dose*Sa.melaninUVBoost;bl(gt,ls,O,kt),Le.current&&Le.current.update(gt),Ft.current&&(Et&&Ft.current.setSpawnRegion(Et),Ft.current.update(gt,kt)),Mt.current&&(Et&&Mt.current.setSpawnRegion(Et),Mt.current.update(gt,kt)),st.current&&(Et&&st.current.setSpawnRegion(Et),st.current.update(gt,kt)),qt.current&&qt.current.update(gt)}W.current.xr.isPresenting?(F.current&&(F.current.enabled=!1),ce.current&&(ce.current.background=null,ce.current.fog=null),W.current.setPixelRatio(Math.min(window.devicePixelRatio,1.25)),W.current.shadowMap.enabled=!1):(F.current&&(F.current.enabled=!0),(va=F.current)==null||va.update(),W.current.setPixelRatio(Math.min(window.devicePixelRatio,2)),W.current.shadowMap.enabled=!0),W.current.render(ce.current,ve.current)};K.setAnimationLoop(fa);const Lt=Mi(N),rl=Ti(m,Lt,sl.current?.6:1);Al(),il(rl),Ra(u),de(!1);const cl=ke=>{ke.preventDefault(),console.warn("WebGL context lost"),de(!0)},ol=()=>{console.log("WebGL context restored");const ke=Mi(N),He=Ti(m,ke,sl.current?.6:1);Al(),il(He),Ra(u),de(!1)};return K.domElement.addEventListener("webglcontextlost",cl),K.domElement.addEventListener("webglcontextrestored",ol),()=>{var ke;K.xr.removeEventListener("sessionstart",ot),K.domElement.removeEventListener("webglcontextlost",cl),K.domElement.removeEventListener("webglcontextrestored",ol),K.setAnimationLoop(null),window.removeEventListener("resize",Ot),Oa.disconnect(),Xt.removeEventListener("click",Wt),Xt.removeEventListener("mousemove",ba),(ke=F.current)==null||ke.dispose(),ce.current&&ce.current.traverse(He=>{const ze=He;(ze.isMesh||ze.isInstancedMesh)&&(ze.geometry&&ze.geometry.dispose(),ze.material&&(Array.isArray(ze.material)?ze.material.forEach(Ee=>Ee.dispose()):ze.material.dispose()))}),W.current&&(W.current.dispose(),W.current.domElement.parentElement&&W.current.domElement.parentElement.removeChild(W.current.domElement)),Jt.current&&ce.current&&(ce.current.remove(Jt.current),Jt.current.geometry.dispose(),Jt.current.material.dispose(),Jt.current=null),ce.current=null,ve.current=null,W.current=null,F.current=null}},[]),x.useEffect(()=>{if(!ce.current)return;const k=Mi(N),q=Ti(m,k,sl.current?.6:1);Al(),il(q),Ra(u),yl(Z,h,S),h==="wound_healing"&&bl(S,0,.6,0)},[m,N]),x.useEffect(()=>{Ra(u)},[u]),x.useEffect(()=>{const k=ae.current,q=we.current,V=Pe.current;k&&(k.visible=c.epidermis),q&&(q.visible=c.dermis),V&&(V.visible=c.hypodermis),B.current.hair&&(B.current.hair.visible=c.structures.hair),B.current.sweat&&(B.current.sweat.visible=c.structures.sweat),B.current.collagen&&(B.current.collagen.visible=c.structures.collagen),B.current.nerves&&(B.current.nerves.visible=c.structures.nerves),B.current.vessels&&B.current.vessels.forEach(I=>{I.visible=c.structures.vessels})},[c]),x.useEffect(()=>{const k=Ne.current;if(!k)return;if(D==null){k.constant=100;return}const q=-4,I=q+(4-q)*D;k.constant=I},[D]),x.useEffect(()=>{const k=F.current;k&&(k.autoRotate=T,k.autoRotateSpeed=.5)},[T]),x.useEffect(()=>{const k=ve.current,q=F.current;if(!k||!q)return;let V,I;if(v){const P=Io.find(Ge=>Ge.id===v);if(!P)return;const ne=P.steps[Math.min(Math.max(p,0),P.steps.length-1)];V=new Ce(...ne.camera.position),I=new Ce(...ne.camera.target)}else{const P=Mn.find(ne=>ne.id===N);if(!P)return;V=new Ce(...P.camera.position),I=new Ce(...P.camera.target)}const ie=k.position.clone(),J=q.target.clone(),K=800,te=Date.now(),$=()=>{const P=Date.now()-te,ne=Math.min(P/K,1),Ge=1-Math.pow(1-ne,3);k.position.lerpVectors(ie,V,Ge),q.target.lerpVectors(J,I,Ge),q.update(),ne<1&&requestAnimationFrame($)};$()},[N,v,p]),x.useEffect(()=>{var ie;const k=we.current,q=ae.current;if(!k||!q)return;let V=null,I=null;if(k.traverse(J=>{const K=J;K.isMesh&&K.userData.type==="dermis"&&(V=K)}),q.traverse(J=>{const K=J;K.isMesh&&K.userData.type==="epidermis"&&(I=K)}),h==="wound_healing"){const J=ha.clamp(S,0,1),K=new Xe(16348019),te=new Xe(16758952),$=new Xe(16765377);if(V){const P=V.material;J<.5?P.color=K.clone().lerp(te,J*2):P.color=te.clone().lerp($,(J-.5)*2)}if(I){const P=I.material,ne=new Xe(16755336),Ge=new Xe(16347926);P.color=ne.clone().lerp(Ge,J),P.opacity=.2+J*.15}if(B.current.vessels){const P=new Xe(Br[Se.current].vessels.oxy),ne=new Xe(Br[Se.current].vessels.deoxy);B.current.vessels.forEach(Ge=>{const bt=Ge;if(bt.material){const Ve=bt.material;Ve.color=P.clone().lerp(ne,J*.6)}})}}else{if(V){const J=V.material;J.color=new Xe(16765377)}if(I){const J=I.material;J.color=new Xe(16347926),J.opacity=.35}if(B.current.vessels){const J=new Xe(Br[Se.current].vessels.deoxy);B.current.vessels.forEach(K=>{const te=K;if(te.material){const $=te.material;$.color=J}})}if(Qt.current&&((ie=Qt.current.userData)!=null&&ie.woundUniforms)){const J=Qt.current.userData.woundUniforms;J.woundHalfWidth.value=1e3,J.woundHalfLength.value=1e3}Te.current&&(Te.current.opacity=.9,Te.current.transparent=!0)}},[h,S]),x.useEffect(()=>{yl(Z,h,S)},[Z,h,S,yl]),x.useEffect(()=>{var ie;const k=ce.current,q=we.current;if(!k||!q)return;const V=new Ce(0,0,0),I=()=>{const J=[];return Ne.current&&J.push(Ne.current),U&&Je.current&&J.push(Je.current),J};if(h==="wound_healing"){if(!We.current){const $=new ll;$.name="WoundHealingSystems",q.add($),We.current=$}const J=We.current,K=I();if(!ye.current){const $=new qp({width:2.2,depth:2.6,position:V,dermisTop:1.5,dermisBottom:-1.5});K.length>0&&$.setClippingPlanes(K),J.add($.group),ye.current=$}const te=ye.current.getCurrentSpawnBounds(Da.current||0);if(!Le.current){const $=new Vp({woundWidth:ye.current.getCurrentWidth(Da.current||0),woundDepth:ye.current.getCurrentDepth(Da.current||0)});K.length>0&&$.setClippingPlanes(K),J.add($.group),Le.current=$}if(!it.current){const $=new Sp(1,1,1,1),P=new jp({transparent:!0,depthWrite:!1,side:Jl,uniforms:{uColor:{value:new Xe(16762787)},uProgress:{value:0},uBand:{value:.18},uHalfWidth:{value:ye.current.getCurrentWidth(Da.current||0)/2},uHalfLength:{value:ye.current.getCurrentWidth(Da.current||0)/2*1.5}},vertexShader:`
            varying vec2 vPos;
            void main() {
              vec4 worldPos = modelMatrix * vec4(position, 1.0);
              vPos = worldPos.xz;
              gl_Position = projectionMatrix * modelViewMatrix * vec4(position, 1.0);
            }
          `,fragmentShader:`
            varying vec2 vPos;
            uniform vec3 uColor;
            uniform float uProgress;
            uniform float uBand;
            uniform float uHalfWidth;
            uniform float uHalfLength;
            void main() {
              vec2 n = vec2(vPos.x / uHalfWidth, vPos.y / uHalfLength);
              float r = length(n);           // 0 center, 1 edge
              float target = mix(1.0, 0.0, uProgress); // moves edge -> center
              float d = abs(r - target);
              float alpha = smoothstep(uBand, 0.0, d);
              if (alpha <= 0.001) discard;
              gl_FragColor = vec4(uColor, alpha * 0.9);
            }
          `}),ne=new oa($,P);ne.rotation.x=-Math.PI/2,ne.position.set(V.x,ye.current.getWoundBounds().min.y+.05,V.z),ne.name="KeratinocyteFront",J.add(ne),it.current=ne}if(!Ft.current){const $=new Xp(te,V);K.length>0&&$.setClippingPlanes(K),J.add($.instancedMesh),Ft.current=$}if(!Mt.current){const $=new Zp(te,V);K.length>0&&$.setClippingPlanes(K),J.add($.instancedMesh),Mt.current=$}if(!st.current){const $=new Kp(te,V);K.length>0&&$.setClippingPlanes(K),J.add($.instancedMesh),st.current=$}if(!qt.current&&B.current.vessels.length>0){const $=new Fp({woundCenter:V,woundRadius:1.1});$.registerVessels(B.current.vessels),K.length>0&&$.setClippingPlanes(K),J.add($.getSproutGroup()),qt.current=$}}else ye.current&&(ye.current.dispose(),ye.current=null),Le.current&&(Le.current.dispose(),Le.current=null),Ft.current&&(Ft.current.dispose(),Ft.current=null),Mt.current&&(Mt.current.dispose(),Mt.current=null),st.current&&(st.current.dispose(),st.current=null),qt.current&&(qt.current.dispose(),qt.current=null),it.current&&(it.current.geometry.dispose(),it.current.material.dispose(),(ie=We.current)==null||ie.remove(it.current),it.current=null),We.current&&q&&(q.remove(We.current),We.current=null)},[h,U]),x.useEffect(()=>{const k=Je.current;if(!k)return;const V=(()=>{const I=[];return Ne.current&&I.push(Ne.current),U&&I.push(k),I})();pe.current.forEach(I=>{I.clippingPlanes=V.length>0?V:null}),ye.current&&ye.current.setClippingPlanes(V),Le.current&&Le.current.setClippingPlanes(V),Ft.current&&Ft.current.setClippingPlanes(V),Mt.current&&Mt.current.setClippingPlanes(V),st.current&&st.current.setClippingPlanes(V),qt.current&&qt.current.setClippingPlanes(V),it.current&&(it.current.material.clippingPlanes=V.length>0?V:null)},[U]),i.jsxs(i.Fragment,{children:[i.jsx("div",{ref:fe,className:"absolute inset-0 z-0 cursor-crosshair touch-none",...Pl}),De&&i.jsx("div",{className:"absolute inset-0 z-10 bg-slate-950 flex items-center justify-center",children:i.jsxs("div",{className:"text-center",children:[i.jsx("div",{className:"w-8 h-8 border-2 border-blue-500 border-t-transparent rounded-full animate-spin mx-auto mb-3"}),i.jsx("p",{className:"text-slate-400 text-sm",children:"Loading 3D scene..."})]})})]})});Qr.displayName="SkinScene";function Ai(u,c){return u===void 0?"":typeof u=="string"?u:u[c]??u.en??""}const Jp=[{id:"identify_epidermis",type:"structure_identification",difficulty:"beginner",prompt:"Click on the epidermis (outermost layer of skin).",targetStructureIds:["epidermis"],explanation:"The epidermis is the outermost layer of skin, composed primarily of keratinocytes. It provides a waterproof barrier and protects against pathogens.",educationalObjective:"Identify the major skin layers",examLevels:["step1"]},{id:"identify_dermis",type:"structure_identification",difficulty:"beginner",prompt:"Click on the dermis (middle layer of skin).",targetStructureIds:["dermis"],explanation:"The dermis is the thick middle layer containing collagen, elastin, blood vessels, nerves, and skin appendages.",educationalObjective:"Identify the major skin layers",examLevels:["step1"]},{id:"identify_hypodermis",type:"structure_identification",difficulty:"beginner",prompt:"Click on the hypodermis (subcutaneous layer).",targetStructureIds:["hypodermis"],explanation:"The hypodermis (subcutis) is the deepest layer, composed mainly of adipose tissue for insulation and cushioning.",educationalObjective:"Identify the major skin layers",examLevels:["step1"]},{id:"identify_sweat_gland",type:"structure_identification",difficulty:"beginner",prompt:"Click on the eccrine sweat gland.",targetStructureIds:["sweat_gland"],explanation:"Eccrine sweat glands are coiled tubular glands in the deep dermis that connect to the skin surface via a straight duct.",educationalObjective:"Identify skin appendages",examLevels:["step1"]},{id:"identify_hair_follicle",type:"structure_identification",difficulty:"beginner",prompt:"Click on the hair follicle.",targetStructureIds:["hair_follicle"],explanation:"Hair follicles span from the epidermal surface into the dermis, ending in a bulb anchored near the dermis-hypodermis interface.",educationalObjective:"Identify skin appendages",examLevels:["step1"]},{id:"identify_collagen",type:"structure_identification",difficulty:"intermediate",prompt:"Click on the collagen matrix.",targetStructureIds:["collagen"],explanation:"Collagen is visualized as a dense irregular array of fibers in the dermis that provides tensile strength. Type I collagen is most abundant.",educationalObjective:"Identify dermal structural components",examLevels:["step1"]},{id:"identify_stratum_corneum",type:"structure_identification",difficulty:"intermediate",prompt:"Click on the stratum corneum.",targetStructureIds:["stratum_corneum"],explanation:"The stratum corneum is the outermost layer of the epidermis, consisting of dead cells (corneocytes) that form the skin barrier.",educationalObjective:"Identify epidermal sublayers",examLevels:["step1"]},{id:"identify_blood_vessels",type:"structure_identification",difficulty:"intermediate",prompt:"Click on the dermal blood vessels.",targetStructureIds:["blood_vessels"],explanation:"The dermal vasculature is arranged in superficial and deep plexuses, providing nutrients and thermoregulation.",educationalObjective:"Identify dermal vascular structures",examLevels:["step1"]},{id:"identify_nerves",type:"structure_identification",difficulty:"intermediate",prompt:"Click on the sensory nerves.",targetStructureIds:["nerves"],explanation:"Sensory nerve fibers in the dermis detect touch, pressure, temperature, and pain through various specialized receptors.",educationalObjective:"Identify dermal neural structures",examLevels:["step1"]},{id:"identify_keratinocytes",type:"structure_identification",difficulty:"advanced",prompt:"Click on the keratinocytes in the stratum basale.",targetStructureIds:["keratinocytes"],explanation:"Keratinocytes in the stratum basale are stem cells that divide and migrate upward, differentiating as they go.",educationalObjective:"Identify cellular components of epidermis",examLevels:["step1","step2"]},{id:"identify_adipose",type:"structure_identification",difficulty:"advanced",prompt:"Click on the adipose tissue (fat cells).",targetStructureIds:["adipose"],explanation:"Adipocytes in the hypodermis store energy and produce adipokines like leptin and adiponectin.",educationalObjective:"Identify hypodermal structures",examLevels:["step1","step2"]}],Wp=[{id:"clinical_psoriasis_turnover",type:"clinical_correlation",difficulty:"intermediate",prompt:"A patient presents with well-demarcated erythematous plaques covered with silvery scales. What is the primary pathophysiologic change in the epidermis?",options:[{id:"a",text:"Decreased keratinocyte proliferation",isCorrect:!1},{id:"b",text:"Accelerated epidermal turnover (3-5 days vs 28 days)",isCorrect:!0},{id:"c",text:"Loss of melanocytes",isCorrect:!1},{id:"d",text:"Increased collagen deposition",isCorrect:!1}],explanation:"Psoriasis is characterized by dramatically accelerated epidermal turnover. Normal turnover takes ~28 days, but in psoriasis it occurs in just 3-5 days, leading to the characteristic silvery scale from incomplete keratinocyte maturation.",educationalObjective:"Understand the pathophysiology of psoriasis",relatedStructures:["epidermis","keratinocytes"],relatedConditions:["psoriasis"],examLevels:["step1","step2","abd"]},{id:"clinical_eczema_barrier",type:"clinical_correlation",difficulty:"intermediate",prompt:"A 6-year-old presents with chronic itchy, lichenified patches in the antecubital fossae. What is the strongest genetic risk factor for this condition?",options:[{id:"a",text:"HLA-B27",isCorrect:!1},{id:"b",text:"Filaggrin (FLG) gene mutations",isCorrect:!0},{id:"c",text:"BRCA1 mutations",isCorrect:!1},{id:"d",text:"Factor V Leiden",isCorrect:!1}],explanation:"Filaggrin gene (FLG) mutations are the strongest genetic risk factor for atopic dermatitis. Filaggrin is essential for proper stratum corneum formation and barrier function.",educationalObjective:"Identify genetic factors in atopic dermatitis",relatedStructures:["stratum_corneum","epidermis"],relatedConditions:["eczema"],examLevels:["step1","step2","abd"]},{id:"clinical_cf_sweat",type:"clinical_correlation",difficulty:"advanced",prompt:"A newborn fails newborn screening and a confirmatory test shows elevated sweat chloride. Which structure's function is most directly affected by this genetic mutation?",options:[{id:"a",text:"Hair follicle",isCorrect:!1},{id:"b",text:"Sebaceous gland",isCorrect:!1},{id:"c",text:"Eccrine sweat gland duct",isCorrect:!0},{id:"d",text:"Apocrine sweat gland",isCorrect:!1}],explanation:"Cystic fibrosis is caused by CFTR chloride channel mutations. In the eccrine sweat gland duct, defective CFTR prevents chloride reabsorption, resulting in elevated sweat chloride (>60 mEq/L is diagnostic).",educationalObjective:"Understand the role of eccrine glands in cystic fibrosis diagnosis",relatedStructures:["sweat_gland"],examLevels:["step1","step2"]},{id:"clinical_scurvy",type:"clinical_correlation",difficulty:"intermediate",prompt:"A patient with poor dietary intake presents with bleeding gums, perifollicular hemorrhages, and poor wound healing. Which dermal component synthesis is impaired?",options:[{id:"a",text:"Elastin",isCorrect:!1},{id:"b",text:"Keratin",isCorrect:!1},{id:"c",text:"Collagen",isCorrect:!0},{id:"d",text:"Melanin",isCorrect:!1}],explanation:"Scurvy (vitamin C deficiency) impairs collagen synthesis. Vitamin C is required for hydroxylation of proline and lysine residues during collagen synthesis, and deficiency leads to weak, poorly cross-linked collagen.",educationalObjective:"Understand the role of vitamin C in collagen synthesis",relatedStructures:["collagen","dermis"],examLevels:["step1"]},{id:"clinical_keloid",type:"clinical_correlation",difficulty:"advanced",prompt:"A patient develops a raised, firm scar that extends beyond the original wound margins 6 months after ear piercing. What distinguishes this from a hypertrophic scar?",options:[{id:"a",text:"Keloids extend beyond wound margins; hypertrophic scars do not",isCorrect:!0},{id:"b",text:"Keloids are painful; hypertrophic scars are not",isCorrect:!1},{id:"c",text:"Keloids occur only on the trunk",isCorrect:!1},{id:"d",text:"Hypertrophic scars have more collagen",isCorrect:!1}],explanation:"Keloids extend beyond the original wound margins and can continue to grow, while hypertrophic scars remain within the wound boundaries. Both result from excessive collagen deposition during wound healing.",educationalObjective:"Distinguish keloids from hypertrophic scars",relatedStructures:["collagen","dermis"],examLevels:["step2","step3","abd"]},{id:"clinical_shingles_dermatome",type:"clinical_correlation",difficulty:"intermediate",prompt:"A 70-year-old presents with painful vesicles in a band-like distribution on the left trunk. The lesions do not cross the midline. Which structure explains this distribution?",options:[{id:"a",text:"Blood vessel distribution",isCorrect:!1},{id:"b",text:"Lymphatic drainage pattern",isCorrect:!1},{id:"c",text:"Dermatome/sensory nerve distribution",isCorrect:!0},{id:"d",text:"Muscle fiber orientation",isCorrect:!1}],explanation:"Herpes zoster (shingles) follows a dermatomal distribution because VZV remains latent in dorsal root ganglia and reactivates along that sensory nerve distribution. The rash does not cross the midline because each dermatome is unilateral.",educationalObjective:"Understand dermatomal distribution in herpes zoster",relatedStructures:["nerves"],examLevels:["step1","step2"]}],Ip=[{id:"board_pemphigus_vs_pemphigoid",type:"board_style",difficulty:"board_prep",vignette:'A 65-year-old woman presents with flaccid blisters that rupture easily, leaving painful erosions on her oral mucosa and trunk. Nikolsky sign is positive. Direct immunofluorescence shows IgG deposition in a "chicken wire" pattern around epidermal cells.',leadIn:"What is the target of the pathogenic antibodies in this condition?",prompt:"What is the target of the pathogenic antibodies?",options:[{id:"a",text:"Type VII collagen",isCorrect:!1},{id:"b",text:"Desmoglein 1 and 3",isCorrect:!0},{id:"c",text:"BP180 and BP230 (hemidesmosomes)",isCorrect:!1},{id:"d",text:"Laminin-332",isCorrect:!1}],explanation:'This is pemphigus vulgaris. The "chicken wire" pattern on DIF indicates antibodies targeting desmogleins (cell-cell junctions) rather than the basement membrane. Desmoglein 3 (mucosal) and desmoglein 1 (cutaneous) are the targets. Bullous pemphigoid targets hemidesmosomes (BP180/BP230) and shows linear staining at the DEJ.',educationalObjective:"Distinguish pemphigus vulgaris from bullous pemphigoid by mechanism and immunofluorescence pattern",relatedStructures:["epidermis","keratinocytes"],examLevels:["step2","step3","abd"]},{id:"board_melanoma_depth",type:"board_style",difficulty:"board_prep",vignette:'A 55-year-old man presents with an asymmetric, irregularly bordered pigmented lesion on his back. Biopsy reveals melanoma. The pathology report states "Breslow thickness 2.1 mm, Clark level IV."',leadIn:"To which layer has the melanoma invaded?",prompt:"Clark level IV indicates invasion to which layer?",options:[{id:"a",text:"Epidermis only",isCorrect:!1},{id:"b",text:"Papillary dermis",isCorrect:!1},{id:"c",text:"Reticular dermis",isCorrect:!0},{id:"d",text:"Subcutaneous fat",isCorrect:!1}],explanation:"Clark levels: I = epidermis, II = papillary dermis, III = papillary-reticular junction, IV = reticular dermis, V = subcutaneous fat. Breslow thickness (vertical depth in mm) is the most important prognostic factor.",educationalObjective:"Understand melanoma staging using Clark levels and Breslow thickness",relatedStructures:["epidermis","dermis","hypodermis"],examLevels:["step2","step3","abd"]},{id:"board_alopecia_areata",type:"board_style",difficulty:"board_prep",vignette:'A 25-year-old woman presents with a well-circumscribed patch of hair loss on her scalp. On examination, short broken hairs that taper proximally ("exclamation point hairs") are seen at the margins. Pull test is positive. Scalp appears normal without scarring.',leadIn:"What is the pathophysiology of this condition?",prompt:"What is the pathophysiology?",options:[{id:"a",text:"Androgen-mediated follicular miniaturization",isCorrect:!1},{id:"b",text:"Autoimmune attack on anagen hair bulb",isCorrect:!0},{id:"c",text:"Telogen synchronization following stress",isCorrect:!1},{id:"d",text:"Trichotillomania (hair pulling)",isCorrect:!1}],explanation:'Alopecia areata is an autoimmune condition targeting the hair follicle bulb during anagen phase. "Exclamation point hairs" are pathognomonic. Unlike androgenetic alopecia (miniaturization) or telogen effluvium (diffuse shedding), it presents as patchy non-scarring alopecia.',educationalObjective:"Identify alopecia areata and understand its autoimmune pathophysiology",relatedStructures:["hair_follicle"],examLevels:["step2","abd"]},{id:"board_rosacea_pathophysiology",type:"board_style",difficulty:"advanced",vignette:"A 45-year-old woman complains of facial flushing triggered by hot beverages, alcohol, and stress. Physical examination reveals persistent centrofacial erythema with telangiectasias on the cheeks and nose. No pustules or papules are present.",leadIn:"Which skin structure dysfunction is primarily responsible for the flushing episodes?",prompt:"Which structure is primarily responsible for flushing?",options:[{id:"a",text:"Sebaceous glands",isCorrect:!1},{id:"b",text:"Dermal blood vessels and neurovascular dysregulation",isCorrect:!0},{id:"c",text:"Eccrine sweat glands",isCorrect:!1},{id:"d",text:"Hair follicles",isCorrect:!1}],explanation:"Rosacea involves neurovascular dysregulation of dermal blood vessels. The flushing is due to vasodilation triggered by various stimuli. Telangiectasias represent persistently dilated superficial vessels. This is erythematotelangiectatic rosacea (subtype 1).",educationalObjective:"Understand the vascular component of rosacea pathophysiology",relatedStructures:["blood_vessels"],relatedConditions:["rosacea"],examLevels:["step2","abd"]},{id:"board_ehlers_danlos",type:"board_style",difficulty:"board_prep",vignette:'A 22-year-old woman presents with easy bruising, hyperextensible skin, and joint hypermobility. She reports that her wounds heal slowly and leave widened, "cigarette paper" scars. Her mother had similar findings.',leadIn:"A mutation in which protein is most likely responsible for this presentation?",prompt:"Which protein mutation is most likely responsible?",options:[{id:"a",text:"Fibrillin-1",isCorrect:!1},{id:"b",text:"Type V collagen or collagen processing enzymes",isCorrect:!0},{id:"c",text:"Dystrophin",isCorrect:!1},{id:"d",text:"Elastin",isCorrect:!1}],explanation:"Classical Ehlers-Danlos syndrome involves type V collagen mutations (COL5A1/COL5A2). The triad of skin hyperextensibility, joint hypermobility, and abnormal scarring is classic. Fibrillin-1 mutations cause Marfan syndrome (tall stature, aortic root dilation, lens dislocation).",educationalObjective:"Recognize Ehlers-Danlos syndrome and understand collagen defects",relatedStructures:["collagen","dermis"],examLevels:["step1","step2"]},{id:"board_dermatomyositis",type:"board_style",difficulty:"board_prep",vignette:"A 52-year-old woman presents with proximal muscle weakness, difficulty climbing stairs, and a violaceous discoloration of the upper eyelids. Physical examination also reveals erythematous papules over the metacarpophalangeal and interphalangeal joints.",leadIn:"Which additional workup is most important in this patient?",prompt:"What additional workup is most important?",options:[{id:"a",text:"Patch testing for contact allergens",isCorrect:!1},{id:"b",text:"Age-appropriate malignancy screening",isCorrect:!0},{id:"c",text:"Sweat chloride test",isCorrect:!1},{id:"d",text:"Nerve conduction studies",isCorrect:!1}],explanation:"This patient has dermatomyositis with heliotrope rash (violaceous eyelids) and Gottron papules (over joints). Adult-onset dermatomyositis is associated with internal malignancy in 15-25% of cases, requiring age-appropriate cancer screening (CT chest/abdomen/pelvis, mammography, colonoscopy).",educationalObjective:"Recognize dermatomyositis skin findings and malignancy association",relatedStructures:["epidermis","dermis"],examLevels:["step2","step3","abd"]},{id:"board_drug_eruption_sjs",type:"board_style",difficulty:"board_prep",vignette:"A 35-year-old man started on allopurinol 3 weeks ago develops fever, painful oral erosions, and targetoid lesions with epidermal detachment involving 8% BSA. Nikolsky sign is positive in areas of erythema.",leadIn:"What is the most appropriate immediate management?",prompt:"What is the most appropriate immediate management?",options:[{id:"a",text:"High-dose oral prednisone",isCorrect:!1},{id:"b",text:"Discontinue allopurinol and transfer to burn unit",isCorrect:!0},{id:"c",text:"Start acyclovir for herpes simplex",isCorrect:!1},{id:"d",text:"Apply topical tacrolimus to affected areas",isCorrect:!1}],explanation:"This is Stevens-Johnson Syndrome (SJS; <10% BSA detachment). TEN is >30% BSA. Allopurinol is a high-risk medication. Management: immediate drug discontinuation, transfer to burn/ICU for wound care, fluid/electrolyte management, infection monitoring. Systemic steroids are controversial and not first-line.",educationalObjective:"Recognize SJS/TEN and understand appropriate management",relatedStructures:["epidermis","keratinocytes"],relatedConditions:["drug_eruption"],examLevels:["step2","step3","abd"]},{id:"board_ctcl_staging",type:"board_style",difficulty:"board_prep",vignette:'A 68-year-old man has had "refractory eczema" for 15 years. Now he presents with generalized erythroderma, lymphadenopathy, and intensely pruritic skin. Skin biopsy shows atypical lymphocytes with cerebriform nuclei in the epidermis (Pautrier microabscesses). Flow cytometry of peripheral blood shows 2,500 Sezary cells/L.',leadIn:"What is the diagnosis and stage?",prompt:"What is the diagnosis and stage?",options:[{id:"a",text:"Mycosis fungoides, patch stage (IA)",isCorrect:!1},{id:"b",text:"Mycosis fungoides, tumor stage (IIB)",isCorrect:!1},{id:"c",text:"Sezary syndrome (IVA)",isCorrect:!0},{id:"d",text:"Adult T-cell leukemia/lymphoma",isCorrect:!1}],explanation:"Sezary syndrome is the leukemic variant of CTCL defined by erythroderma + circulating Sezary cells (1000/L or 10% of lymphocytes with abnormal phenotype). Pautrier microabscesses are pathognomonic for epidermotropic CTCL. This is stage IVA (blood involvement).",educationalObjective:"Diagnose Sezary syndrome and understand CTCL staging",relatedStructures:["epidermis"],examLevels:["abd"]},{id:"board_porphyria_cutanea_tarda",type:"board_style",difficulty:"board_prep",vignette:"A 55-year-old man with hepatitis C presents with vesicles and bullae on sun-exposed areas of his hands. The blisters heal with scarring and milia formation. He also notes increased facial hair and skin fragility. Urine fluoresces coral-pink under Wood lamp.",leadIn:"Which enzyme is deficient in this condition?",prompt:"Which enzyme is deficient?",options:[{id:"a",text:"Porphobilinogen deaminase",isCorrect:!1},{id:"b",text:"Uroporphyrinogen decarboxylase",isCorrect:!0},{id:"c",text:"Ferrochelatase",isCorrect:!1},{id:"d",text:"ALA dehydratase",isCorrect:!1}],explanation:"Porphyria cutanea tarda (PCT) is caused by decreased uroporphyrinogen decarboxylase (UROD) activity. Classic findings: photosensitive blistering, skin fragility, hypertrichosis, hyperpigmentation. Associated with hepatitis C, alcohol, iron overload. Treatment: phlebotomy, low-dose hydroxychloroquine.",educationalObjective:"Recognize PCT and understand the enzyme deficiency",relatedStructures:["epidermis","dermis"],examLevels:["step1","abd"]},{id:"board_leprosy_spectrum",type:"board_style",difficulty:"board_prep",vignette:"A 40-year-old immigrant from India presents with multiple hypopigmented, anesthetic macules on his trunk. Skin biopsy shows well-formed granulomas with Langerhans giant cells. AFB stain shows rare bacilli. Nerve examination reveals enlarged greater auricular nerve.",leadIn:"Where does this fall on the leprosy spectrum?",prompt:"Where on the leprosy spectrum?",options:[{id:"a",text:"Tuberculoid (TT) - high cell-mediated immunity",isCorrect:!0},{id:"b",text:"Lepromatous (LL) - low cell-mediated immunity",isCorrect:!1},{id:"c",text:"Borderline tuberculoid (BT)",isCorrect:!1},{id:"d",text:"Indeterminate leprosy",isCorrect:!1}],explanation:'Tuberculoid leprosy (TT) = few, well-defined hypopigmented anesthetic lesions with well-formed granulomas and rare AFB. Strong cell-mediated immunity limits bacterial load. Lepromatous (LL) = many symmetric lesions, diffuse infiltration, "foam cells" with many AFB, leonine facies.',educationalObjective:"Understand the leprosy spectrum and its immunologic basis",relatedStructures:["epidermis","dermis","nerves"],examLevels:["step2","abd"]},{id:"board_vitiligo_management",type:"board_style",difficulty:"board_prep",vignette:"A 28-year-old woman presents with progressive symmetric depigmented patches on her face, hands, and periorbital areas over 6 months. Wood lamp accentuates the lesions. She has a history of Hashimoto thyroiditis. Patches cover approximately 5% BSA.",leadIn:"What is the most appropriate first-line treatment for facial lesions?",prompt:"What is first-line treatment for facial vitiligo?",options:[{id:"a",text:"Oral corticosteroids",isCorrect:!1},{id:"b",text:"Topical calcineurin inhibitors (tacrolimus)",isCorrect:!0},{id:"c",text:"Surgical melanocyte transplantation",isCorrect:!1},{id:"d",text:"Depigmentation with monobenzone",isCorrect:!1}],explanation:"For facial vitiligo, topical calcineurin inhibitors (tacrolimus, pimecrolimus) are preferred over steroids to avoid facial steroid side effects. NB-UVB phototherapy is added for widespread disease. Surgical options are for stable, localized disease. Depigmentation is reserved for >50% BSA involvement.",educationalObjective:"Understand vitiligo treatment algorithm",relatedStructures:["epidermis"],relatedConditions:["vitiligo"],examLevels:["step3","abd"]}],$p=[{id:"pathology_psoriasis_epidermis",type:"pathology_recognition",difficulty:"intermediate",prompt:"In psoriasis, which structure shows the most dramatic pathological changes? Click on it.",targetStructureIds:["epidermis","keratinocytes"],explanation:"In psoriasis, the epidermis shows marked acanthosis (thickening), parakeratosis (retained nuclei in stratum corneum), and elongated rete ridges. The papillary dermis shows dilated, tortuous capillaries.",educationalObjective:"Identify histopathological changes in psoriasis",relatedConditions:["psoriasis"],examLevels:["step1","step2","abd"]},{id:"pathology_photoaging_dermis",type:"pathology_recognition",difficulty:"intermediate",prompt:"In photoaged skin, which structure is most affected by chronic UV damage? Click on it.",targetStructureIds:["collagen","dermis"],explanation:"Photoaging primarily affects the dermis through solar elastosis (abnormal elastic fiber accumulation), collagen degradation by UV-induced MMPs, and overall dermal thinning.",educationalObjective:"Identify dermal changes in photoaging",relatedConditions:["photoaging"],examLevels:["step1","abd"]},{id:"pathology_eczema_barrier",type:"pathology_recognition",difficulty:"advanced",prompt:"In atopic dermatitis, which epidermal layer has impaired barrier function? Click on it.",targetStructureIds:["stratum_corneum"],explanation:'The stratum corneum is defective in atopic dermatitis due to filaggrin deficiency and lipid abnormalities. This impairs the "brick and mortar" barrier, increasing transepidermal water loss and allergen penetration.',educationalObjective:"Identify barrier dysfunction in atopic dermatitis",relatedConditions:["eczema"],examLevels:["step1","step2","abd"]},{id:"pathology_acne_follicle",type:"pathology_recognition",difficulty:"intermediate",prompt:"In acne vulgaris, which structure becomes occluded and inflamed? Click on it.",targetStructureIds:["hair_follicle"],explanation:"Acne involves the pilosebaceous unit. Follicular hyperkeratinization occludes the follicle, sebum accumulates, C. acnes proliferates, and inflammation ensues. The result is comedones, papules, pustules, and in severe cases, nodules/cysts.",educationalObjective:"Identify the pilosebaceous unit as the target in acne",relatedConditions:["acne"],examLevels:["step1","step2","abd"]}],Pp=[{id:"layer_basement_membrane",type:"layer_identification",difficulty:"advanced",prompt:"The basement membrane (dermal-epidermal junction) separates which two layers?",options:[{id:"a",text:"Stratum corneum and stratum granulosum",isCorrect:!1},{id:"b",text:"Epidermis and dermis",isCorrect:!0},{id:"c",text:"Dermis and hypodermis",isCorrect:!1},{id:"d",text:"Papillary and reticular dermis",isCorrect:!1}],explanation:"The basement membrane zone (BMZ) or dermal-epidermal junction (DEJ) separates the epidermis from the dermis. It contains type IV collagen, laminins, and anchoring structures. Defects here cause blistering diseases like bullous pemphigoid.",educationalObjective:"Identify the dermal-epidermal junction",relatedStructures:["epidermis","dermis"],examLevels:["step1","step2"]},{id:"layer_papillary_reticular",type:"layer_identification",difficulty:"intermediate",prompt:"Which dermis layer contains the majority of type I collagen organized in thick bundles?",options:[{id:"a",text:"Papillary dermis",isCorrect:!1},{id:"b",text:"Reticular dermis",isCorrect:!0},{id:"c",text:"Both equally",isCorrect:!1},{id:"d",text:"Hypodermis",isCorrect:!1}],explanation:"The reticular dermis contains dense irregular connective tissue with thick bundles of type I collagen. The papillary dermis is thinner, with loose connective tissue and more type III collagen.",educationalObjective:"Distinguish papillary from reticular dermis",relatedStructures:["dermis","collagen"],examLevels:["step1"]}],eg=[{id:"function_thermoregulation",type:"function_matching",difficulty:"beginner",prompt:"Which structure is primarily responsible for thermoregulation through evaporative cooling?",options:[{id:"a",text:"Hair follicle",isCorrect:!1},{id:"b",text:"Eccrine sweat gland",isCorrect:!0},{id:"c",text:"Sebaceous gland",isCorrect:!1},{id:"d",text:"Melanocyte",isCorrect:!1}],explanation:"Eccrine sweat glands produce hypotonic sweat that evaporates from the skin surface, providing efficient cooling. They are found throughout the body, with highest density on palms, soles, and forehead.",educationalObjective:"Understand the thermoregulatory function of eccrine glands",relatedStructures:["sweat_gland"],examLevels:["step1"]},{id:"function_uv_protection",type:"function_matching",difficulty:"beginner",prompt:"Which cell type provides protection against ultraviolet radiation?",options:[{id:"a",text:"Keratinocyte",isCorrect:!1},{id:"b",text:"Melanocyte",isCorrect:!0},{id:"c",text:"Langerhans cell",isCorrect:!1},{id:"d",text:"Merkel cell",isCorrect:!1}],explanation:'Melanocytes produce melanin, which absorbs UV radiation and protects DNA from damage. Melanin is transferred to keratinocytes, where it forms a "cap" over the nucleus.',educationalObjective:"Understand melanocyte function in photoprotection",relatedStructures:["epidermis"],examLevels:["step1"]},{id:"function_immune_surveillance",type:"function_matching",difficulty:"intermediate",prompt:"Which cell type serves as the primary antigen-presenting cell of the epidermis?",options:[{id:"a",text:"Keratinocyte",isCorrect:!1},{id:"b",text:"Melanocyte",isCorrect:!1},{id:"c",text:"Langerhans cell",isCorrect:!0},{id:"d",text:"Merkel cell",isCorrect:!1}],explanation:"Langerhans cells are dendritic cells derived from bone marrow that reside in the epidermis. They capture antigens, migrate to lymph nodes, and present to T cells, initiating adaptive immune responses.",educationalObjective:"Understand immune surveillance in the skin",relatedStructures:["epidermis"],examLevels:["step1","step2"]},{id:"function_tensile_strength",type:"function_matching",difficulty:"intermediate",prompt:"Which dermal component provides tensile strength and resistance to stretching?",options:[{id:"a",text:"Elastin",isCorrect:!1},{id:"b",text:"Type I collagen",isCorrect:!0},{id:"c",text:"Hyaluronic acid",isCorrect:!1},{id:"d",text:"Fibronectin",isCorrect:!1}],explanation:"Type I collagen provides tensile strength (resistance to stretching/pulling forces). Elastin provides elastic recoil (returns skin to original shape). Both are important for skin mechanical properties.",educationalObjective:"Distinguish the functions of collagen and elastin",relatedStructures:["collagen","dermis"],examLevels:["step1"]}],zi=[...Jp,...Wp,...Ip,...$p,...Pp,...eg];function tg(u){return zi.filter(c=>{var f;return(f=c.examLevels)==null?void 0:f.includes(u)})}function ag(u){return zi.filter(c=>{var f,o;return((f=c.targetStructureIds)==null?void 0:f.includes(u))||((o=c.relatedStructures)==null?void 0:o.includes(u))})}const Gr=({active:u,onClick:c,label:f,badge:o})=>i.jsxs("button",{onClick:c,className:`
      px-3 py-1.5 text-[11px] font-medium rounded-md transition-colors
      ${u?"bg-blue-600/30 text-blue-300 border border-blue-500/50":"text-slate-400 hover:text-slate-200 hover:bg-slate-800"}
    `,children:[f,o!==void 0&&o>0&&i.jsx("span",{className:"ml-1.5 px-1.5 py-0.5 rounded-full text-[9px] bg-slate-700 text-slate-300",children:o})]}),lg=({data:u,lang:c})=>{const f=Ai(u.description,c),o=u.funFact?Ai(u.funFact,c):"",m=u.learningObjectives?Ai(u.learningObjectives,c):"";return i.jsxs("div",{className:"space-y-4",children:[i.jsx("p",{className:"text-xs text-slate-200 leading-relaxed",children:f}),o&&i.jsxs("div",{className:"bg-indigo-900/30 border border-indigo-500/30 rounded-lg p-3",children:[i.jsx("h3",{className:"text-indigo-300 text-[10px] font-bold uppercase tracking-wider mb-1",children:"Did you know?"}),i.jsx("p",{className:"text-slate-300 text-[11px] italic",children:o})]}),m&&i.jsxs("div",{className:"bg-slate-800/40 border border-slate-700/60 rounded-lg p-3",children:[i.jsx("h3",{className:"text-emerald-300 text-[10px] font-bold uppercase tracking-wider mb-2",children:"Learning Objectives"}),i.jsx("div",{className:"text-slate-200 text-[11px] space-y-1",children:m.split(`
`).filter(Boolean).map((h,S)=>i.jsx("p",{className:"leading-relaxed",children:h},S))})]}),u.references&&u.references.length>0&&i.jsxs("div",{className:"pt-2 border-t border-slate-800",children:[i.jsx("h3",{className:"text-slate-500 text-[10px] font-semibold uppercase tracking-wider mb-1",children:"References"}),i.jsx("ul",{className:"list-disc list-inside text-[10px] text-slate-400 space-y-0.5",children:u.references.map((h,S)=>i.jsx("li",{children:h},S))})]})]})},ng=({data:u,lang:c})=>{const f=u.clinicalCorrelates?Ai(u.clinicalCorrelates,c):"",o=x.useMemo(()=>{if(!f)return[];const m=[];return f.split(`
`).filter(Boolean).forEach(S=>{S.startsWith("HIGH-YIELD:")?m.push({type:"high-yield",content:S.replace("HIGH-YIELD:","").trim()}):S.startsWith("BOARD PEARL:")?m.push({type:"board-pearl",content:S.replace("BOARD PEARL:","").trim()}):S.startsWith("CLINICAL:")?m.push({type:"clinical",content:S.replace("CLINICAL:","").trim()}):m.push({type:"general",content:S.trim()})}),m},[f]);return f?i.jsxs("div",{className:"space-y-3",children:[o.map((m,h)=>m.type==="high-yield"?i.jsxs("div",{className:"bg-amber-900/20 border border-amber-600/30 rounded-lg p-3",children:[i.jsxs("div",{className:"flex items-center gap-2 mb-1",children:[i.jsx("span",{className:"text-amber-400",children:""}),i.jsx("h3",{className:"text-amber-300 text-[10px] font-bold uppercase tracking-wider",children:"High-Yield"})]}),i.jsx("p",{className:"text-slate-200 text-[11px] leading-relaxed",children:m.content})]},h):m.type==="board-pearl"?i.jsxs("div",{className:"bg-purple-900/20 border border-purple-600/30 rounded-lg p-3",children:[i.jsxs("div",{className:"flex items-center gap-2 mb-1",children:[i.jsx("span",{className:"text-purple-400",children:""}),i.jsx("h3",{className:"text-purple-300 text-[10px] font-bold uppercase tracking-wider",children:"Board Pearl"})]}),i.jsx("p",{className:"text-slate-200 text-[11px] leading-relaxed",children:m.content})]},h):m.type==="clinical"?i.jsxs("div",{className:"bg-blue-900/20 border border-blue-600/30 rounded-lg p-3",children:[i.jsxs("div",{className:"flex items-center gap-2 mb-1",children:[i.jsx("span",{className:"text-blue-400",children:""}),i.jsx("h3",{className:"text-blue-300 text-[10px] font-bold uppercase tracking-wider",children:"Clinical Correlation"})]}),i.jsx("p",{className:"text-slate-200 text-[11px] leading-relaxed",children:m.content})]},h):i.jsx("p",{className:"text-slate-300 text-[11px] leading-relaxed",children:m.content},h)),u.relatedConditions&&u.relatedConditions.length>0&&i.jsxs("div",{className:"pt-3 border-t border-slate-800",children:[i.jsx("h3",{className:"text-slate-400 text-[10px] font-semibold uppercase tracking-wider mb-2",children:"Related Conditions"}),i.jsx("div",{className:"flex flex-wrap gap-1.5",children:u.relatedConditions.map(m=>i.jsx("span",{className:"px-2 py-0.5 rounded-md text-[10px] bg-slate-800 text-slate-300 border border-slate-700",children:m.charAt(0).toUpperCase()+m.slice(1)},m))})]})]}):i.jsx("div",{className:"text-center py-8 text-slate-500 text-sm",children:"No clinical correlates available for this structure."})},sg=({data:u})=>{const f={epidermis:{stain:"H&E",features:["Stratified squamous keratinized epithelium","Rete ridges interdigitating with dermal papillae","Visible stratum basale (single layer of cuboidal/columnar cells)",'Stratum spinosum (polygonal cells with "spiny" appearance)',"Stratum granulosum (keratohyalin granules)","Stratum corneum (acellular keratin layer)"],magnification:"10x - 40x"},dermis:{stain:"H&E, Masson Trichrome (collagen blue)",features:["Papillary dermis: loose connective tissue, type III collagen","Reticular dermis: dense irregular CT, type I collagen bundles","Fibroblasts scattered throughout","Blood vessels, nerves, and adnexal structures","Mast cells near vessels (toluidine blue stain)"],magnification:"4x - 20x"},collagen:{stain:"Masson Trichrome, Sirius Red (polarized light)",features:["Type I collagen: thick yellow/orange birefringent fibers","Type III collagen: thin green birefringent fibers","Wavy, bundled fiber arrangement","Cross-linking pattern visible at high magnification"],magnification:"20x - 40x"},hair_follicle:{stain:"H&E",features:["Outer root sheath (continuous with epidermis)","Inner root sheath (Henle, Huxley layers)","Hair matrix (rapidly dividing cells at bulb)","Dermal papilla (specialized mesenchyme)","Bulge region (stem cell niche)"],magnification:"10x - 40x"},sweat_gland:{stain:"H&E, PAS (basement membrane)",features:["Secretory coil: cuboidal cells (clear + dark)","Myoepithelial cells surrounding secretory portion","Duct: two layers of cuboidal cells","Straight duct ascending through dermis/epidermis"],magnification:"20x - 40x"}}[u.id];return f?i.jsxs("div",{className:"space-y-4",children:[i.jsxs("div",{className:"bg-slate-800/40 border border-slate-700/60 rounded-lg p-3",children:[i.jsx("h3",{className:"text-cyan-300 text-[10px] font-bold uppercase tracking-wider mb-1",children:"Recommended Stain"}),i.jsx("p",{className:"text-slate-200 text-[11px]",children:f.stain})]}),i.jsxs("div",{className:"flex items-center gap-2 text-[11px]",children:[i.jsx("span",{className:"text-slate-400",children:"Magnification:"}),i.jsx("span",{className:"text-slate-200 font-medium",children:f.magnification})]}),i.jsxs("div",{children:[i.jsx("h3",{className:"text-slate-300 text-[10px] font-bold uppercase tracking-wider mb-2",children:"Key Histologic Features"}),i.jsx("ul",{className:"space-y-1.5",children:f.features.map((o,m)=>i.jsxs("li",{className:"flex items-start gap-2 text-[11px]",children:[i.jsx("span",{className:"text-emerald-400 mt-0.5",children:""}),i.jsx("span",{className:"text-slate-300",children:o})]},m))})]}),i.jsx("div",{className:"bg-slate-900/60 border border-slate-700 rounded-lg p-3",children:i.jsx("p",{className:"text-[10px] text-slate-400 italic",children:`Tip: Use the 3D model's "Zoom" control to see cellular-level detail when available.`})})]}):i.jsx("div",{className:"text-center py-8 text-slate-500 text-sm",children:"Histology information not yet available for this structure."})},ig=({data:u,questions:c})=>{const[f,o]=x.useState(null);return c.length===0?i.jsx("div",{className:"text-center py-8 text-slate-500 text-sm",children:"No practice questions available for this structure yet."}):i.jsxs("div",{className:"space-y-3",children:[i.jsxs("p",{className:"text-[11px] text-slate-400 mb-2",children:[c.length," question",c.length!==1?"s":""," related to ",u.id.replace("_"," ")]}),c.slice(0,5).map(m=>{var h;return i.jsxs("div",{className:"bg-slate-800/40 border border-slate-700/60 rounded-lg overflow-hidden",children:[i.jsx("button",{onClick:()=>o(f===m.id?null:m.id),className:"w-full text-left p-3 hover:bg-slate-800/60 transition-colors",children:i.jsxs("div",{className:"flex items-start justify-between gap-2",children:[i.jsxs("div",{className:"flex-1",children:[i.jsxs("div",{className:"flex items-center gap-2 mb-1",children:[i.jsx("span",{className:`
                    px-1.5 py-0.5 rounded text-[9px] font-medium
                    ${m.difficulty==="beginner"?"bg-emerald-900/50 text-emerald-300":m.difficulty==="intermediate"?"bg-blue-900/50 text-blue-300":m.difficulty==="advanced"?"bg-purple-900/50 text-purple-300":"bg-amber-900/50 text-amber-300"}
                  `,children:m.difficulty}),(h=m.examLevels)==null?void 0:h.map(S=>i.jsx("span",{className:"text-[9px] text-slate-500 uppercase",children:S},S))]}),i.jsx("p",{className:"text-[11px] text-slate-200 line-clamp-2",children:m.prompt})]}),i.jsx("svg",{className:`w-4 h-4 text-slate-400 transition-transform ${f===m.id?"rotate-180":""}`,fill:"none",stroke:"currentColor",viewBox:"0 0 24 24",children:i.jsx("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:2,d:"M19 9l-7 7-7-7"})})]})}),f===m.id&&i.jsx("div",{className:"px-3 pb-3 pt-0",children:i.jsxs("div",{className:"border-t border-slate-700 pt-3",children:[m.options&&i.jsx("div",{className:"space-y-1.5 mb-3",children:m.options.map(S=>i.jsxs("div",{className:`
                          px-2 py-1.5 rounded text-[10px]
                          ${S.isCorrect?"bg-emerald-900/30 text-emerald-300 border border-emerald-700/50":"bg-slate-800/60 text-slate-400 border border-slate-700/50"}
                        `,children:[i.jsxs("span",{className:"font-medium",children:[S.id.toUpperCase(),"."]})," ",S.text,S.isCorrect&&i.jsx("span",{className:"ml-2",children:""})]},S.id))}),i.jsx("div",{className:"bg-slate-900/60 border border-slate-700/50 rounded p-2",children:i.jsx("p",{className:"text-[10px] text-slate-300 leading-relaxed",children:m.explanation})})]})})]},m.id)}),c.length>5&&i.jsxs("p",{className:"text-[10px] text-slate-500 text-center",children:["+",c.length-5," more questions available in Quiz Mode"]})]})},rg=({data:u,onClose:c,lang:f})=>{const[o,m]=x.useState("overview");x.useEffect(()=>{m("overview")},[u==null?void 0:u.id]);const h=x.useMemo(()=>u?ag(u.id):[],[u==null?void 0:u.id]);if(!u)return null;const S=Ai(u.title,f);return i.jsxs("div",{className:"flex flex-col h-full",children:[i.jsxs("div",{className:"flex items-center justify-between px-4 py-3 border-b border-slate-700/70 bg-slate-900",children:[i.jsxs("div",{children:[i.jsx("h2",{className:"text-sm font-semibold text-slate-50",children:S}),i.jsx("p",{className:"text-[11px] text-slate-400",children:u.layer})]}),i.jsx("button",{onClick:c,className:"text-slate-400 hover:text-slate-200 transition-colors","aria-label":"Close panel",children:i.jsx("svg",{className:"w-5 h-5",fill:"none",stroke:"currentColor",viewBox:"0 0 24 24",children:i.jsx("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:2,d:"M6 18L18 6M6 6l12 12"})})})]}),i.jsxs("div",{className:"flex gap-1 px-4 py-2 border-b border-slate-700/70 bg-slate-900/50",children:[i.jsx(Gr,{active:o==="overview",onClick:()=>m("overview"),label:"Overview"}),i.jsx(Gr,{active:o==="clinical",onClick:()=>m("clinical"),label:"Clinical"}),i.jsx(Gr,{active:o==="histology",onClick:()=>m("histology"),label:"Histology"}),i.jsx(Gr,{active:o==="practice",onClick:()=>m("practice"),label:"Practice",badge:h.length})]}),i.jsxs("div",{className:"flex-1 overflow-y-auto p-4",children:[o==="overview"&&i.jsx(lg,{data:u,lang:f}),o==="clinical"&&i.jsx(ng,{data:u,lang:f}),o==="histology"&&i.jsx(sg,{data:u,lang:f}),o==="practice"&&i.jsx(ig,{data:u,questions:h})]})]})},cg=({visibility:u,onSelectStructure:c,onHoverStructure:f,zoomLevelId:o,explodeValue:m,clippingNormalized:h,onClose:S})=>{var Y,X;const N=x.useRef(null),v=x.useRef(null),[p,D]=x.useState("normal"),[T,G]=x.useState("psoriasis");return i.jsxs("div",{className:"fixed inset-0 z-50 bg-slate-950",children:[i.jsxs("div",{className:"absolute top-0 left-0 right-0 z-10 bg-slate-900/90 border-b border-slate-700 px-4 py-2 flex items-center justify-between",children:[i.jsxs("div",{className:"flex items-center gap-4",children:[i.jsx("h2",{className:"text-sm font-semibold text-slate-100",children:"Comparison View"}),i.jsx("span",{className:"text-[10px] text-slate-400",children:"Side-by-side disease comparison"})]}),i.jsx("button",{onClick:S,className:"px-3 py-1 rounded-md bg-slate-800 border border-slate-600 text-slate-300 hover:bg-slate-700 text-[11px] transition-colors",children:"Exit Comparison"})]}),i.jsxs("div",{className:"absolute top-12 bottom-0 left-0 right-0 flex",children:[i.jsxs("div",{className:"relative w-1/2 border-r border-slate-700 overflow-hidden",children:[i.jsx("div",{className:"absolute top-2 left-2 z-10 bg-slate-900/90 border border-slate-700 rounded-lg px-3 py-1.5",children:i.jsxs("div",{className:"flex items-center gap-2 text-[11px]",children:[i.jsx("span",{className:"text-slate-400",children:"Left:"}),i.jsx("select",{value:p,onChange:O=>D(O.target.value),className:"bg-slate-800 border border-slate-600 rounded px-2 py-0.5 text-slate-200 text-[11px]",children:ts.map(O=>i.jsx("option",{value:O.id,children:O.label},O.id))})]})}),i.jsx(Qr,{ref:N,explodeValue:m,visibility:u,onSelectStructure:c,onHoverStructure:f,diseaseId:p,timelineId:"none",timelineT:0,zoomLevelId:o,activeTourId:null,activeTourStepIndex:0,clippingNormalized:h,collagenReduced:!1}),i.jsx("div",{className:"absolute bottom-4 left-1/2 -translate-x-1/2 bg-slate-900/90 border border-slate-700 rounded-lg px-3 py-1 text-[11px] text-slate-300",children:((Y=ts.find(O=>O.id===p))==null?void 0:Y.label)||"Normal"})]}),i.jsxs("div",{className:"relative w-1/2 overflow-hidden",children:[i.jsx("div",{className:"absolute top-2 right-2 z-10 bg-slate-900/90 border border-slate-700 rounded-lg px-3 py-1.5",children:i.jsxs("div",{className:"flex items-center gap-2 text-[11px]",children:[i.jsx("span",{className:"text-slate-400",children:"Right:"}),i.jsx("select",{value:T,onChange:O=>G(O.target.value),className:"bg-slate-800 border border-slate-600 rounded px-2 py-0.5 text-slate-200 text-[11px]",children:ts.map(O=>i.jsx("option",{value:O.id,children:O.label},O.id))})]})}),i.jsx(Qr,{ref:v,explodeValue:m,visibility:u,onSelectStructure:c,onHoverStructure:f,diseaseId:T,timelineId:"none",timelineT:0,zoomLevelId:o,activeTourId:null,activeTourStepIndex:0,clippingNormalized:h,collagenReduced:!1}),i.jsx("div",{className:"absolute bottom-4 left-1/2 -translate-x-1/2 bg-slate-900/90 border border-slate-700 rounded-lg px-3 py-1 text-[11px] text-slate-300",children:((X=ts.find(O=>O.id===T))==null?void 0:X.label)||"Normal"})]}),i.jsx("div",{className:"absolute top-1/2 left-1/2 -translate-x-1/2 -translate-y-1/2 w-px h-8 bg-slate-500"})]})]})},og=({onSettingsClick:u,onHelpClick:c,onFullscreenClick:f,isFullscreen:o,isMobile:m=!1,onMenuClick:h})=>i.jsxs("header",{className:`
        fixed top-0 left-0 right-0 z-40
        bg-slate-900/95 border-b border-slate-700/70
        flex items-center justify-between px-4
        backdrop-blur-sm
        ${m?"h-[44px]":"h-[50px]"}
      `,children:[m&&h&&i.jsx("button",{onClick:h,className:`
            w-9 h-9 flex items-center justify-center
            rounded-lg text-slate-400
            hover:bg-slate-800 hover:text-slate-200
            transition-colors mr-2
          `,"aria-label":"Open menu",children:i.jsx("svg",{className:"w-5 h-5",fill:"none",stroke:"currentColor",viewBox:"0 0 24 24",children:i.jsx("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:2,d:"M4 6h16M4 12h16M4 18h16"})})}),i.jsxs("div",{className:"flex items-center gap-2",children:[i.jsx("div",{className:m?"text-xl":"text-2xl",role:"img","aria-label":"Microscope",children:""}),i.jsxs("div",{children:[i.jsx("h1",{className:`font-semibold tracking-wide text-slate-50 ${m?"text-xs":"text-sm"}`,children:"Skinoculars"}),!m&&i.jsx("p",{className:"text-[10px] text-slate-400",children:"Interactive Skin Anatomy"})]})]}),i.jsxs("div",{className:"flex items-center gap-2",children:[i.jsx("button",{onClick:u,className:`
            w-9 h-9 flex items-center justify-center
            rounded-lg border border-slate-700
            bg-slate-800/80 text-slate-400
            hover:bg-slate-700 hover:text-slate-200
            transition-colors
          `,title:"Settings","aria-label":"Open settings",children:i.jsxs("svg",{className:"w-4 h-4",fill:"none",stroke:"currentColor",viewBox:"0 0 24 24",children:[i.jsx("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:2,d:"M10.325 4.317c.426-1.756 2.924-1.756 3.35 0a1.724 1.724 0 002.573 1.066c1.543-.94 3.31.826 2.37 2.37a1.724 1.724 0 001.065 2.572c1.756.426 1.756 2.924 0 3.35a1.724 1.724 0 00-1.066 2.573c.94 1.543-.826 3.31-2.37 2.37a1.724 1.724 0 00-2.572 1.065c-.426 1.756-2.924 1.756-3.35 0a1.724 1.724 0 00-2.573-1.066c-1.543.94-3.31-.826-2.37-2.37a1.724 1.724 0 00-1.065-2.572c-1.756-.426-1.756-2.924 0-3.35a1.724 1.724 0 001.066-2.573c-.94-1.543.826-3.31 2.37-2.37.996.608 2.296.07 2.572-1.065z"}),i.jsx("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:2,d:"M15 12a3 3 0 11-6 0 3 3 0 016 0z"})]})}),i.jsx("button",{onClick:c,className:`
            w-9 h-9 flex items-center justify-center
            rounded-lg border border-slate-700
            bg-slate-800/80 text-slate-400
            hover:bg-slate-700 hover:text-slate-200
            transition-colors
          `,title:"Help (H)","aria-label":"Open help",children:i.jsx("svg",{className:"w-4 h-4",fill:"none",stroke:"currentColor",viewBox:"0 0 24 24",children:i.jsx("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:2,d:"M8.228 9c.549-1.165 2.03-2 3.772-2 2.21 0 4 1.343 4 3 0 1.4-1.278 2.575-3.006 2.907-.542.104-.994.54-.994 1.093m0 3h.01M21 12a9 9 0 11-18 0 9 9 0 0118 0z"})})}),i.jsx("button",{onClick:f,className:`
            hidden md:flex
            w-9 h-9 items-center justify-center
            rounded-lg border border-slate-700
            bg-slate-800/80 text-slate-400
            hover:bg-slate-700 hover:text-slate-200
            transition-colors
          `,title:"Fullscreen (F)","aria-label":o?"Exit fullscreen":"Enter fullscreen",children:o?i.jsx("svg",{className:"w-4 h-4",fill:"none",stroke:"currentColor",viewBox:"0 0 24 24",children:i.jsx("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:2,d:"M9 9V4.5M9 9H4.5M9 9L3.75 3.75M9 15v4.5M9 15H4.5M9 15l-5.25 5.25M15 9h4.5M15 9V4.5M15 9l5.25-5.25M15 15h4.5M15 15v4.5m0-4.5l5.25 5.25"})}):i.jsx("svg",{className:"w-4 h-4",fill:"none",stroke:"currentColor",viewBox:"0 0 24 24",children:i.jsx("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:2,d:"M3.75 3.75v4.5m0-4.5h4.5m-4.5 0L9 9M3.75 20.25v-4.5m0 4.5h4.5m-4.5 0L9 15M20.25 3.75h-4.5m4.5 0v4.5m0-4.5L15 9m5.25 11.25h-4.5m4.5 0v-4.5m0 4.5L15 15"})})})]})]}),a0=x.memo(og);a0.displayName="Header";const ug=[{mode:"study",icon:"",label:"Study",description:"Explore skin anatomy"},{mode:"quiz",icon:"",label:"Quiz",description:"Test your knowledge"},{mode:"compare",icon:"",label:"Compare",description:"Compare conditions"},{mode:"tours",icon:"",label:"Tours",description:"Guided learning"}],dg=({activeMode:u,onModeChange:c,collapsed:f,onToggleCollapse:o})=>i.jsxs("nav",{className:`
        fixed left-0 top-[50px] bottom-[70px] z-[60]
        bg-slate-900/95 border-r border-slate-700/70
        flex flex-col
        transition-all duration-300 ease-in-out
        ${f?"w-[60px]":"w-[180px]"}
      `,"aria-label":"Main navigation",children:[i.jsx("div",{className:"flex-1 py-4",children:ug.map(m=>i.jsxs("button",{onClick:()=>c(m.mode),className:`
              w-full flex items-center gap-3 px-4 py-3
              transition-all duration-200
              ${u===m.mode?"bg-blue-600/30 border-r-2 border-blue-400 text-blue-100":"text-slate-400 hover:bg-slate-800/50 hover:text-slate-200"}
            `,title:f?`${m.label}: ${m.description}`:void 0,"aria-current":u===m.mode?"page":void 0,children:[i.jsx("span",{className:"text-xl",role:"img","aria-hidden":"true",children:m.icon}),!f&&i.jsxs("div",{className:"flex flex-col items-start overflow-hidden",children:[i.jsx("span",{className:"text-sm font-medium whitespace-nowrap",children:m.label}),i.jsx("span",{className:"text-[10px] text-slate-500 whitespace-nowrap",children:m.description})]})]},m.mode))}),i.jsx("div",{className:"border-t border-slate-700/70 p-2",children:i.jsxs("button",{onClick:o,className:`
            w-full flex items-center justify-center gap-2 px-3 py-2
            text-slate-500 hover:text-slate-300 hover:bg-slate-800/50
            rounded transition-colors
          `,"aria-label":f?"Expand navigation":"Collapse navigation",title:f?"Expand":"Collapse",children:[i.jsx("span",{className:`
              text-lg transition-transform duration-300
              ${f?"rotate-180":""}
            `,children:""}),!f&&i.jsx("span",{className:"text-xs",children:"Collapse"})]})})]}),l0=x.memo(dg);l0.displayName="LeftNavigation";const fg=({explodeValue:u,onExplodeChange:c,zoomLevel:f,onZoomChange:o,diseaseId:m,onDiseaseChange:h,clippingEnabled:S,clippingValue:N,onClippingToggle:v,onClippingChange:p,onResetView:D,leftOffset:T,isMobile:G=!1})=>{const[Y,X]=x.useState(!1);return G?i.jsxs(i.Fragment,{children:[i.jsxs("div",{className:`
            fixed bottom-0 left-0 right-0 h-[60px] z-30
            bg-slate-900/95 border-t border-slate-700/70
            flex items-center justify-between px-3
            backdrop-blur-sm
          `,children:[i.jsx("div",{className:"flex gap-1",children:Mn.map(O=>i.jsx("button",{onClick:()=>o(O.id),"aria-pressed":f===O.id,className:`
                  w-10 h-10 rounded-lg text-[10px] font-medium
                  transition-colors duration-150 flex items-center justify-center
                  ${f===O.id?"bg-blue-600/60 border border-blue-400 text-white":"bg-slate-800/80 border border-slate-700 text-slate-400"}
                `,children:O.id==="macro"?"1x":O.id==="meso"?"10x":"100x"},O.id))}),i.jsx("div",{className:"flex items-center gap-2 flex-1 mx-3",children:i.jsx("input",{type:"range",min:0,max:1,step:.01,value:u,onChange:O=>c(parseFloat(O.target.value)),className:"flex-1 accent-blue-500","aria-label":"Explode layers"})}),i.jsx("button",{onClick:()=>X(!Y),className:`
              w-10 h-10 rounded-lg text-[11px]
              flex items-center justify-center
              transition-colors
              ${Y?"bg-blue-600/60 border border-blue-400 text-white":"bg-slate-800/80 border border-slate-700 text-slate-400"}
            `,"aria-label":"More controls",children:i.jsx("svg",{className:"w-5 h-5",fill:"none",stroke:"currentColor",viewBox:"0 0 24 24",children:i.jsx("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:2,d:"M12 6V4m0 2a2 2 0 100 4m0-4a2 2 0 110 4m-6 8a2 2 0 100-4m0 4a2 2 0 110-4m0 4v2m0-6V4m6 6v10m6-2a2 2 0 100-4m0 4a2 2 0 110-4m0 4v2m0-6V4"})})}),i.jsx("button",{onClick:D,className:`
              w-10 h-10 ml-1 rounded-lg text-[11px]
              bg-slate-800/80 border border-slate-700
              text-slate-400 flex items-center justify-center
              transition-colors
            `,title:"Reset view","aria-label":"Reset view",children:i.jsx("svg",{className:"w-5 h-5",fill:"none",stroke:"currentColor",viewBox:"0 0 24 24",children:i.jsx("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:2,d:"M4 4v5h.582m15.356 2A8.001 8.001 0 004.582 9m0 0H9m11 11v-5h-.581m0 0a8.003 8.003 0 01-15.357-2m15.357 2H15"})})})]}),Y&&i.jsxs("div",{className:`
              fixed bottom-[60px] left-0 right-0 z-30
              bg-slate-900/95 border-t border-slate-700/70
              p-4 space-y-4 backdrop-blur-sm
            `,children:[i.jsxs("div",{className:"flex items-center justify-between",children:[i.jsx("label",{className:"text-[12px] text-slate-400",children:"Condition"}),i.jsx("select",{value:m,onChange:O=>h(O.target.value),className:`
                  bg-slate-800/90 border border-slate-700
                  rounded px-3 py-2 text-[12px] text-slate-200
                  focus:outline-none focus:border-blue-500
                  flex-1 ml-4
                `,children:ts.map(O=>i.jsx("option",{value:O.id,children:O.label},O.id))})]}),i.jsxs("div",{className:"flex items-center justify-between",children:[i.jsxs("label",{className:"inline-flex items-center gap-2 text-[12px] text-slate-400",children:[i.jsx("input",{type:"checkbox",checked:S,onChange:v,className:"accent-blue-500 w-4 h-4"}),"Cross-section"]}),S&&i.jsx("input",{type:"range",min:0,max:1,step:.01,value:N,onChange:O=>p(parseFloat(O.target.value)),className:"flex-1 ml-4 accent-blue-500","aria-label":"Clipping plane position"})]}),i.jsxs("div",{className:"flex items-center justify-between",children:[i.jsxs("label",{className:"text-[12px] text-slate-400",children:["Explode: ",Math.round(u*100),"%"]}),i.jsx("input",{type:"range",min:0,max:1,step:.01,value:u,onChange:O=>c(parseFloat(O.target.value)),className:"flex-1 ml-4 accent-blue-500","aria-label":"Explode layers"})]})]})]}):i.jsxs("div",{className:`
        fixed bottom-0 right-0 h-[70px] z-30
        bg-slate-900/95 border-t border-slate-700/70
        flex items-center justify-between gap-4 px-4
        backdrop-blur-sm
      `,style:{left:T},children:[i.jsxs("div",{className:"flex items-center gap-6",children:[i.jsxs("div",{className:"flex items-center gap-2",children:[i.jsx("label",{className:"text-[11px] text-slate-400 whitespace-nowrap",children:"Explode"}),i.jsx("input",{type:"range",min:0,max:1,step:.01,value:u,onChange:O=>c(parseFloat(O.target.value)),className:"w-24 accent-blue-500","aria-label":"Explode layers"}),i.jsxs("span",{className:"text-[10px] text-slate-500 w-8",children:[Math.round(u*100),"%"]})]}),i.jsxs("div",{className:"flex items-center gap-2",children:[i.jsxs("label",{className:"inline-flex items-center gap-1.5 text-[11px] text-slate-400",children:[i.jsx("input",{type:"checkbox",checked:S,onChange:v,className:"accent-blue-500"}),"Clip"]}),S&&i.jsx("input",{type:"range",min:0,max:1,step:.01,value:N,onChange:O=>p(parseFloat(O.target.value)),className:"w-20 accent-blue-500","aria-label":"Clipping plane position"})]})]}),i.jsxs("div",{className:"flex items-center gap-2",children:[i.jsx("span",{className:"text-[11px] text-slate-400",children:"Zoom"}),i.jsx("div",{className:"flex gap-1",children:Mn.map(O=>i.jsx("button",{onClick:()=>o(O.id),"aria-pressed":f===O.id,className:`
                px-3 py-1.5 rounded-md text-[11px] font-medium
                transition-colors duration-150
                ${f===O.id?"bg-blue-600/60 border border-blue-400 text-white":"bg-slate-800/80 border border-slate-700 text-slate-400 hover:bg-slate-700 hover:text-slate-200"}
              `,children:O.label},O.id))})]}),i.jsxs("div",{className:"flex items-center gap-4",children:[i.jsxs("div",{className:"flex items-center gap-2",children:[i.jsx("label",{className:"text-[11px] text-slate-400",children:"Condition"}),i.jsx("select",{value:m,onChange:O=>h(O.target.value),className:`
              bg-slate-800/90 border border-slate-700
              rounded px-2 py-1.5 text-[11px] text-slate-200
              focus:outline-none focus:border-blue-500
            `,children:ts.map(O=>i.jsx("option",{value:O.id,children:O.label},O.id))})]}),i.jsx("button",{onClick:D,className:`
            px-3 py-1.5 rounded-md text-[11px]
            bg-slate-800/80 border border-slate-700
            text-slate-400 hover:bg-slate-700 hover:text-slate-200
            transition-colors
          `,title:"Reset view (R)",children:" Reset"})]})]})},mg=({explodeValue:u,onExplodeChange:c,visibility:f,onToggleVisibility:o,collagenReduced:m,onCollagenDensityChange:h,onToggleLayer:S,clippingEnabled:N,clippingValue:v,onClippingToggle:p,onClippingChange:D,timelineId:T,onTimelineChange:G,timelineT:Y,onTimelineTChange:X,cutawayEnabled:O=!1,onCutawayToggle:xe})=>{const[Z,me]=x.useState(!1);return i.jsxs("div",{className:`absolute bottom-4 left-4 bg-slate-900/90 border border-slate-700/70 rounded-2xl shadow-xl text-xs text-slate-100 pointer-events-auto transition-all duration-300 ${Z?"max-w-[52px]":"max-w-md"}`,children:[i.jsx("button",{onClick:()=>me(!Z),className:"absolute -top-2 -right-2 w-6 h-6 bg-slate-800 border border-slate-600 rounded-full text-slate-400 hover:text-slate-200 hover:bg-slate-700 transition-colors flex items-center justify-center text-[10px] z-10",title:Z?"Expand controls":"Collapse controls","aria-expanded":!Z,"aria-label":Z?"Expand controls":"Collapse controls",children:Z?"":""}),Z?i.jsx("div",{className:"p-3 flex flex-col items-center gap-2",children:i.jsx("span",{className:"text-[10px] text-slate-400 writing-mode-vertical",style:{writingMode:"vertical-rl"},children:"Controls"})}):i.jsxs("div",{className:"p-4",children:[i.jsx("h2",{className:"text-[11px] font-semibold uppercase tracking-wide text-slate-400 mb-2",children:"View controls"}),i.jsxs("div",{className:"mb-3",children:[i.jsxs("div",{className:"flex items-center justify-between mb-1",children:[i.jsx("span",{className:"text-[11px] text-slate-300",children:"Explode layers"}),i.jsx("span",{className:"text-[10px] text-slate-500",children:u.toFixed(2)})]}),i.jsx(Fo,{value:u,onChange:c,accentColor:"blue",tickCount:5})]}),i.jsxs("div",{className:"mb-3",children:[i.jsx("div",{className:"flex items-center justify-between mb-1",children:i.jsx("span",{className:"text-[11px] text-slate-300",children:"Layers"})}),i.jsxs("div",{className:"flex flex-wrap gap-1",children:[i.jsx(Nn,{label:"Epidermis",active:f.epidermis,onClick:()=>S("epidermis")}),i.jsx(Nn,{label:"Dermis",active:f.dermis,onClick:()=>S("dermis")}),i.jsx(Nn,{label:"Hypodermis",active:f.hypodermis,onClick:()=>S("hypodermis")})]})]}),i.jsxs("div",{className:"mb-3",children:[i.jsx("div",{className:"flex items-center justify-between mb-1",children:i.jsx("span",{className:"text-[11px] text-slate-300",children:"Structures"})}),i.jsxs("div",{className:"flex flex-wrap gap-1.5",children:[i.jsx(Nn,{label:"Hair",active:f.structures.hair,onClick:()=>o("hair")}),i.jsx(Nn,{label:"Sweat",active:f.structures.sweat,onClick:()=>o("sweat")}),i.jsx(Nn,{label:"Vessels",active:f.structures.vessels,onClick:()=>o("vessels")}),i.jsx(Nn,{label:"Nerves",active:f.structures.nerves,onClick:()=>o("nerves")}),i.jsx(Nn,{label:"Collagen",active:f.structures.collagen,onClick:()=>o("collagen")})]})]}),i.jsxs("div",{className:"mb-3",children:[i.jsxs("div",{className:"flex items-center justify-between mb-1",children:[i.jsx("span",{className:"text-[11px] text-slate-300",children:"Collagen density"}),i.jsx("button",{onClick:()=>h(!m),className:`relative w-11 h-6 rounded-full transition-colors ${m?"bg-emerald-500":"bg-slate-700"}`,"aria-label":"Toggle lighter collagen",children:i.jsx("div",{className:`absolute top-1 w-4 h-4 rounded-full bg-white transition-transform ${m?"left-6":"left-1"}`})})]}),i.jsx("p",{className:"text-[10px] text-slate-500",children:"Lighten collagen fibers to see deeper dermis structures"})]}),i.jsxs("div",{className:"mb-3",children:[i.jsxs("div",{className:"flex items-center justify-between mb-1",children:[i.jsx("span",{className:"text-[11px] text-slate-300",children:"Slice view"}),i.jsxs("label",{className:"inline-flex items-center gap-1 text-[11px] text-slate-400",children:[i.jsx("input",{type:"checkbox",checked:N,onChange:p,className:"accent-blue-500"}),i.jsx("span",{children:N?"On":"Off"})]})]}),i.jsx(Fo,{value:v,onChange:D,accentColor:"emerald",tickCount:5,disabled:!N})]}),G&&X&&i.jsxs("div",{className:"mb-3",children:[i.jsx("div",{className:"flex items-center justify-between mb-1",children:i.jsx("span",{className:"text-[11px] text-slate-300",children:"Timeline"})}),i.jsxs("select",{value:T||"none",onChange:U=>G(U.target.value),className:"w-full mb-2 px-2 py-1.5 rounded bg-slate-800 border border-slate-600 text-[11px] text-slate-200 focus:outline-none focus:border-blue-500",children:[i.jsx("option",{value:"none",children:"None"}),i.jsx("option",{value:"wound_healing",children:"Wound Healing"})]}),T&&T!=="none"&&i.jsxs("div",{children:[i.jsxs("div",{className:"flex items-center justify-between mb-1",children:[i.jsx("span",{className:"text-[10px] text-slate-400",children:"Progress"}),i.jsxs("span",{className:"text-[10px] text-slate-500",children:[((Y||0)*100).toFixed(0),"%"]})]}),i.jsx(Fo,{value:Y||0,onChange:X,accentColor:"blue",tickCount:5})]})]}),xe&&T==="wound_healing"&&i.jsxs("div",{children:[i.jsxs("div",{className:"flex items-center justify-between mb-1",children:[i.jsx("span",{className:"text-[11px] text-slate-300",children:"Cross-section"}),i.jsxs("label",{className:"inline-flex items-center gap-1 text-[11px] text-slate-400",children:[i.jsx("input",{type:"checkbox",checked:O,onChange:xe,className:"accent-blue-500"}),i.jsx("span",{children:O?"On":"Off"})]})]}),i.jsx("p",{className:"text-[10px] text-slate-500",children:"View internal wound structure"})]})]})]})},Fo=({value:u,onChange:c,accentColor:f,tickCount:o,disabled:m=!1})=>{const h=Array.from({length:o},(N,v)=>v/(o-1)),S=f==="blue"?"accent-blue-500":"accent-emerald-500";return i.jsxs("div",{className:"relative",children:[i.jsx("input",{type:"range",min:0,max:1,step:.01,value:u,onChange:N=>c(parseFloat(N.target.value)),disabled:m,className:`w-full ${S} disabled:opacity-40 cursor-pointer opacity-100`}),i.jsx("div",{className:"absolute top-4 left-0 right-0 flex justify-between px-0.5 pointer-events-none",children:h.map((N,v)=>i.jsx("div",{className:`w-0.5 h-1 rounded-full ${m?"bg-slate-700":"bg-slate-500"}`},v))})]})},Nn=({label:u,active:c,onClick:f})=>i.jsx("button",{onClick:f,"aria-pressed":c,"aria-label":`Toggle ${u} visibility`,className:`px-3 py-1.5 rounded-full text-[11px] font-semibold transition-all duration-200 border
      ${c?"bg-blue-600/20 border-blue-500 text-blue-200 shadow-[0_0_10px_rgba(59,130,246,0.3)]":"bg-slate-800/50 border-slate-600 text-slate-500 hover:bg-slate-800 hover:text-slate-300"}
    `,children:u}),ks=640,Hs=1024;function n0(){const[u,c]=x.useState(()=>{if(typeof window>"u")return{isMobile:!1,isTablet:!1,isDesktop:!0,breakpoint:"desktop",width:1200};const f=window.innerWidth;return{isMobile:f<=ks,isTablet:f>ks&&f<=Hs,isDesktop:f>Hs,breakpoint:f<=ks?"mobile":f<=Hs?"tablet":"desktop",width:f}});return x.useEffect(()=>{const f=()=>{const o=window.innerWidth;c({isMobile:o<=ks,isTablet:o>ks&&o<=Hs,isDesktop:o>Hs,breakpoint:o<=ks?"mobile":o<=Hs?"tablet":"desktop",width:o})};return window.addEventListener("resize",f),()=>window.removeEventListener("resize",f)},[]),u}const hg=({mode:u,onModeChange:c,leftNavCollapsed:f,onToggleLeftNav:o,explodeValue:m,onExplodeChange:h,zoomLevel:S,onZoomChange:N,diseaseId:v,onDiseaseChange:p,palette:D,phototype:T,hydration:G,phValue:Y,clippingEnabled:X,clippingValue:O,onClippingToggle:xe,onClippingChange:Z,onResetView:me,visibility:U,onToggleVisibility:le,collagenReduced:fe,onCollagenDensityChange:De,onToggleLayer:de,timelineId:ce,onTimelineChange:ve,timelineT:W,onTimelineTChange:F,onSettingsClick:he,highContrast:ae=!1,isXrPresenting:we=!1,onAnchorRecenter:Pe,anchorScale:A=.35,onAnchorScaleChange:B,onPaletteCycle:oe,onHelpClick:Re,cutawayEnabled:Te=!1,onCutawayToggle:y,children:_,infoPanel:Q,modeOverlay:ee})=>{const[pe,Se]=x.useState(!1),[Ne,Je]=x.useState(!1),[ye,Qt]=x.useState(!1),{isMobile:Le,isTablet:Ft}=n0(),Mt=Le?0:f?60:180,st=Le?60:70,qt=Le?44:50,it=Le?"100%":Ft?280:320,nl=x.useCallback(()=>{document.fullscreenElement?document.exitFullscreen().then(()=>{Se(!1)}).catch(()=>{}):document.documentElement.requestFullscreen().then(()=>{Se(!0)}).catch(()=>{})},[]);return x.useEffect(()=>{const We=()=>{Se(!!document.fullscreenElement)};return document.addEventListener("fullscreenchange",We),()=>document.removeEventListener("fullscreenchange",We)},[]),x.useEffect(()=>{Le||(Je(!1),Qt(!1))},[Le]),x.useEffect(()=>{Le&&Q&&Qt(!0)},[Le,Q]),x.useEffect(()=>{const We=dt=>{if(!(dt.target instanceof HTMLInputElement||dt.target instanceof HTMLTextAreaElement))switch(dt.key.toLowerCase()){case"s":!dt.ctrlKey&&!dt.metaKey&&c("study");break;case"q":c("quiz");break;case"c":!dt.ctrlKey&&!dt.metaKey&&c("compare");break;case"t":c("tours");break;case"r":me();break;case"h":case"?":Re();break;case"f":nl();break;case"escape":Je(!1),Qt(!1);break;case"1":N("macro");break;case"2":N("meso");break;case"3":N("micro");break}};return window.addEventListener("keydown",We),()=>window.removeEventListener("keydown",We)},[c,me,Re,nl,N]),i.jsxs("div",{className:`w-screen h-screen bg-slate-950 text-slate-50 overflow-hidden ${ae?"high-contrast":""}`,"data-high-contrast":ae,children:[i.jsx(a0,{onSettingsClick:he,onHelpClick:Re,onFullscreenClick:nl,isFullscreen:pe,isMobile:Le,onMenuClick:()=>Je(!Ne)}),!Le&&i.jsx(l0,{activeMode:u,onModeChange:c,collapsed:f,onToggleCollapse:o}),Le&&Ne&&i.jsx("div",{className:"fixed inset-0 z-40 bg-black/60",onClick:()=>Je(!1),children:i.jsx("div",{className:`
              absolute left-0 top-0 bottom-0 w-64
              bg-slate-900 border-r border-slate-700
              shadow-xl
            `,onClick:We=>We.stopPropagation(),children:i.jsxs("div",{className:"p-4 pt-16",children:[i.jsx("h3",{className:"text-xs font-semibold text-slate-400 uppercase tracking-wider mb-3",children:"Mode"}),["study","quiz","compare","tours"].map(We=>i.jsx("button",{onClick:()=>{c(We),Je(!1)},className:`
                    w-full text-left px-4 py-3 rounded-lg mb-1 text-sm font-medium
                    ${u===We?"bg-blue-600/20 text-blue-300 border border-blue-500/50":"text-slate-300 hover:bg-slate-800"}
                  `,children:We.charAt(0).toUpperCase()+We.slice(1)},We))]})})}),i.jsxs("main",{className:"fixed transition-all duration-300",style:{top:qt,left:Mt,right:!Le&&Q?it:0,bottom:st},children:[i.jsx("div",{className:"w-full h-full",children:_}),!Le&&i.jsx(mg,{explodeValue:m,onExplodeChange:h,visibility:U,onToggleVisibility:le,collagenReduced:fe,onCollagenDensityChange:De,onToggleLayer:de,clippingEnabled:X,clippingValue:O,onClippingToggle:xe,onClippingChange:Z,timelineId:ce,onTimelineChange:ve,timelineT:W,onTimelineTChange:F,cutawayEnabled:Te,onCutawayToggle:y}),ee&&i.jsx("div",{className:"absolute inset-0 pointer-events-none",children:i.jsx("div",{className:"pointer-events-auto",children:ee})})]}),!Le&&Q&&i.jsx("aside",{className:`
            fixed right-0
            bg-slate-900/95 border-l border-slate-700/70
            overflow-y-auto
            transition-all duration-300
          `,style:{top:qt,bottom:st,width:it},children:Q}),Le&&Q&&i.jsxs(i.Fragment,{children:[i.jsx("button",{onClick:()=>Qt(!ye),className:`
              fixed right-4 z-30
              bg-blue-600 text-white
              w-12 h-12 rounded-full
              flex items-center justify-center
              shadow-lg
            `,style:{bottom:st+16},children:i.jsx("svg",{className:"w-5 h-5",fill:"none",stroke:"currentColor",viewBox:"0 0 24 24",children:i.jsx("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:2,d:"M13 16h-1v-4h-1m1-4h.01M21 12a9 9 0 11-18 0 9 9 0 0118 0z"})})}),ye&&i.jsxs("div",{className:"fixed inset-0 z-40",onClick:()=>Qt(!1),children:[i.jsx("div",{className:"absolute inset-0 bg-black/40"}),i.jsxs("div",{className:`
                  absolute left-0 right-0 bottom-0
                  bg-slate-900 border-t border-slate-700
                  rounded-t-2xl
                  max-h-[70vh] overflow-hidden
                `,onClick:We=>We.stopPropagation(),children:[i.jsx("div",{className:"flex justify-center py-3",children:i.jsx("div",{className:"w-10 h-1 rounded-full bg-slate-600"})}),i.jsx("div",{className:"overflow-y-auto max-h-[calc(70vh-40px)]",children:Q})]})]})]}),i.jsx(fg,{explodeValue:m,onExplodeChange:h,zoomLevel:S,onZoomChange:N,diseaseId:v,onDiseaseChange:p,clippingEnabled:X,clippingValue:O,onClippingToggle:xe,onClippingChange:Z,onResetView:me,leftOffset:Mt,isMobile:Le}),!Le&&i.jsx("nav",{className:`
            fixed left-1/2 -translate-x-1/2
            bg-slate-900/80 border border-slate-700
            rounded-lg px-3 py-1.5 text-[11px] text-slate-300
            z-20
          `,style:{bottom:st+15},"aria-label":"Zoom breadcrumb",children:i.jsxs("div",{className:"flex items-center gap-1",children:[i.jsx("button",{onClick:()=>N("macro"),className:`hover:text-slate-100 transition-colors ${S==="macro"?"text-blue-400":""}`,children:"Skin"}),i.jsx("span",{className:"text-slate-500",children:""}),i.jsx("button",{onClick:()=>N("meso"),className:`hover:text-slate-100 transition-colors ${S==="meso"?"text-blue-400":""}`,children:"Follicle"}),i.jsx("span",{className:"text-slate-500",children:""}),i.jsx("button",{onClick:()=>N("micro"),className:`hover:text-slate-100 transition-colors ${S==="micro"?"text-blue-400":""}`,children:"Cells"})]})}),S==="micro"&&i.jsxs("div",{className:`
            fixed left-1/2 -translate-x-1/2
            bg-amber-900/80 border border-amber-600
            rounded-lg px-3 py-1.5 text-amber-100
            z-20 flex items-center gap-2
            ${Le?"text-[10px]":"text-[11px]"}
          `,style:{top:qt+10},children:[i.jsx("span",{className:"text-amber-400",children:""}),i.jsx("span",{children:Le?"Cellular view":"Viewing cellular level - Keratinocytes in epidermis"})]})]})},s0={examLevel:"all",questionCount:10,topicFilter:null,timed:!1,timePerQuestion:90,shuffleQuestions:!0},Jm={phase:"config",config:s0,questions:[],currentIndex:0,answers:[],startTime:null,endTime:null,currentQuestionStartTime:null};function pg(u){const c=[...u];for(let f=c.length-1;f>0;f--){const o=Math.floor(Math.random()*(f+1));[c[f],c[o]]=[c[o],c[f]]}return c}function gg(){const[u,c]=x.useState(Jm),[f,o]=x.useState(null),m=x.useRef(null),h=x.useRef(null),S=x.useMemo(()=>u.questions.length===0?null:u.questions[u.currentIndex]||null,[u.questions,u.currentIndex]),N=x.useMemo(()=>u.currentIndex>=u.questions.length-1,[u.currentIndex,u.questions.length]),v=x.useMemo(()=>{const U=u.questions.length,le=u.currentIndex+1,fe=U>0?Math.round(le/U*100):0;return{current:le,total:U,percentage:fe}},[u.currentIndex,u.questions.length]);x.useEffect(()=>{if(m.current&&(clearInterval(m.current),m.current=null),u.phase!=="active"||!u.config.timed){o(null);return}return o(u.config.timePerQuestion),m.current=setInterval(()=>{o(U=>U===null||U<=0?(h.current&&h.current(),u.config.timePerQuestion):U-1)},1e3),()=>{m.current&&(clearInterval(m.current),m.current=null)}},[u.phase,u.config.timed,u.config.timePerQuestion,u.currentIndex]);const p=x.useMemo(()=>{if(u.phase!=="results"&&u.phase!=="review")return null;const U=u.questions.length,le=u.answers.filter(F=>F.selectedAnswer!==null).length,fe=u.answers.filter(F=>F.isCorrect).length,De=U>0?Math.round(fe/U*100):0,de=u.answers.reduce((F,he)=>F+he.timeSpent,0),ce={};u.questions.forEach((F,he)=>{const ae=u.answers[he];ce[F.type]||(ce[F.type]={correct:0,total:0}),ce[F.type].total++,ae!=null&&ae.isCorrect&&ce[F.type].correct++});const ve={};u.questions.forEach((F,he)=>{const ae=u.answers[he];(F.examLevels||[]).forEach(we=>{ve[we]||(ve[we]={correct:0,total:0}),ve[we].total++,ae!=null&&ae.isCorrect&&ve[we].correct++})});const W=u.questions.map((F,he)=>({question:F,answer:u.answers[he]})).filter(({answer:F})=>!(F!=null&&F.isCorrect)).map(({question:F,answer:he})=>{let ae="";if(F.options){const we=F.options.find(Pe=>Pe.isCorrect);ae=(we==null?void 0:we.text)||(we==null?void 0:we.id)||""}else F.targetStructureIds&&(ae=F.targetStructureIds.join(", "));return{question:F,userAnswer:(he==null?void 0:he.selectedAnswer)||null,correctAnswer:ae}});return{totalQuestions:U,answeredQuestions:le,correctAnswers:fe,score:De,timeSpent:de,byCategory:ce,byExamLevel:ve,missedQuestions:W}},[u.phase,u.questions,u.answers]),D=x.useCallback(U=>{c(le=>({...le,config:{...le.config,...U}}))},[]),T=x.useCallback(()=>{c(U=>{let le=[...zi];U.config.examLevel!=="all"&&(le=tg(U.config.examLevel)),U.config.topicFilter&&(le=le.filter(de=>{var ce,ve,W;return((ce=de.relatedStructures)==null?void 0:ce.includes(U.config.topicFilter))||((ve=de.relatedConditions)==null?void 0:ve.includes(U.config.topicFilter))||((W=de.targetStructureIds)==null?void 0:W.includes(U.config.topicFilter))})),U.config.shuffleQuestions&&(le=pg(le));const fe=le.slice(0,U.config.questionCount),De=fe.map((de,ce)=>({questionId:de.id,questionIndex:ce,selectedAnswer:null,isCorrect:!1,timeSpent:0}));return{...U,phase:"active",questions:fe,currentIndex:0,answers:De,startTime:new Date,endTime:null,currentQuestionStartTime:new Date}}),o(null)},[]),G=x.useCallback(U=>{c(le=>{if(le.phase!=="active")return le;const fe=le.questions[le.currentIndex];if(!fe)return le;let De=!1;if(fe.options){const W=fe.options.find(F=>F.id===U);De=(W==null?void 0:W.isCorrect)||!1}else fe.targetStructureIds&&(De=fe.targetStructureIds.includes(U||""));const de=new Date,ce=le.currentQuestionStartTime?Math.round((de.getTime()-le.currentQuestionStartTime.getTime())/1e3):0,ve=[...le.answers];return ve[le.currentIndex]={questionId:fe.id,questionIndex:le.currentIndex,selectedAnswer:U,isCorrect:De,timeSpent:ce},{...le,answers:ve}})},[]),Y=x.useCallback(()=>{c(U=>U.currentIndex>=U.questions.length-1?U:{...U,currentIndex:U.currentIndex+1,currentQuestionStartTime:new Date})},[]);x.useEffect(()=>{h.current=()=>{c(U=>U.currentIndex>=U.questions.length-1?{...U,phase:"results",endTime:new Date}:{...U,currentIndex:U.currentIndex+1,currentQuestionStartTime:new Date})}},[]);const X=x.useCallback(()=>{c(U=>U.currentIndex<=0?U:{...U,currentIndex:U.currentIndex-1,currentQuestionStartTime:new Date})},[]),O=x.useCallback(U=>{c(le=>U<0||U>=le.questions.length?le:{...le,currentIndex:U,currentQuestionStartTime:new Date})},[]),xe=x.useCallback(()=>{c(U=>({...U,phase:"results",endTime:new Date}))},[]),Z=x.useCallback(()=>{c(U=>({...U,phase:"review",currentIndex:0}))},[]),me=x.useCallback(()=>{c({...Jm,config:s0}),o(null)},[]);return{state:u,currentQuestion:S,isLastQuestion:N,progress:v,timeRemaining:f,updateConfig:D,startQuiz:T,submitAnswer:G,nextQuestion:Y,previousQuestion:X,goToQuestion:O,finishQuiz:xe,reviewQuiz:Z,resetQuiz:me,results:p}}const xg=[{id:"all",label:"All Levels",description:"Mix of all difficulty levels"},{id:"step1",label:"USMLE Step 1",description:"Basic science & mechanisms"},{id:"step2",label:"USMLE Step 2",description:"Clinical correlations"},{id:"step3",label:"USMLE Step 3",description:"Management & therapeutics"},{id:"abd",label:"ABD Dermatology",description:"Board-style dermatology"}],yg=[5,10,15,20,25],bg=({config:u,onUpdateConfig:c,onStart:f,onCancel:o})=>{const m=u.examLevel==="all"?zi.length:zi.filter(h=>{var S;return(S=h.examLevels)==null?void 0:S.includes(u.examLevel)}).length;return i.jsxs("div",{className:"w-full max-w-lg mx-auto",children:[i.jsxs("div",{className:"text-center mb-6",children:[i.jsx("div",{className:"text-3xl mb-2",children:""}),i.jsx("h2",{className:"text-xl font-semibold text-slate-100",children:"Quiz Configuration"}),i.jsx("p",{className:"text-sm text-slate-400 mt-1",children:"Customize your quiz experience"})]}),i.jsxs("div",{className:"space-y-5",children:[i.jsxs("div",{children:[i.jsx("label",{className:"block text-sm font-medium text-slate-300 mb-2",children:"Exam Level"}),i.jsx("div",{className:"grid grid-cols-1 gap-2",children:xg.map(h=>i.jsxs("button",{onClick:()=>c({examLevel:h.id}),className:`
                  flex items-center justify-between px-4 py-3 rounded-lg border text-left
                  transition-all duration-150
                  ${u.examLevel===h.id?"bg-blue-600/20 border-blue-500 text-blue-200":"bg-slate-800/60 border-slate-700 text-slate-300 hover:bg-slate-800 hover:border-slate-600"}
                `,children:[i.jsxs("div",{children:[i.jsx("div",{className:"font-medium text-sm",children:h.label}),i.jsx("div",{className:"text-xs text-slate-400",children:h.description})]}),u.examLevel===h.id&&i.jsx("svg",{className:"w-5 h-5 text-blue-400",fill:"currentColor",viewBox:"0 0 20 20",children:i.jsx("path",{fillRule:"evenodd",d:"M16.707 5.293a1 1 0 010 1.414l-8 8a1 1 0 01-1.414 0l-4-4a1 1 0 011.414-1.414L8 12.586l7.293-7.293a1 1 0 011.414 0z",clipRule:"evenodd"})})]},h.id))}),i.jsxs("p",{className:"text-xs text-slate-500 mt-1",children:[m," questions available for this level"]})]}),i.jsxs("div",{children:[i.jsx("label",{className:"block text-sm font-medium text-slate-300 mb-2",children:"Number of Questions"}),i.jsx("div",{className:"flex gap-2 flex-wrap",children:yg.filter(h=>h<=m).map(h=>i.jsx("button",{onClick:()=>c({questionCount:h}),className:`
                  px-4 py-2 rounded-lg border text-sm font-medium
                  transition-all duration-150
                  ${u.questionCount===h?"bg-blue-600/20 border-blue-500 text-blue-200":"bg-slate-800/60 border-slate-700 text-slate-400 hover:bg-slate-800 hover:border-slate-600"}
                `,children:h},h))})]}),i.jsxs("div",{className:"flex items-center justify-between",children:[i.jsxs("div",{children:[i.jsx("label",{className:"text-sm font-medium text-slate-300",children:"Shuffle Questions"}),i.jsx("p",{className:"text-xs text-slate-500",children:"Randomize question order"})]}),i.jsx("button",{onClick:()=>c({shuffleQuestions:!u.shuffleQuestions}),className:`
              relative w-12 h-6 rounded-full transition-colors duration-200
              ${u.shuffleQuestions?"bg-blue-600":"bg-slate-700"}
            `,children:i.jsx("span",{className:`
                absolute top-1 w-4 h-4 rounded-full bg-white shadow transition-transform duration-200
                ${u.shuffleQuestions?"translate-x-7":"translate-x-1"}
              `})})]}),i.jsxs("div",{className:"flex items-center justify-between",children:[i.jsxs("div",{children:[i.jsx("label",{className:"text-sm font-medium text-slate-300",children:"Timed Mode"}),i.jsx("p",{className:"text-xs text-slate-500",children:u.timed?`${u.timePerQuestion}s per question`:"No time limit"})]}),i.jsx("button",{onClick:()=>c({timed:!u.timed}),className:`
              relative w-12 h-6 rounded-full transition-colors duration-200
              ${u.timed?"bg-blue-600":"bg-slate-700"}
            `,children:i.jsx("span",{className:`
                absolute top-1 w-4 h-4 rounded-full bg-white shadow transition-transform duration-200
                ${u.timed?"translate-x-7":"translate-x-1"}
              `})})]}),u.timed&&i.jsxs("div",{children:[i.jsx("label",{className:"block text-sm font-medium text-slate-300 mb-2",children:"Time per Question (seconds)"}),i.jsx("div",{className:"flex gap-2",children:[30,60,90,120].map(h=>i.jsxs("button",{onClick:()=>c({timePerQuestion:h}),className:`
                    px-4 py-2 rounded-lg border text-sm font-medium
                    transition-all duration-150
                    ${u.timePerQuestion===h?"bg-blue-600/20 border-blue-500 text-blue-200":"bg-slate-800/60 border-slate-700 text-slate-400 hover:bg-slate-800 hover:border-slate-600"}
                  `,children:[h,"s"]},h))})]})]}),i.jsxs("div",{className:"flex gap-3 mt-8",children:[i.jsx("button",{onClick:o,className:`
            flex-1 px-4 py-3 rounded-lg border border-slate-700
            bg-slate-800/60 text-slate-300
            hover:bg-slate-800 hover:border-slate-600
            transition-colors text-sm font-medium
          `,children:"Cancel"}),i.jsx("button",{onClick:f,disabled:m===0,className:`
            flex-1 px-4 py-3 rounded-lg
            bg-blue-600 text-white font-medium
            hover:bg-blue-500 disabled:opacity-50 disabled:cursor-not-allowed
            transition-colors text-sm
          `,children:"Start Quiz"})]})]})},i0=({currentIndex:u,totalQuestions:c,answers:f,onGoToQuestion:o,isReviewMode:m=!1,timeRemaining:h})=>{const S=c>0?(u+1)/c*100:0,N=f.filter(p=>p.selectedAnswer!==null).length,v=p=>{const D=Math.floor(p/60),T=p%60;return`${D}:${T.toString().padStart(2,"0")}`};return i.jsxs("div",{className:"space-y-3",children:[i.jsxs("div",{className:"flex items-center justify-between text-sm",children:[i.jsxs("div",{className:"flex items-center gap-4",children:[i.jsxs("span",{className:"text-slate-300",children:["Question ",i.jsx("span",{className:"font-semibold text-white",children:u+1})," of"," ",i.jsx("span",{className:"font-semibold text-white",children:c})]}),!m&&i.jsxs("span",{className:"text-slate-500",children:[N," answered"]})]}),h!=null&&i.jsxs("div",{className:`
              flex items-center gap-1.5 px-2.5 py-1 rounded-lg
              ${h<=10?"bg-red-900/50 text-red-300 animate-pulse":h<=30?"bg-amber-900/50 text-amber-300":"bg-slate-800 text-slate-300"}
            `,children:[i.jsx("svg",{className:"w-4 h-4",fill:"none",stroke:"currentColor",viewBox:"0 0 24 24",children:i.jsx("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:2,d:"M12 8v4l3 3m6-3a9 9 0 11-18 0 9 9 0 0118 0z"})}),i.jsx("span",{className:"font-mono font-medium",children:v(h)})]})]}),i.jsx("div",{className:"h-2 bg-slate-800 rounded-full overflow-hidden",children:i.jsx("div",{className:"h-full bg-gradient-to-r from-blue-600 to-blue-400 transition-all duration-300 ease-out",style:{width:`${S}%`}})}),c<=25&&i.jsx("div",{className:"flex flex-wrap gap-1.5 justify-center py-2",children:Array.from({length:c},(p,D)=>{const T=f[D],G=D===u,Y=(T==null?void 0:T.selectedAnswer)!==null,X=T==null?void 0:T.isCorrect;let O="bg-slate-700 border-slate-600";return m&&Y?O=X?"bg-emerald-600/50 border-emerald-500":"bg-red-600/50 border-red-500":Y&&(O="bg-blue-600/50 border-blue-500"),G&&(O+=" ring-2 ring-white ring-offset-1 ring-offset-slate-900"),i.jsx("button",{onClick:()=>o==null?void 0:o(D),disabled:!o,className:`
                  w-6 h-6 rounded-md border text-xs font-medium
                  transition-all duration-150
                  ${O}
                  ${o?"hover:scale-110 cursor-pointer":"cursor-default"}
                `,title:`Question ${D+1}${Y?" (answered)":""}`,children:D+1},D)})}),c>25&&i.jsxs("div",{className:"flex items-center justify-center gap-4 text-xs text-slate-400",children:[i.jsxs("div",{className:"flex items-center gap-1.5",children:[i.jsx("div",{className:"w-3 h-3 rounded-sm bg-blue-600/50 border border-blue-500"}),i.jsxs("span",{children:["Answered (",N,")"]})]}),i.jsxs("div",{className:"flex items-center gap-1.5",children:[i.jsx("div",{className:"w-3 h-3 rounded-sm bg-slate-700 border border-slate-600"}),i.jsxs("span",{children:["Remaining (",c-N,")"]})]}),m&&i.jsxs(i.Fragment,{children:[i.jsxs("div",{className:"flex items-center gap-1.5",children:[i.jsx("div",{className:"w-3 h-3 rounded-sm bg-emerald-600/50 border border-emerald-500"}),i.jsx("span",{children:"Correct"})]}),i.jsxs("div",{className:"flex items-center gap-1.5",children:[i.jsx("div",{className:"w-3 h-3 rounded-sm bg-red-600/50 border border-red-500"}),i.jsx("span",{children:"Incorrect"})]})]})]})]})},vg=({options:u,selectedAnswer:c,onSelect:f,isReviewMode:o=!1,disabled:m=!1})=>{const h=["A","B","C","D","E","F"];return i.jsx("div",{className:"space-y-2",children:u.map((S,N)=>{const v=c===S.id,p=S.isCorrect,D=h[N]||String(N+1);let T="",G="",Y="text-slate-200";return o?p?(T="bg-emerald-900/30 border-emerald-500",G="bg-emerald-600 text-white",Y="text-emerald-200"):v&&!p?(T="bg-red-900/30 border-red-500",G="bg-red-600 text-white",Y="text-red-200"):(T="bg-slate-800/40 border-slate-700 opacity-60",G="bg-slate-700 text-slate-400",Y="text-slate-400"):v?(T="bg-blue-900/40 border-blue-500",G="bg-blue-600 text-white",Y="text-blue-100"):(T="bg-slate-800/60 border-slate-700 hover:bg-slate-800 hover:border-slate-600",G="bg-slate-700 text-slate-300 group-hover:bg-slate-600"),i.jsxs("button",{onClick:()=>!m&&!o&&f(S.id),disabled:m||o,className:`
              group w-full flex items-start gap-3 p-3 rounded-lg border
              transition-all duration-150 text-left
              ${T}
              ${m||o?"cursor-default":"cursor-pointer"}
            `,children:[i.jsx("div",{className:`
                flex-shrink-0 w-8 h-8 rounded-lg
                flex items-center justify-center
                text-sm font-semibold
                transition-colors duration-150
                ${G}
              `,children:o&&p?i.jsx("svg",{className:"w-4 h-4",fill:"currentColor",viewBox:"0 0 20 20",children:i.jsx("path",{fillRule:"evenodd",d:"M16.707 5.293a1 1 0 010 1.414l-8 8a1 1 0 01-1.414 0l-4-4a1 1 0 011.414-1.414L8 12.586l7.293-7.293a1 1 0 011.414 0z",clipRule:"evenodd"})}):o&&v&&!p?i.jsx("svg",{className:"w-4 h-4",fill:"currentColor",viewBox:"0 0 20 20",children:i.jsx("path",{fillRule:"evenodd",d:"M4.293 4.293a1 1 0 011.414 0L10 8.586l4.293-4.293a1 1 0 111.414 1.414L11.414 10l4.293 4.293a1 1 0 01-1.414 1.414L10 11.414l-4.293 4.293a1 1 0 01-1.414-1.414L8.586 10 4.293 5.707a1 1 0 010-1.414z",clipRule:"evenodd"})}):D}),i.jsx("div",{className:`flex-1 pt-1 text-sm ${Y}`,children:S.text}),!o&&v&&i.jsx("div",{className:"flex-shrink-0 mt-1",children:i.jsx("div",{className:"w-5 h-5 rounded-full bg-blue-600 flex items-center justify-center",children:i.jsx("svg",{className:"w-3 h-3 text-white",fill:"currentColor",viewBox:"0 0 20 20",children:i.jsx("path",{fillRule:"evenodd",d:"M16.707 5.293a1 1 0 010 1.414l-8 8a1 1 0 01-1.414 0l-4-4a1 1 0 011.414-1.414L8 12.586l7.293-7.293a1 1 0 011.414 0z",clipRule:"evenodd"})})})})]},S.id)})})},Sg={beginner:"bg-emerald-900/50 text-emerald-300 border-emerald-700",intermediate:"bg-blue-900/50 text-blue-300 border-blue-700",advanced:"bg-purple-900/50 text-purple-300 border-purple-700",board_prep:"bg-amber-900/50 text-amber-300 border-amber-700"},jg={structure_identification:"Click to Identify",clinical_correlation:"Clinical Correlation",board_style:"Board-Style",pathology_recognition:"Pathology Recognition",layer_identification:"Layer Identification",function_matching:"Function Matching"},r0=({question:u,selectedAnswer:c,onSelectAnswer:f,isReviewMode:o=!1,showExplanation:m=!1})=>{var S,N,v,p;const h=u.type==="structure_identification"||u.type==="pathology_recognition";return i.jsxs("div",{className:"space-y-4",children:[i.jsxs("div",{className:"flex items-center gap-2 flex-wrap",children:[i.jsx("span",{className:`
            px-2 py-0.5 rounded-md text-xs font-medium border
            ${Sg[u.difficulty]||"bg-slate-800 text-slate-300"}
          `,children:u.difficulty.replace("_"," ").replace(/\b\w/g,D=>D.toUpperCase())}),i.jsx("span",{className:"px-2 py-0.5 rounded-md text-xs bg-slate-800 text-slate-400 border border-slate-700",children:jg[u.type]||u.type}),u.examLevels&&u.examLevels.length>0&&i.jsx("div",{className:"flex items-center gap-1",children:u.examLevels.map(D=>i.jsx("span",{className:"px-1.5 py-0.5 rounded text-[10px] bg-slate-800/60 text-slate-500 uppercase",children:D},D))})]}),u.vignette&&i.jsx("div",{className:"bg-slate-800/40 border border-slate-700 rounded-lg p-4",children:i.jsx("p",{className:"text-sm text-slate-300 leading-relaxed",children:u.vignette})}),i.jsxs("div",{className:"py-2",children:[i.jsx("h3",{className:"text-base font-medium text-slate-100 leading-relaxed",children:u.leadIn||u.prompt}),u.leadIn&&u.prompt!==u.leadIn&&i.jsx("p",{className:"text-sm text-slate-400 mt-1",children:u.prompt})]}),h?i.jsxs("div",{className:"bg-slate-800/40 border border-slate-700 rounded-lg p-4",children:[i.jsxs("div",{className:"flex items-center gap-3",children:[i.jsx("div",{className:"w-10 h-10 rounded-lg bg-blue-900/50 flex items-center justify-center",children:i.jsx("svg",{className:"w-5 h-5 text-blue-400",fill:"none",stroke:"currentColor",viewBox:"0 0 24 24",children:i.jsx("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:2,d:"M15 15l-2 5L9 9l11 4-5 2zm0 0l5 5M7.188 2.239l.777 2.897M5.136 7.965l-2.898-.777M13.95 4.05l-2.122 2.122m-5.657 5.656l-2.12 2.122"})})}),i.jsxs("div",{children:[i.jsx("p",{className:"text-sm font-medium text-slate-200",children:"Click on the structure in the 3D model"}),i.jsx("p",{className:"text-xs text-slate-400",children:"Rotate and explore to find the correct structure"})]})]}),c&&i.jsx("div",{className:"mt-3 pt-3 border-t border-slate-700",children:i.jsxs("p",{className:"text-sm text-slate-300",children:["Selected: ",i.jsx("span",{className:"font-medium text-blue-300",children:c})]})}),o&&u.targetStructureIds&&i.jsx("div",{className:"mt-3 pt-3 border-t border-slate-700",children:i.jsxs("p",{className:"text-sm text-emerald-300",children:["Correct: ",i.jsx("span",{className:"font-medium",children:u.targetStructureIds.join(", ")})]})})]}):u.options?i.jsx(vg,{options:u.options,selectedAnswer:c,onSelect:f,isReviewMode:o}):null,u.educationalObjective&&!m&&i.jsxs("div",{className:"text-xs text-slate-500 italic",children:["Learning objective: ",u.educationalObjective]}),m&&u.explanation&&i.jsxs("div",{className:"mt-4 bg-slate-800/60 border border-slate-700 rounded-lg p-4",children:[i.jsxs("div",{className:"flex items-center gap-2 mb-2",children:[i.jsx("svg",{className:"w-4 h-4 text-blue-400",fill:"none",stroke:"currentColor",viewBox:"0 0 24 24",children:i.jsx("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:2,d:"M13 16h-1v-4h-1m1-4h.01M21 12a9 9 0 11-18 0 9 9 0 0118 0z"})}),i.jsx("span",{className:"text-sm font-medium text-blue-300",children:"Explanation"})]}),i.jsx("p",{className:"text-sm text-slate-300 leading-relaxed",children:u.explanation}),u.educationalObjective&&i.jsx("div",{className:"mt-3 pt-3 border-t border-slate-700",children:i.jsxs("p",{className:"text-xs text-slate-400",children:[i.jsx("span",{className:"font-medium",children:"Learning Objective:"})," ",u.educationalObjective]})}),(((S=u.relatedStructures)==null?void 0:S.length)||((N=u.relatedConditions)==null?void 0:N.length))&&i.jsxs("div",{className:"mt-3 pt-3 border-t border-slate-700 flex flex-wrap gap-2",children:[(v=u.relatedStructures)==null?void 0:v.map(D=>i.jsx("span",{className:"px-2 py-0.5 rounded text-xs bg-blue-900/30 text-blue-300 border border-blue-800",children:D},D)),(p=u.relatedConditions)==null?void 0:p.map(D=>i.jsx("span",{className:"px-2 py-0.5 rounded text-xs bg-purple-900/30 text-purple-300 border border-purple-800",children:D},D))]})]})]})},Cg=u=>u>=90?{label:"Excellent",color:"text-emerald-400",emoji:""}:u>=80?{label:"Great",color:"text-blue-400",emoji:""}:u>=70?{label:"Good",color:"text-cyan-400",emoji:""}:u>=60?{label:"Passing",color:"text-amber-400",emoji:""}:{label:"Keep Studying",color:"text-red-400",emoji:""},wg=({results:u,onReview:c,onRetry:f,onExit:o})=>{const m=Cg(u.score),h=N=>{const v=Math.floor(N/60),p=N%60;return v===0?`${p}s`:`${v}m ${p}s`},S={structure_identification:"Structure ID",clinical_correlation:"Clinical",board_style:"Board-Style",pathology_recognition:"Pathology",layer_identification:"Layers",function_matching:"Functions"};return i.jsxs("div",{className:"w-full max-w-lg mx-auto",children:[i.jsxs("div",{className:"text-center mb-6",children:[i.jsx("div",{className:"text-5xl mb-3",children:m.emoji}),i.jsx("h2",{className:"text-2xl font-bold text-slate-100 mb-1",children:"Quiz Complete!"}),i.jsx("p",{className:`text-lg font-medium ${m.color}`,children:m.label})]}),i.jsxs("div",{className:"bg-slate-800/60 border border-slate-700 rounded-xl p-6 mb-6",children:[i.jsxs("div",{className:"text-center",children:[i.jsxs("div",{className:"text-5xl font-bold text-white mb-2",children:[u.score,"%"]}),i.jsxs("div",{className:"text-sm text-slate-400",children:[u.correctAnswers," of ",u.totalQuestions," correct"]})]}),i.jsx("div",{className:"relative w-24 h-24 mx-auto mt-4",children:i.jsxs("svg",{className:"w-full h-full -rotate-90",viewBox:"0 0 100 100",children:[i.jsx("circle",{cx:"50",cy:"50",r:"40",stroke:"currentColor",strokeWidth:"8",fill:"none",className:"text-slate-700"}),i.jsx("circle",{cx:"50",cy:"50",r:"40",stroke:"currentColor",strokeWidth:"8",fill:"none",strokeLinecap:"round",className:u.score>=70?"text-emerald-500":u.score>=50?"text-amber-500":"text-red-500",strokeDasharray:`${u.score*2.51} 251`})]})}),i.jsxs("div",{className:"grid grid-cols-3 gap-4 mt-6 pt-4 border-t border-slate-700",children:[i.jsxs("div",{className:"text-center",children:[i.jsx("div",{className:"text-xl font-semibold text-emerald-400",children:u.correctAnswers}),i.jsx("div",{className:"text-xs text-slate-500",children:"Correct"})]}),i.jsxs("div",{className:"text-center",children:[i.jsx("div",{className:"text-xl font-semibold text-red-400",children:u.totalQuestions-u.correctAnswers}),i.jsx("div",{className:"text-xs text-slate-500",children:"Incorrect"})]}),i.jsxs("div",{className:"text-center",children:[i.jsx("div",{className:"text-xl font-semibold text-blue-400",children:h(u.timeSpent)}),i.jsx("div",{className:"text-xs text-slate-500",children:"Time"})]})]})]}),Object.keys(u.byCategory).length>0&&i.jsxs("div",{className:"bg-slate-800/40 border border-slate-700 rounded-lg p-4 mb-6",children:[i.jsx("h3",{className:"text-sm font-medium text-slate-300 mb-3",children:"Performance by Category"}),i.jsx("div",{className:"space-y-2",children:Object.entries(u.byCategory).filter(([N,v])=>v.total>0).map(([N,v])=>{const p=Math.round(v.correct/v.total*100);return i.jsxs("div",{className:"flex items-center gap-3",children:[i.jsx("div",{className:"flex-1 text-xs text-slate-400 truncate",children:S[N]||N}),i.jsx("div",{className:"w-24 h-2 bg-slate-700 rounded-full overflow-hidden",children:i.jsx("div",{className:`h-full transition-all ${p>=70?"bg-emerald-500":p>=50?"bg-amber-500":"bg-red-500"}`,style:{width:`${p}%`}})}),i.jsxs("div",{className:"text-xs font-medium text-slate-300 w-16 text-right",children:[v.correct,"/",v.total," (",p,"%)"]})]},N)})})]}),Object.keys(u.byExamLevel).length>0&&i.jsxs("div",{className:"bg-slate-800/40 border border-slate-700 rounded-lg p-4 mb-6",children:[i.jsx("h3",{className:"text-sm font-medium text-slate-300 mb-3",children:"Performance by Exam Level"}),i.jsx("div",{className:"flex flex-wrap gap-2",children:Object.entries(u.byExamLevel).filter(([N,v])=>v.total>0).map(([N,v])=>{const p=Math.round(v.correct/v.total*100);return i.jsxs("div",{className:`
                      px-3 py-1.5 rounded-lg text-xs font-medium
                      ${p>=70?"bg-emerald-900/30 text-emerald-300 border border-emerald-800":p>=50?"bg-amber-900/30 text-amber-300 border border-amber-800":"bg-red-900/30 text-red-300 border border-red-800"}
                    `,children:[N.toUpperCase(),": ",p,"% (",v.correct,"/",v.total,")"]},N)})})]}),u.missedQuestions.length>0&&i.jsxs("div",{className:"bg-slate-800/40 border border-slate-700 rounded-lg p-4 mb-6",children:[i.jsxs("h3",{className:"text-sm font-medium text-slate-300 mb-3",children:["Questions to Review (",u.missedQuestions.length,")"]}),i.jsxs("div",{className:"space-y-2 max-h-40 overflow-y-auto",children:[u.missedQuestions.slice(0,5).map((N,v)=>i.jsxs("div",{className:"flex items-start gap-2 text-xs",children:[i.jsx("span",{className:"text-red-400 mt-0.5",children:""}),i.jsx("span",{className:"text-slate-400 line-clamp-2",children:N.question.prompt})]},N.question.id)),u.missedQuestions.length>5&&i.jsxs("div",{className:"text-xs text-slate-500 pl-4",children:["+",u.missedQuestions.length-5," more..."]})]})]}),i.jsxs("div",{className:"flex gap-3",children:[i.jsx("button",{onClick:o,className:`
            flex-1 px-4 py-3 rounded-lg border border-slate-700
            bg-slate-800/60 text-slate-300
            hover:bg-slate-800 hover:border-slate-600
            transition-colors text-sm font-medium
          `,children:"Exit"}),i.jsx("button",{onClick:c,className:`
            flex-1 px-4 py-3 rounded-lg border border-blue-700
            bg-blue-900/30 text-blue-300
            hover:bg-blue-900/50 hover:border-blue-600
            transition-colors text-sm font-medium
          `,children:"Review Answers"}),i.jsx("button",{onClick:f,className:`
            flex-1 px-4 py-3 rounded-lg
            bg-blue-600 text-white font-medium
            hover:bg-blue-500
            transition-colors text-sm
          `,children:"Try Again"})]})]})},Ng=({questions:u,answers:c,currentIndex:f,onGoToQuestion:o,onNext:m,onPrevious:h,onBackToResults:S,onExit:N})=>{const v=u[f],p=c[f],D=f===0,T=f===u.length-1;return v?i.jsxs("div",{className:"flex flex-col h-full",children:[i.jsxs("div",{className:"flex items-center justify-between mb-4",children:[i.jsxs("div",{className:"flex items-center gap-2",children:[i.jsx("div",{className:"text-lg font-semibold text-slate-100",children:"Review Mode"}),i.jsx("div",{className:`
            px-2 py-0.5 rounded text-xs font-medium
            ${p!=null&&p.isCorrect?"bg-emerald-900/50 text-emerald-300":"bg-red-900/50 text-red-300"}
          `,children:p!=null&&p.isCorrect?"Correct":"Incorrect"})]}),i.jsx("button",{onClick:S,className:"text-sm text-slate-400 hover:text-slate-200 transition-colors",children:"Back to Results"})]}),i.jsx(i0,{currentIndex:f,totalQuestions:u.length,answers:c,onGoToQuestion:o,isReviewMode:!0}),i.jsx("div",{className:"flex-1 overflow-y-auto mt-4 pr-2",children:i.jsx(r0,{question:v,selectedAnswer:(p==null?void 0:p.selectedAnswer)||null,onSelectAnswer:()=>{},isReviewMode:!0,showExplanation:!0})}),i.jsxs("div",{className:"flex items-center justify-between mt-4 pt-4 border-t border-slate-700",children:[i.jsxs("button",{onClick:h,disabled:D,className:`
            flex items-center gap-2 px-4 py-2 rounded-lg text-sm font-medium
            transition-colors
            ${D?"text-slate-600 cursor-not-allowed":"text-slate-300 hover:bg-slate-800 hover:text-white"}
          `,children:[i.jsx("svg",{className:"w-4 h-4",fill:"none",stroke:"currentColor",viewBox:"0 0 24 24",children:i.jsx("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:2,d:"M15 19l-7-7 7-7"})}),"Previous"]}),i.jsx("div",{className:"flex items-center gap-2",children:i.jsx("button",{onClick:()=>{const G=c.findIndex((Y,X)=>X>f&&!Y.isCorrect);if(G!==-1)o(G);else{const Y=c.findIndex(X=>!X.isCorrect);Y!==-1&&Y!==f&&o(Y)}},className:"px-3 py-1.5 rounded text-xs bg-slate-800 text-slate-400 hover:bg-slate-700 hover:text-slate-200 transition-colors",children:"Next Incorrect"})}),i.jsxs("button",{onClick:m,disabled:T,className:`
            flex items-center gap-2 px-4 py-2 rounded-lg text-sm font-medium
            transition-colors
            ${T?"text-slate-600 cursor-not-allowed":"text-slate-300 hover:bg-slate-800 hover:text-white"}
          `,children:["Next",i.jsx("svg",{className:"w-4 h-4",fill:"none",stroke:"currentColor",viewBox:"0 0 24 24",children:i.jsx("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:2,d:"M9 5l7 7-7 7"})})]})]}),i.jsx("div",{className:"mt-4",children:i.jsx("button",{onClick:N,className:`
            w-full px-4 py-2 rounded-lg border border-slate-700
            bg-slate-800/60 text-slate-400
            hover:bg-slate-800 hover:text-slate-200 hover:border-slate-600
            transition-colors text-sm
          `,children:"Exit Quiz"})})]}):i.jsx("div",{className:"text-center py-8 text-slate-400",children:"No question to display"})},Mg=({onExit:u,onRequestClickMode:c,clickedStructureId:f,isMobile:o=!1})=>{const{state:m,currentQuestion:h,isLastQuestion:S,timeRemaining:N,updateConfig:v,startQuiz:p,submitAnswer:D,nextQuestion:T,previousQuestion:G,goToQuestion:Y,finishQuiz:X,reviewQuiz:O,resetQuiz:xe,results:Z}=gg(),me=h&&(h.type==="structure_identification"||h.type==="pathology_recognition");x.useEffect(()=>{var ce;c&&(m.phase==="active"&&me?c(!0,(ce=h==null?void 0:h.targetStructureIds)==null?void 0:ce[0]):c(!1))},[c,m.phase,me,h==null?void 0:h.targetStructureIds]),x.useEffect(()=>{f&&m.phase==="active"&&me&&D(f)},[f,m.phase,me,D]);const U=x.useCallback(()=>{S?X():T()},[S,X,T]),le=x.useCallback(()=>{xe(),u()},[xe,u]),fe=x.useCallback(()=>{xe()},[xe]),De=x.useCallback(()=>{X()},[X]),de=()=>{var ce,ve,W;switch(m.phase){case"config":return i.jsx("div",{className:"p-6",children:i.jsx(bg,{config:m.config,onUpdateConfig:v,onStart:p,onCancel:le})});case"active":return h?i.jsxs("div",{className:"flex flex-col h-full p-4",children:[i.jsx(i0,{currentIndex:m.currentIndex,totalQuestions:m.questions.length,answers:m.answers,onGoToQuestion:Y,timeRemaining:N}),i.jsx("div",{className:"flex-1 overflow-y-auto mt-4 pr-2",children:i.jsx(r0,{question:h,selectedAnswer:((ce=m.answers[m.currentIndex])==null?void 0:ce.selectedAnswer)||null,onSelectAnswer:D,isReviewMode:!1})}),i.jsxs("div",{className:"flex items-center justify-between mt-4 pt-4 border-t border-slate-700",children:[i.jsxs("button",{onClick:G,disabled:m.currentIndex===0,className:`
                  flex items-center gap-2 px-4 py-2 rounded-lg text-sm font-medium
                  transition-colors
                  ${m.currentIndex===0?"text-slate-600 cursor-not-allowed":"text-slate-300 hover:bg-slate-800 hover:text-white"}
                `,children:[i.jsx("svg",{className:"w-4 h-4",fill:"none",stroke:"currentColor",viewBox:"0 0 24 24",children:i.jsx("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:2,d:"M15 19l-7-7 7-7"})}),"Previous"]}),i.jsxs("div",{className:"flex items-center gap-2",children:[!((ve=m.answers[m.currentIndex])!=null&&ve.selectedAnswer)&&i.jsx("button",{onClick:U,className:"px-3 py-1.5 rounded text-xs bg-slate-800 text-slate-400 hover:bg-slate-700 hover:text-slate-200 transition-colors",children:"Skip"}),i.jsx("button",{onClick:X,className:"px-3 py-1.5 rounded text-xs bg-slate-800 text-slate-400 hover:bg-slate-700 hover:text-slate-200 transition-colors",children:"Finish Quiz"})]}),i.jsxs("button",{onClick:U,className:`
                  flex items-center gap-2 px-4 py-2 rounded-lg text-sm font-medium
                  transition-colors
                  ${(W=m.answers[m.currentIndex])!=null&&W.selectedAnswer?"bg-blue-600 text-white hover:bg-blue-500":"bg-slate-800 text-slate-300 hover:bg-slate-700"}
                `,children:[S?"Finish":"Next",!S&&i.jsx("svg",{className:"w-4 h-4",fill:"none",stroke:"currentColor",viewBox:"0 0 24 24",children:i.jsx("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:2,d:"M9 5l7 7-7 7"})})]})]})]}):i.jsx("div",{className:"p-6 text-center text-slate-400",children:"Loading question..."});case"results":return Z?i.jsx("div",{className:"p-6 overflow-y-auto max-h-full",children:i.jsx(wg,{results:Z,onReview:O,onRetry:fe,onExit:le})}):i.jsx("div",{className:"p-6 text-center text-slate-400",children:"Calculating results..."});case"review":return i.jsx("div",{className:"flex flex-col h-full p-4",children:i.jsx(Ng,{questions:m.questions,answers:m.answers,currentIndex:m.currentIndex,onGoToQuestion:Y,onNext:T,onPrevious:G,onBackToResults:De,onExit:le})});default:return null}};return i.jsxs("div",{className:"h-full bg-slate-900/95 border-l border-slate-700/70 flex flex-col overflow-hidden",children:[i.jsxs("div",{className:"flex items-center justify-between px-4 py-3 border-b border-slate-700/70 bg-slate-900",children:[i.jsxs("div",{className:"flex items-center gap-2",children:[i.jsx("div",{className:"text-lg",children:""}),i.jsx("h2",{className:"text-sm font-semibold text-slate-100",children:"Quiz Mode"}),m.phase!=="config"&&i.jsx("span",{className:"px-2 py-0.5 rounded text-xs bg-slate-800 text-slate-400 capitalize",children:m.phase})]}),i.jsx("button",{onClick:le,className:"text-slate-400 hover:text-slate-200 transition-colors",title:"Exit quiz",children:i.jsx("svg",{className:"w-5 h-5",fill:"none",stroke:"currentColor",viewBox:"0 0 24 24",children:i.jsx("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:2,d:"M6 18L18 6M6 6l12 12"})})})]}),i.jsx("div",{className:"flex-1 overflow-hidden",children:de()})]})},Tg=({onClose:u,lang:c,onLangChange:f,autoRotate:o,tooltipsEnabled:m,highContrast:h,onAutoRotateChange:S,onTooltipsChange:N,onHighContrastChange:v,phototype:p,onPhototypeChange:D,hydration:T,onHydrationChange:G,phValue:Y,onPhChange:X,palette:O,onPaletteChange:xe,collagenReduced:Z,onCollagenChange:me})=>{const[U,le]=x.useState("general"),[fe,De]=x.useState(()=>localStorage.getItem("dermoviz-reduced-motion")==="true"),de=ae=>{S(ae)},ce=ae=>{De(ae),localStorage.setItem("dermoviz-reduced-motion",String(ae))},ve=ae=>{v(ae)},W=ae=>{N(ae)},F=[{id:"general",label:"General",icon:"M10.325 4.317c.426-1.756 2.924-1.756 3.35 0a1.724 1.724 0 002.573 1.066c1.543-.94 3.31.826 2.37 2.37a1.724 1.724 0 001.065 2.572c1.756.426 1.756 2.924 0 3.35a1.724 1.724 0 00-1.066 2.573c.94 1.543-.826 3.31-2.37 2.37a1.724 1.724 0 00-2.572 1.065c-.426 1.756-2.924 1.756-3.35 0a1.724 1.724 0 00-2.573-1.066c-1.543.94-3.31-.826-2.37-2.37a1.724 1.724 0 00-1.065-2.572c-1.756-.426-1.756-2.924 0-3.35a1.724 1.724 0 001.066-2.573c-.94-1.543.826-3.31 2.37-2.37.996.608 2.296.07 2.572-1.065z"},{id:"display",label:"Display",icon:"M9.75 17L9 20l-1 1h8l-1-1-.75-3M3 13h18M5 17h14a2 2 0 002-2V5a2 2 0 00-2-2H5a2 2 0 00-2 2v10a2 2 0 002 2z"},{id:"accessibility",label:"Accessibility",icon:"M15 12a3 3 0 11-6 0 3 3 0 016 0z M2.458 12C3.732 7.943 7.523 5 12 5c4.478 0 8.268 2.943 9.542 7-1.274 4.057-5.064 7-9.542 7-4.477 0-8.268-2.943-9.542-7z"},{id:"about",label:"About",icon:"M13 16h-1v-4h-1m1-4h.01M21 12a9 9 0 11-18 0 9 9 0 0118 0z"}],he=()=>{switch(U){case"general":return i.jsxs("div",{className:"space-y-6",children:[i.jsxs("div",{children:[i.jsx("label",{className:"block text-sm font-medium text-slate-300 mb-2",children:"Language"}),i.jsxs("select",{value:c,onChange:ae=>f(ae.target.value),className:"w-full bg-slate-800 border border-slate-700 rounded-lg px-3 py-2.5 text-sm text-slate-200 focus:outline-none focus:border-blue-500",children:[i.jsx("option",{value:"en",children:"English"}),i.jsx("option",{value:"es",children:"Espaol"}),i.jsx("option",{value:"ar",children:""})]}),i.jsx("p",{className:"text-xs text-slate-500 mt-1",children:"Choose the language for structure labels and descriptions"})]}),i.jsxs("div",{className:"flex items-center justify-between",children:[i.jsxs("div",{children:[i.jsx("label",{className:"block text-sm font-medium text-slate-300",children:"Hover Tooltips"}),i.jsx("p",{className:"text-xs text-slate-500",children:"Show structure names on hover"})]}),i.jsx("button",{onClick:()=>W(!m),className:`
                  relative w-11 h-6 rounded-full transition-colors
                  ${m?"bg-blue-600":"bg-slate-700"}
                `,children:i.jsx("div",{className:`
                    absolute top-1 w-4 h-4 rounded-full bg-white transition-transform
                    ${m?"left-6":"left-1"}
                  `})})]}),i.jsxs("div",{children:[i.jsx("label",{className:"block text-sm font-medium text-slate-300 mb-2",children:"Skin Phototype (IVI)"}),i.jsx("select",{value:p,onChange:ae=>D(Number(ae.target.value)),className:"w-full bg-slate-800 border border-slate-700 rounded-lg px-3 py-2.5 text-sm text-slate-200 focus:outline-none focus:border-blue-500",children:[1,2,3,4,5,6].map(ae=>i.jsx("option",{value:ae,children:`Type ${ae}`},ae))}),i.jsx("p",{className:"text-xs text-slate-500 mt-1",children:"Adjust melanin baseline and UV response for realism"})]}),i.jsxs("div",{children:[i.jsx("label",{className:"block text-sm font-medium text-slate-300 mb-2",children:"Stratum Corneum Hydration"}),i.jsx("input",{type:"range",min:0,max:1,step:.05,value:T,onChange:ae=>G(parseFloat(ae.target.value)),className:"w-full accent-blue-500"}),i.jsx("p",{className:"text-xs text-slate-500 mt-1",children:"Higher hydration slightly speeds turnover and increases translucency"})]}),i.jsxs("div",{children:[i.jsx("label",{className:"block text-sm font-medium text-slate-300 mb-2",children:"Surface pH (4.0  8.0)"}),i.jsx("input",{type:"range",min:4,max:8,step:.1,value:Y,onChange:ae=>X(parseFloat(ae.target.value)),className:"w-full accent-emerald-500"}),i.jsx("p",{className:"text-xs text-slate-500 mt-1",children:"Higher pH weakens barrier and speeds desquamation; lower pH strengthens it"})]})]});case"display":return i.jsxs("div",{className:"space-y-6",children:[i.jsxs("div",{className:"flex items-center justify-between",children:[i.jsxs("div",{children:[i.jsx("label",{className:"block text-sm font-medium text-slate-300",children:"Auto-rotate Model"}),i.jsx("p",{className:"text-xs text-slate-500",children:"Slowly rotate the 3D model when idle"})]}),i.jsx("button",{onClick:()=>de(!o),className:`
                  relative w-11 h-6 rounded-full transition-colors
                  ${o?"bg-blue-600":"bg-slate-700"}
                `,children:i.jsx("div",{className:`
                    absolute top-1 w-4 h-4 rounded-full bg-white transition-transform
                    ${o?"left-6":"left-1"}
                  `})})]}),i.jsxs("div",{children:[i.jsx("label",{className:"block text-sm font-medium text-slate-300 mb-2",children:"Color Palette"}),i.jsxs("select",{value:O,onChange:ae=>xe(ae.target.value),className:"w-full bg-slate-800 border border-slate-700 rounded-lg px-3 py-2.5 text-sm text-slate-200 focus:outline-none focus:border-blue-500",children:[i.jsx("option",{value:"clinical",children:"Clinical (natural)"}),i.jsx("option",{value:"he",children:"H&E stain"}),i.jsx("option",{value:"masson",children:"Masson trichrome"})]}),i.jsx("p",{className:"text-xs text-slate-500 mt-1",children:"Swap materials to clinical or histology-inspired palettes."})]}),i.jsxs("div",{className:"flex items-center justify-between",children:[i.jsxs("div",{children:[i.jsx("label",{className:"block text-sm font-medium text-slate-300",children:"Collagen Density"}),i.jsx("p",{className:"text-xs text-slate-500",children:"Reduce collagen instances for clarity or performance."})]}),i.jsx("button",{onClick:()=>me(!Z),className:`
                  relative w-11 h-6 rounded-full transition-colors
                  ${Z?"bg-blue-600":"bg-slate-700"}
                `,children:i.jsx("div",{className:`
                    absolute top-1 w-4 h-4 rounded-full bg-white transition-transform
                    ${Z?"left-6":"left-1"}
                  `})})]}),i.jsxs("div",{className:"p-3 bg-slate-800/50 rounded-lg border border-slate-700",children:[i.jsxs("div",{className:"flex items-center gap-2 mb-2",children:[i.jsx("svg",{className:"w-4 h-4 text-blue-400",fill:"none",stroke:"currentColor",viewBox:"0 0 24 24",children:i.jsx("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:2,d:"M13 16h-1v-4h-1m1-4h.01M21 12a9 9 0 11-18 0 9 9 0 0118 0z"})}),i.jsx("span",{className:"text-sm font-medium text-slate-300",children:"Graphics Quality"})]}),i.jsx("p",{className:"text-xs text-slate-500",children:"Graphics quality automatically adjusts based on your device capabilities for optimal performance."})]})]});case"accessibility":return i.jsxs("div",{className:"space-y-6",children:[i.jsxs("div",{className:"flex items-center justify-between",children:[i.jsxs("div",{children:[i.jsx("label",{className:"block text-sm font-medium text-slate-300",children:"Reduced Motion"}),i.jsx("p",{className:"text-xs text-slate-500",children:"Minimize animations and transitions"})]}),i.jsx("button",{onClick:()=>ce(!fe),className:`
                  relative w-11 h-6 rounded-full transition-colors
                  ${fe?"bg-blue-600":"bg-slate-700"}
                `,children:i.jsx("div",{className:`
                    absolute top-1 w-4 h-4 rounded-full bg-white transition-transform
                    ${fe?"left-6":"left-1"}
                  `})})]}),i.jsxs("div",{className:"flex items-center justify-between",children:[i.jsxs("div",{children:[i.jsx("label",{className:"block text-sm font-medium text-slate-300",children:"High Contrast"}),i.jsx("p",{className:"text-xs text-slate-500",children:"Increase contrast for better visibility"})]}),i.jsx("button",{onClick:()=>ve(!h),className:`
                  relative w-11 h-6 rounded-full transition-colors
                  ${h?"bg-blue-600":"bg-slate-700"}
                `,children:i.jsx("div",{className:`
                    absolute top-1 w-4 h-4 rounded-full bg-white transition-transform
                    ${h?"left-6":"left-1"}
                  `})})]}),i.jsxs("div",{className:"p-3 bg-slate-800/50 rounded-lg border border-slate-700",children:[i.jsx("h4",{className:"text-sm font-medium text-slate-300 mb-3",children:"Keyboard Shortcuts"}),i.jsxs("div",{className:"space-y-2 text-xs",children:[i.jsxs("div",{className:"flex justify-between text-slate-400",children:[i.jsx("span",{children:"Study Mode"}),i.jsx("kbd",{className:"bg-slate-700 px-1.5 py-0.5 rounded",children:"S"})]}),i.jsxs("div",{className:"flex justify-between text-slate-400",children:[i.jsx("span",{children:"Quiz Mode"}),i.jsx("kbd",{className:"bg-slate-700 px-1.5 py-0.5 rounded",children:"Q"})]}),i.jsxs("div",{className:"flex justify-between text-slate-400",children:[i.jsx("span",{children:"Compare Mode"}),i.jsx("kbd",{className:"bg-slate-700 px-1.5 py-0.5 rounded",children:"C"})]}),i.jsxs("div",{className:"flex justify-between text-slate-400",children:[i.jsx("span",{children:"Reset View"}),i.jsx("kbd",{className:"bg-slate-700 px-1.5 py-0.5 rounded",children:"R"})]}),i.jsxs("div",{className:"flex justify-between text-slate-400",children:[i.jsx("span",{children:"Fullscreen"}),i.jsx("kbd",{className:"bg-slate-700 px-1.5 py-0.5 rounded",children:"F"})]}),i.jsxs("div",{className:"flex justify-between text-slate-400",children:[i.jsx("span",{children:"Help"}),i.jsx("kbd",{className:"bg-slate-700 px-1.5 py-0.5 rounded",children:"H"})]})]})]})]});case"about":return i.jsxs("div",{className:"space-y-6",children:[i.jsxs("div",{className:"text-center py-4",children:[i.jsx("div",{className:"text-4xl mb-3",children:""}),i.jsx("h3",{className:"text-lg font-semibold text-slate-100",children:"Skinoculars"}),i.jsx("p",{className:"text-sm text-slate-400",children:"Interactive Skin Anatomy"}),i.jsx("p",{className:"text-xs text-slate-500 mt-1",children:"Version 1.0.0"})]}),i.jsx("div",{className:"p-4 bg-slate-800/50 rounded-lg border border-slate-700",children:i.jsx("p",{className:"text-sm text-slate-400 leading-relaxed",children:"An interactive 3D visualization tool for learning skin anatomy. Designed for medical students, dermatology residents, and healthcare professionals preparing for board examinations."})}),i.jsxs("div",{children:[i.jsx("h4",{className:"text-sm font-medium text-slate-300 mb-3",children:"Features"}),i.jsxs("ul",{className:"space-y-2 text-sm text-slate-400",children:[i.jsxs("li",{className:"flex items-center gap-2",children:[i.jsx("svg",{className:"w-4 h-4 text-green-400",fill:"none",stroke:"currentColor",viewBox:"0 0 24 24",children:i.jsx("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:2,d:"M5 13l4 4L19 7"})}),"Interactive 3D skin model with multiple zoom levels"]}),i.jsxs("li",{className:"flex items-center gap-2",children:[i.jsx("svg",{className:"w-4 h-4 text-green-400",fill:"none",stroke:"currentColor",viewBox:"0 0 24 24",children:i.jsx("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:2,d:"M5 13l4 4L19 7"})}),"Disease pathology visualization"]}),i.jsxs("li",{className:"flex items-center gap-2",children:[i.jsx("svg",{className:"w-4 h-4 text-green-400",fill:"none",stroke:"currentColor",viewBox:"0 0 24 24",children:i.jsx("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:2,d:"M5 13l4 4L19 7"})}),"Quiz mode with board-style questions"]}),i.jsxs("li",{className:"flex items-center gap-2",children:[i.jsx("svg",{className:"w-4 h-4 text-green-400",fill:"none",stroke:"currentColor",viewBox:"0 0 24 24",children:i.jsx("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:2,d:"M5 13l4 4L19 7"})}),"Side-by-side condition comparison"]})]})]}),i.jsx("div",{className:"text-center text-xs text-slate-500 pt-4 border-t border-slate-700",children:i.jsx("p",{children:"Built with React, Three.js, and Tailwind CSS"})})]});default:return null}};return i.jsx("div",{className:"fixed inset-0 bg-black/60 flex items-center justify-center z-50",onClick:u,children:i.jsxs("div",{className:"bg-slate-900 border border-slate-700 rounded-xl w-full max-w-lg mx-4 shadow-2xl overflow-hidden",onClick:ae=>ae.stopPropagation(),children:[i.jsxs("div",{className:"flex items-center justify-between px-6 py-4 border-b border-slate-700/70",children:[i.jsx("h2",{className:"text-lg font-semibold text-slate-100",children:"Settings"}),i.jsx("button",{onClick:u,className:"text-slate-400 hover:text-slate-200 transition-colors",children:i.jsx("svg",{className:"w-5 h-5",fill:"none",stroke:"currentColor",viewBox:"0 0 24 24",children:i.jsx("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:2,d:"M6 18L18 6M6 6l12 12"})})})]}),i.jsx("div",{className:"flex border-b border-slate-700/70",children:F.map(ae=>i.jsxs("button",{onClick:()=>le(ae.id),className:`
                flex-1 px-4 py-3 text-sm font-medium transition-colors
                flex items-center justify-center gap-2
                ${U===ae.id?"text-blue-400 border-b-2 border-blue-400 bg-slate-800/50":"text-slate-400 hover:text-slate-200 hover:bg-slate-800/30"}
              `,children:[i.jsx("svg",{className:"w-4 h-4",fill:"none",stroke:"currentColor",viewBox:"0 0 24 24",children:i.jsx("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:2,d:ae.icon})}),i.jsx("span",{className:"hidden sm:inline",children:ae.label})]},ae.id))}),i.jsx("div",{className:"p-6 max-h-[60vh] overflow-y-auto",children:he()}),i.jsx("div",{className:"flex justify-end px-6 py-4 border-t border-slate-700/70 bg-slate-900/50",children:i.jsx("button",{onClick:u,className:"px-6 py-2 bg-blue-600 hover:bg-blue-500 text-white rounded-lg text-sm font-medium transition-colors",children:"Done"})})]})})},Eg=({progress:u=0,message:c="Loading 3D model..."})=>i.jsxs("div",{className:"fixed inset-0 bg-slate-950 flex flex-col items-center justify-center z-50",children:[i.jsx("div",{className:"text-6xl mb-8 animate-pulse",children:""}),i.jsx("h1",{className:"text-2xl font-semibold text-slate-100 mb-2",children:"Skinoculars"}),i.jsx("p",{className:"text-sm text-slate-400 mb-8",children:"Interactive Skin Anatomy"}),i.jsx("div",{className:"w-64 mb-4",children:i.jsx("div",{className:"h-1.5 bg-slate-800 rounded-full overflow-hidden",children:i.jsx("div",{className:"h-full bg-blue-500 rounded-full transition-all duration-300 ease-out",style:{width:`${Math.min(100,Math.max(0,u))}%`}})})}),i.jsx("p",{className:"text-xs text-slate-500",children:c}),i.jsx("div",{className:"flex gap-1 mt-4",children:[0,1,2].map(f=>i.jsx("div",{className:"w-2 h-2 bg-blue-500 rounded-full animate-bounce",style:{animationDelay:`${f*.15}s`}},f))})]}),Ag=({currentPhase:u,dayLabel:c,t:f,onScrub:o,events:m,isActive:h=!0,compact:S=!1})=>{const[N,v]=x.useState(null),[p,D]=x.useState(!1),T=x.useCallback(Z=>{o(parseFloat(Z.target.value))},[o]),G=x.useCallback(()=>{D(!0)},[]),Y=x.useCallback(()=>{D(!1)},[]),X=x.useMemo(()=>Wl.map(Z=>({...Z,widthPercent:(Z.tEnd-Z.tStart)*100,leftPercent:Z.tStart*100})),[]),O=(Z,me)=>({inflammatory:me?"bg-red-500":"bg-red-900/50",proliferative:me?"bg-amber-500":"bg-amber-900/50",remodeling:me?"bg-green-500":"bg-green-900/50"})[Z.id],xe=(Z,me)=>({inflammatory:me?"text-red-300":"text-red-500/50",proliferative:me?"text-amber-300":"text-amber-500/50",remodeling:me?"text-green-300":"text-green-500/50"})[Z.id];return h?S?i.jsx("div",{className:"bg-slate-900/90 border border-slate-700 rounded-lg px-3 py-2 backdrop-blur-sm",children:i.jsxs("div",{className:"flex items-center gap-3",children:[i.jsx("div",{className:`px-2 py-0.5 rounded-full text-[10px] font-semibold ${O(u,!0)} text-white`,children:u.label}),i.jsx("span",{className:"text-[10px] text-slate-400",children:c}),i.jsxs("span",{className:"text-[10px] text-slate-500",children:[Math.round(f*100),"%"]})]})}):i.jsxs("div",{className:"bg-slate-900/95 border border-slate-700/70 rounded-xl p-4 min-w-[380px] max-w-[480px] backdrop-blur-sm shadow-2xl",children:[i.jsx("div",{className:"flex gap-2 mb-4",children:Wl.map(Z=>{const me=Z.id===u.id;return i.jsx("button",{onClick:()=>o(Z.tStart+.01),className:`
                px-3 py-1.5 rounded-full text-xs font-semibold transition-all duration-300
                ${me?`${O(Z,!0)} text-white shadow-lg scale-105`:`bg-slate-800 ${xe(Z,!1)} hover:bg-slate-700`}
              `,title:Z.description,children:Z.label},Z.id)})}),i.jsxs("div",{className:"relative h-2 mb-3 rounded-full overflow-hidden bg-slate-800",children:[X.map(Z=>i.jsx("div",{className:`absolute top-0 h-full transition-opacity duration-300 ${O(Z,f>=Z.tStart&&f<Z.tEnd)}`,style:{left:`${Z.leftPercent}%`,width:`${Z.widthPercent}%`,opacity:f>=Z.tStart?f<Z.tEnd?.8:.4:.2}},Z.id)),i.jsx("div",{className:"absolute top-0 h-full bg-white/30 transition-all duration-150",style:{width:`${f*100}%`}})]}),i.jsxs("div",{className:"relative mb-2",children:[i.jsx("input",{type:"range",min:0,max:1,step:.005,value:f,onChange:T,onMouseDown:G,onMouseUp:Y,onTouchStart:G,onTouchEnd:Y,className:`w-full h-2 appearance-none bg-transparent cursor-pointer relative z-10
            [&::-webkit-slider-thumb]:appearance-none
            [&::-webkit-slider-thumb]:w-4
            [&::-webkit-slider-thumb]:h-4
            [&::-webkit-slider-thumb]:rounded-full
            [&::-webkit-slider-thumb]:bg-blue-500
            [&::-webkit-slider-thumb]:border-2
            [&::-webkit-slider-thumb]:border-white
            [&::-webkit-slider-thumb]:shadow-lg
            [&::-webkit-slider-thumb]:cursor-grab
            [&::-webkit-slider-thumb]:hover:bg-blue-400
            [&::-webkit-slider-thumb]:active:cursor-grabbing
            [&::-moz-range-thumb]:w-4
            [&::-moz-range-thumb]:h-4
            [&::-moz-range-thumb]:rounded-full
            [&::-moz-range-thumb]:bg-blue-500
            [&::-moz-range-thumb]:border-2
            [&::-moz-range-thumb]:border-white
            [&::-moz-range-thumb]:cursor-grab
          `}),i.jsx("div",{className:"absolute top-0 left-0 right-0 h-2 pointer-events-none",children:m.map(Z=>i.jsx("div",{className:`
                absolute w-2.5 h-2.5 rounded-full -top-0.5 transform -translate-x-1/2
                transition-all duration-300 cursor-pointer pointer-events-auto
                ${Z.fired?"bg-green-400 shadow-[0_0_6px_rgba(74,222,128,0.6)]":"bg-slate-500 hover:bg-slate-400"}
              `,style:{left:`${Z.t*100}%`},onMouseEnter:()=>v(Z),onMouseLeave:()=>v(null),onClick:()=>o(Z.t),title:Z.label},Z.id))})]}),i.jsxs("div",{className:"flex items-center justify-between",children:[i.jsxs("div",{className:"flex items-center gap-2",children:[i.jsx("span",{className:"text-sm font-medium text-slate-200",children:c}),p&&i.jsx("span",{className:"text-xs text-blue-400 animate-pulse",children:"Scrubbing..."})]}),i.jsxs("span",{className:"text-sm text-slate-400 tabular-nums",children:[Math.round(f*100),"% complete"]})]}),N&&i.jsx("div",{className:"mt-3 pt-3 border-t border-slate-700/50",children:i.jsxs("div",{className:"flex items-start gap-2",children:[i.jsx("div",{className:`w-2 h-2 rounded-full mt-1.5 flex-shrink-0 ${N.fired?"bg-green-400":"bg-slate-500"}`}),i.jsxs("div",{children:[i.jsx("div",{className:"text-sm font-medium text-slate-200",children:N.label}),i.jsx("div",{className:"text-xs text-slate-400 mt-0.5",children:N.description})]})]})}),i.jsx("div",{className:"mt-3 pt-3 border-t border-slate-700/50",children:i.jsxs("div",{className:"flex items-start gap-2",children:[i.jsx("div",{className:`w-2 h-2 rounded-full mt-1.5 flex-shrink-0 ${O(u,!0)}`}),i.jsx("div",{children:i.jsx("div",{className:"text-xs text-slate-400",children:u.description})})]})})]}):null},zg={epidermis:{id:"epidermis",title:"Epidermis",layer:"Epidermis",description:"The outermost layer of skin, composed primarily of keratinocytes in various stages of differentiation. It provides a waterproof barrier, protects against pathogens, and regulates water loss from the body.",funFact:"The epidermis has no blood vessels - it receives nutrients by diffusion from the dermis below.",learningObjectives:` Identify the five strata of the epidermis (from deep to superficial): stratum basale, spinosum, granulosum, lucidum, corneum
 Explain how keratinocyte differentiation creates a protective barrier
 Describe the role of melanocytes, Langerhans cells, and Merkel cells
 Understand epidermal turnover time (~28 days) and clinical implications`,clinicalCorrelates:`HIGH-YIELD: Psoriasis shows accelerated epidermal turnover (3-5 days vs 28 days), causing silvery scale.

BOARD PEARL: Pemphigus vulgaris = intraepidermal blisters (anti-desmoglein antibodies); Bullous pemphigoid = subepidermal blisters (anti-hemidesmosome antibodies).

CLINICAL: Actinic keratoses arise from chronic UV damage to basal keratinocytes and are premalignant (can progress to SCC).`,references:["Fitzpatrick's Dermatology, 9th Ed, Ch. 7","USMLE First Aid - Dermatology","Robbins Pathology, 10th Ed"],relatedConditions:["psoriasis","eczema","acne"]},dermis:{id:"dermis",title:"Dermis",layer:"Dermis",description:"The thick middle layer of skin containing collagen and elastin fibers, blood vessels, nerves, hair follicles, and sweat glands. It provides strength, elasticity, and nourishment to the skin.",funFact:"The dermis can be 10-40 times thicker than the epidermis depending on body location.",learningObjectives:` Distinguish papillary dermis (loose CT, type III collagen) from reticular dermis (dense CT, type I collagen)
 Identify dermal appendages and their embryonic origins
 Explain the dermal-epidermal junction (DEJ) and its basement membrane components
 Describe wound healing phases: hemostasis, inflammation, proliferation, remodeling`,clinicalCorrelates:`HIGH-YIELD: Type I collagen defects = Osteogenesis Imperfecta; Type III collagen defects = Ehlers-Danlos (vascular type).

BOARD PEARL: Dermal papillae create the "rete ridges" pattern; loss of this pattern occurs in lichen sclerosus and can indicate pathology.

CLINICAL: Keloids result from excessive type I and III collagen deposition during wound healing, more common in darker skin types.`,references:["Gray's Anatomy, 42nd Ed","Fitzpatrick's Dermatology, 9th Ed, Ch. 6","Wound Repair and Regeneration Journal"],relatedConditions:["photoaging","psoriasis"]},hypodermis:{id:"hypodermis",title:"Hypodermis (Subcutis)",layer:"Hypodermis",description:"The deepest layer of skin, composed mainly of adipose tissue (fat cells). It insulates the body, cushions and protects underlying muscles and bones, and anchors the skin to underlying structures.",funFact:"The hypodermis can store up to 50% of body fat and plays a major role in temperature regulation.",learningObjectives:` Describe the composition of subcutaneous fat (white adipose tissue)
 Explain the role in thermoregulation and mechanical protection
 Identify septal structures that anchor skin to underlying fascia
 Understand subcutaneous drug administration pharmacokinetics`,clinicalCorrelates:`HIGH-YIELD: Panniculitis = inflammation of subcutaneous fat. Erythema nodosum is the most common form (septal panniculitis).

BOARD PEARL: Lipodermatosclerosis ("inverted champagne bottle" legs) = chronic venous insufficiency causing subcutaneous fibrosis.

CLINICAL: Lipomas arise from subcutaneous adipocytes; liposarcomas are rare malignant variants.`,references:["Fitzpatrick's Dermatology, 9th Ed, Ch. 8","USMLE First Aid - Pathology","Andrews' Diseases of the Skin"],relatedConditions:["photoaging"]},stratum_corneum:{id:"stratum_corneum",title:"Stratum Corneum",layer:"Epidermis",description:"The outermost layer of the epidermis, consisting of dead cells (corneocytes) embedded in a lipid matrix. This layer serves as the primary barrier between the body and the environment.",funFact:"Dust in your home is largely made up of dead skin cells from this layer.",learningObjectives:` Describe the "brick and mortar" model (corneocytes + lipid lamellae)
 Explain the role of ceramides, cholesterol, and free fatty acids in barrier function
 Understand transepidermal water loss (TEWL) as a measure of barrier integrity
 Identify filaggrin's role in barrier formation and its clinical significance`,clinicalCorrelates:`HIGH-YIELD: Filaggrin mutations (FLG) are the strongest genetic risk factor for atopic dermatitis and ichthyosis vulgaris.

BOARD PEARL: "Brick and mortar" model - corneocytes are the bricks, intercellular lipids (ceramides, cholesterol, fatty acids) are the mortar.

CLINICAL: Impaired barrier function increases allergen penetration, explaining the atopic march (eczema  asthma  allergic rhinitis).`,references:["Journal of Investigative Dermatology - Barrier Function Reviews","Fitzpatrick's Dermatology, 9th Ed, Ch. 7"],relatedConditions:["eczema","psoriasis"]},keratinocytes:{id:"keratinocytes",title:"Keratinocytes",layer:"Epidermis",description:"The primary cell type of the epidermis (90-95%). They produce keratin proteins that provide strength and waterproofing to the skin, and undergo terminal differentiation as they migrate upward.",funFact:"These cells migrate from the bottom of the epidermis to the top over a period of about 4 weeks.",learningObjectives:` Trace keratinocyte differentiation from basal stem cells to corneocytes
 Identify keratin pairs expressed at each epidermal layer (K5/K14 basal, K1/K10 suprabasal)
 Explain the role of desmosomes and hemidesmosomes in cell adhesion
 Describe keratinocyte cytokine production in inflammatory responses`,clinicalCorrelates:`HIGH-YIELD: K5/K14 mutations = Epidermolysis Bullosa Simplex (basal layer blistering). K1/K10 mutations = Epidermolytic hyperkeratosis.

BOARD PEARL: Keratinocytes produce antimicrobial peptides (defensins, cathelicidins) - part of innate immunity.

CLINICAL: Squamous cell carcinoma arises from malignant transformation of keratinocytes; HPV oncoproteins E6/E7 drive this in some cases.`,references:["USMLE First Aid - Cell Biology","Fitzpatrick's Dermatology, 9th Ed, Ch. 45","Molecular Biology of the Cell, 6th Ed"],relatedConditions:["psoriasis","acne","eczema"]},hair_follicle:{id:"hair_follicle",title:"Hair Follicle",layer:"Dermis",description:"A mammalian skin organ that produces hair. The follicle contains stem cells in the bulge region, is connected to sebaceous glands, and cycles through growth phases.",funFact:"Hair follicles go through cycles of growth (anagen), regression (catagen), and rest (telogen).",learningObjectives:` Describe the hair cycle: anagen (2-7 years), catagen (2-3 weeks), telogen (3 months)
 Locate the bulge region and its role as a stem cell niche
 Explain the pilosebaceous unit (follicle + sebaceous gland + arrector pili)
 Identify androgen-sensitive vs androgen-independent hair`,clinicalCorrelates:`HIGH-YIELD: Androgenetic alopecia = miniaturization of androgen-sensitive follicles (vertex, frontal scalp). 5-reductase converts testosterone  DHT.

BOARD PEARL: Alopecia areata = autoimmune attack on anagen hair bulb ("exclamation point hairs"). Associated with other autoimmune conditions.

CLINICAL: Telogen effluvium = synchronized shedding 2-3 months after stressor (illness, childbirth, surgery). Self-limiting.`,references:["Fitzpatrick's Dermatology, 9th Ed, Ch. 85-87","JAAD Hair Biology Reviews","USMLE First Aid - Dermatology"],relatedConditions:["acne"]},arrector_pili:{id:"arrector_pili",title:"Arrector Pili Muscle",layer:"Dermis",description:"Small smooth muscles attached to hair follicles in mammals. Contraction causes piloerection (goosebumps) and may help express sebum from sebaceous glands.",funFact:"This reaction is a vestigial reflex from our hairier ancestors to appear larger or retain heat.",learningObjectives:` Identify the arrector pili as smooth muscle (autonomic innervation)
 Explain sympathetic control via -adrenergic receptors
 Describe the anatomical relationship with the hair follicle bulge region
 Understand the role in sebum secretion`,clinicalCorrelates:`HIGH-YIELD: Arrector pili are innervated by sympathetic nervous system - "fight or flight" causes piloerection.

BOARD PEARL: Pilomatricoma (pilomatrixoma) arises from hair matrix cells; shows "ghost cells" on histology.

CLINICAL: Arrector pili attachment to the bulge region may provide mechanical signals important for hair cycling.`,references:["Gray's Anatomy, 42nd Ed","Fitzpatrick's Dermatology, 9th Ed, Ch. 5"],relatedConditions:[]},sweat_gland:{id:"sweat_gland",title:"Eccrine Sweat Gland",layer:"Dermis",description:"Coiled tubular glands that discharge hypotonic sweat directly onto the skin surface via a duct. Primary function is thermoregulation through evaporative cooling.",funFact:"You have between 2 and 4 million sweat glands on your body.",learningObjectives:` Distinguish eccrine (thermoregulation, palms/soles) from apocrine (axillae, groin, emotional sweating)
 Describe sweat composition (hypotonic, NaCl, urea, lactate)
 Explain cholinergic innervation of eccrine glands (sympathetic but uses ACh)
 Understand the reabsorption function of the sweat duct`,clinicalCorrelates:`HIGH-YIELD: Cystic fibrosis = defective CFTR chloride channel  elevated sweat chloride (>60 mEq/L diagnostic). "Sweat test" is diagnostic.

BOARD PEARL: Eccrine glands are innervated by sympathetic fibers but use acetylcholine (exception to sympathetic = norepinephrine rule).

CLINICAL: Hyperhidrosis (excessive sweating) can be treated with botulinum toxin (blocks ACh release) or aluminum chloride antiperspirants.`,references:["USMLE First Aid - Physiology","Fitzpatrick's Dermatology, 9th Ed, Ch. 83","Robbins Pathology, 10th Ed"],relatedConditions:["rosacea"]},blood_vessels:{id:"blood_vessels",title:"Blood Vessels",layer:"Dermis",description:"A network of arterioles, venules, and capillaries arranged in superficial and deep plexuses. Provides nutrients, removes waste, and critically regulates body temperature through vasodilation/vasoconstriction.",funFact:"The skin holds about 25-30% of the body's blood volume at any given time.",learningObjectives:` Describe the two horizontal plexuses: superficial (papillary) and deep (reticular/subcutaneous)
 Explain thermoregulatory control via arteriovenous anastomoses
 Identify the role of cutaneous vasculature in blood pressure regulation
 Understand endothelial cell function and angiogenesis`,clinicalCorrelates:`HIGH-YIELD: Vasculitis = inflammation of vessel walls. Leukocytoclastic vasculitis shows palpable purpura (non-blanching).

BOARD PEARL: Cutaneous small-vessel vasculitis involves postcapillary venules; shows "nuclear dust" (karyorrhexis) on histology.

CLINICAL: Rosacea involves dysregulated neurovascular control  flushing, persistent erythema, telangiectasias. Triggers include heat, alcohol, spicy food.`,references:["Fitzpatrick's Dermatology, 9th Ed, Ch. 100-103","USMLE First Aid - Cardiovascular","Robbins Pathology, 10th Ed"],relatedConditions:["rosacea","photoaging"]},collagen:{id:"collagen",title:"Collagen Matrix",layer:"Dermis",description:"The main structural protein in the dermal extracellular matrix, primarily type I (80-90%) and type III (10-20%). Provides tensile strength and is synthesized by fibroblasts.",funFact:"Collagen production decreases about 1% per year after age 20, contributing to wrinkles.",learningObjectives:` Describe collagen synthesis: procollagen  propeptide cleavage  tropocollagen  cross-linking
 Identify the role of vitamin C in hydroxylation of proline and lysine residues
 Distinguish collagen types: I (skin, bone), II (cartilage), III (blood vessels, fetal skin), IV (basement membrane)
 Explain MMP (matrix metalloproteinase) role in collagen degradation and remodeling`,clinicalCorrelates:`HIGH-YIELD: Scurvy (vitamin C deficiency) = impaired collagen cross-linking  poor wound healing, bleeding gums, perifollicular hemorrhage.

BOARD PEARL: Ehlers-Danlos syndrome types involve different collagen defects: classical (Type V collagen), vascular (Type III), kyphoscoliotic (lysyl hydroxylase).

CLINICAL: Photoaging involves UV-induced MMP upregulation  collagen degradation  wrinkles. Retinoids inhibit MMPs and stimulate new collagen.`,references:["USMLE First Aid - Biochemistry","Fitzpatrick's Dermatology, 9th Ed, Ch. 62","Journal of Investigative Dermatology"],relatedConditions:["photoaging"]},nerves:{id:"nerves",title:"Sensory Nerves",layer:"Dermis",description:"A network of sensory nerve fibers detecting touch, pressure, temperature, and pain. Includes free nerve endings (pain, temperature), Meissner corpuscles (light touch), Pacinian corpuscles (pressure/vibration), and Merkel cells (sustained pressure).",funFact:"Your fingertips have about 2,500 receptors per square centimeter, one of the highest concentrations in the body.",learningObjectives:` Classify mechanoreceptors: rapidly adapting (Meissner, Pacinian) vs slowly adapting (Merkel, Ruffini)
 Map dermatomes and understand referred sensation patterns
 Describe the types of nerve fibers: A (touch), A (fast pain, cold), C (slow pain, warmth)
 Explain the gate control theory of pain`,clinicalCorrelates:`HIGH-YIELD: Herpes zoster (shingles) follows dermatomal distribution because VZV reactivates from dorsal root ganglia.

BOARD PEARL: Meissner corpuscles (glabrous skin, light touch) vs Pacinian corpuscles (deep pressure, vibration) - both rapidly adapting but different depths.

CLINICAL: Diabetic neuropathy often presents as "stocking-glove" distribution, affecting longest nerves first (feet before hands).`,references:["USMLE First Aid - Neurology","Gray's Anatomy, 42nd Ed","Fitzpatrick's Dermatology, 9th Ed, Ch. 94"],relatedConditions:["eczema"]},adipose:{id:"adipose",title:"Adipose Tissue (Fat)",layer:"Hypodermis",description:"Loose connective tissue composed of adipocytes (white adipose tissue). Functions include energy storage, insulation, mechanical cushioning, and endocrine signaling.",funFact:"Adipose tissue produces hormones like leptin (satiety), adiponectin (insulin sensitivity), and inflammatory cytokines.",learningObjectives:` Distinguish white adipose tissue (energy storage, single large lipid droplet) from brown adipose tissue (thermogenesis, multiple droplets, UCP1)
 Describe adipokine signaling: leptin, adiponectin, resistin, TNF-
 Explain lipogenesis vs lipolysis and hormonal regulation (insulin, catecholamines)
 Understand the metabolic syndrome connection to visceral adiposity`,clinicalCorrelates:`HIGH-YIELD: Leptin resistance in obesity  continued appetite despite high leptin levels. Leptin deficiency = rare cause of severe early-onset obesity.

BOARD PEARL: Lipodystrophies = loss of adipose tissue  insulin resistance, hepatic steatosis, hypertriglyceridemia (fat has nowhere to go).

CLINICAL: Subcutaneous fat injection (lipoatrophy) from insulin or HIV medications can be disfiguring; newer formulations and techniques minimize this.`,references:["USMLE First Aid - Endocrinology","Fitzpatrick's Dermatology, 9th Ed, Ch. 8","New England Journal of Medicine - Adipose Tissue Reviews"],relatedConditions:["photoaging"]}};async function c0(){const u={isSupported:!1,supportsVR:!1,supportsAR:!1,supportsInline:!1};if(!("xr"in navigator))return u;try{const c=navigator.xr;return u.supportsVR=await c.isSessionSupported("immersive-vr").catch(()=>!1),u.supportsAR=await c.isSessionSupported("immersive-ar").catch(()=>!1),u.supportsInline=await c.isSessionSupported("inline").catch(()=>!1),u.isSupported=u.supportsVR||u.supportsAR,u}catch(c){return console.warn("Error checking WebXR support:",c),u}}const Wm=({renderer:u,mode:c="immersive-vr",onSessionStart:f,onSessionEnd:o,className:m,domOverlayRoot:h})=>{const[S,N]=x.useState(null),[v,p]=x.useState(!1),[D,T]=x.useState(!1),[G,Y]=x.useState(null),[X,O]=x.useState(null);x.useEffect(()=>{c0().then(N)},[]),x.useEffect(()=>()=>{X&&X.end().catch(console.warn)},[X]);const xe=S?c==="immersive-ar"?S.supportsAR:S.supportsVR:!1,Z=async()=>{var me;if(u){if(X){try{await X.end()}catch(U){console.warn("Error ending session:",U)}return}T(!0),Y(null);try{const U=navigator.xr,le={optionalFeatures:["local-floor","bounded-floor","hand-tracking"]};c==="immersive-ar"&&((me=le.optionalFeatures)==null||me.push("hit-test","dom-overlay","light-estimation"),h&&(le.domOverlay={root:h}));const fe=await U.requestSession(c,le);u.xr.enabled=!0,await u.xr.setSession(fe),O(fe),p(!0),f==null||f(),fe.addEventListener("end",()=>{O(null),p(!1),o==null||o()})}catch(U){console.error("Failed to start XR session:",U),Y(U instanceof Error?U.message:"Failed to start XR"),setTimeout(()=>Y(null),3e3)}finally{T(!1)}}};return S?xe?G?i.jsxs("button",{disabled:!0,className:`px-4 py-2 rounded-lg bg-red-900/50 text-red-300 text-sm cursor-not-allowed flex items-center gap-2 ${m}`,children:[i.jsx("svg",{className:"w-4 h-4",fill:"none",viewBox:"0 0 24 24",stroke:"currentColor",children:i.jsx("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:2,d:"M12 9v2m0 4h.01m-6.938 4h13.856c1.54 0 2.502-1.667 1.732-3L13.732 4c-.77-1.333-2.694-1.333-3.464 0L3.34 16c-.77 1.333.192 3 1.732 3z"})}),G]}):i.jsxs("button",{onClick:Z,disabled:D||!u,className:`
        px-4 py-2 rounded-lg text-sm font-medium transition-all
        flex items-center gap-2
        ${v?"bg-red-600 hover:bg-red-500 text-white":"bg-blue-600 hover:bg-blue-500 text-white"}
        ${D?"opacity-70 cursor-wait":""}
        ${u?"":"opacity-50 cursor-not-allowed"}
        ${m}
      `,children:[D?i.jsx("span",{className:"w-4 h-4 border-2 border-white border-t-transparent rounded-full animate-spin"}):c==="immersive-ar"?i.jsxs("svg",{className:"w-4 h-4",fill:"none",viewBox:"0 0 24 24",stroke:"currentColor",children:[i.jsx("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:2,d:"M3 9a2 2 0 012-2h.93a2 2 0 001.664-.89l.812-1.22A2 2 0 0110.07 4h3.86a2 2 0 011.664.89l.812 1.22A2 2 0 0018.07 7H19a2 2 0 012 2v9a2 2 0 01-2 2H5a2 2 0 01-2-2V9z"}),i.jsx("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:2,d:"M15 13a3 3 0 11-6 0 3 3 0 016 0z"})]}):i.jsx("svg",{className:"w-4 h-4",fill:"none",viewBox:"0 0 24 24",stroke:"currentColor",children:i.jsx("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:2,d:"M9.75 17L9 20l-1 1h8l-1-1-.75-3M3 13h18M5 17h14a2 2 0 002-2V5a2 2 0 00-2-2H5a2 2 0 00-2 2v10a2 2 0 002 2z"})}),D?"Starting...":v?`Exit ${c==="immersive-ar"?"AR":"VR"}`:`Enter ${c==="immersive-ar"?"AR":"VR"}`]}):i.jsxs("button",{disabled:!0,className:`px-4 py-2 rounded-lg bg-slate-800/50 text-slate-500 text-sm cursor-not-allowed flex items-center gap-2 ${m}`,title:`${c==="immersive-ar"?"AR":"VR"} is not supported on this device`,children:[i.jsx("svg",{className:"w-4 h-4",fill:"none",viewBox:"0 0 24 24",stroke:"currentColor",children:i.jsx("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:2,d:"M18.364 18.364A9 9 0 005.636 5.636m12.728 12.728A9 9 0 015.636 5.636m12.728 12.728L5.636 5.636"})}),c==="immersive-ar"?"AR":"VR"," Not Available"]}):i.jsxs("button",{disabled:!0,className:`px-4 py-2 rounded-lg bg-slate-700/50 text-slate-500 text-sm flex items-center gap-2 ${m}`,children:[i.jsx("span",{className:"w-4 h-4 border-2 border-slate-500 border-t-transparent rounded-full animate-spin"}),"Checking XR..."]})},_g=({renderer:u,onSessionStart:c,onSessionEnd:f,className:o,domOverlayRoot:m})=>{const[h,S]=x.useState(null);return x.useEffect(()=>{c0().then(S)},[]),!h||!h.isSupported?null:i.jsxs("div",{className:`flex gap-2 ${o}`,children:[h.supportsVR&&i.jsx(Wm,{renderer:u,mode:"immersive-vr",onSessionStart:c,onSessionEnd:f}),h.supportsAR&&i.jsx(Wm,{renderer:u,mode:"immersive-ar",onSessionStart:c,onSessionEnd:f})]})},Dg=({isPresenting:u,onRecenter:c,scale:f,onScaleChange:o,onPaletteCycle:m,collagenReduced:h,onCollagenToggle:S})=>u?i.jsx("div",{className:"fixed top-4 left-1/2 -translate-x-1/2 z-40 pointer-events-auto bg-slate-900/80 border border-slate-700 rounded-xl px-4 py-3 shadow-lg backdrop-blur",children:i.jsxs("div",{className:"flex items-center gap-4 text-sm text-slate-100",children:[i.jsx("button",{onClick:c,className:"px-3 py-1.5 rounded-lg bg-blue-600 hover:bg-blue-500 text-white text-xs font-semibold",children:"Recenter"}),i.jsxs("div",{className:"flex items-center gap-2",children:[i.jsx("span",{className:"text-xs text-slate-300",children:"Scale"}),i.jsx("input",{type:"range",min:.25,max:.7,step:.01,value:f,onChange:N=>o(parseFloat(N.target.value)),className:"w-28 accent-blue-400"}),i.jsxs("span",{className:"text-xs text-slate-400 w-10 text-right",children:[f.toFixed(2),"m"]})]}),i.jsx("button",{onClick:m,className:"px-3 py-1.5 rounded-lg bg-slate-800 hover:bg-slate-700 text-xs text-slate-100 border border-slate-600",children:"Palette"}),i.jsx("button",{onClick:S,className:`px-3 py-1.5 rounded-lg text-xs font-semibold border ${h?"bg-amber-600/80 border-amber-400 text-white":"bg-slate-800 border-slate-600 text-slate-100"}`,children:h?"Collagen: Low":"Collagen: Full"})]})}):null,Rg=({onClose:u})=>i.jsx("div",{className:"fixed inset-0 bg-black/60 flex items-center justify-center z-50",onClick:u,children:i.jsxs("div",{className:"bg-slate-900 border border-slate-700 rounded-xl p-6 max-w-md w-full mx-4 shadow-2xl",onClick:c=>c.stopPropagation(),children:[i.jsxs("div",{className:"flex items-center justify-between mb-4",children:[i.jsx("h2",{className:"text-lg font-semibold text-slate-100",children:"Skinoculars Help"}),i.jsx("button",{onClick:u,className:"text-slate-400 hover:text-slate-200 text-xl",children:""})]}),i.jsxs("div",{className:"space-y-4 text-[12px] text-slate-300",children:[i.jsxs("section",{children:[i.jsx("h3",{className:"font-semibold text-slate-200 mb-1",children:"Navigation"}),i.jsxs("ul",{className:"space-y-1 ml-2",children:[i.jsxs("li",{children:[" ",i.jsx("strong",{children:"Rotate:"})," Click and drag"]}),i.jsxs("li",{children:[" ",i.jsx("strong",{children:"Zoom:"})," Scroll wheel / pinch"]}),i.jsxs("li",{children:[" ",i.jsx("strong",{children:"Pan:"})," Right-click and drag"]})]})]}),i.jsxs("section",{children:[i.jsx("h3",{className:"font-semibold text-slate-200 mb-1",children:"Keyboard Shortcuts"}),i.jsxs("ul",{className:"space-y-1 ml-2",children:[i.jsxs("li",{children:[" ",i.jsx("kbd",{className:"bg-slate-800 px-1.5 py-0.5 rounded text-[10px]",children:"S"})," Study mode"]}),i.jsxs("li",{children:[" ",i.jsx("kbd",{className:"bg-slate-800 px-1.5 py-0.5 rounded text-[10px]",children:"Q"})," Quiz mode"]}),i.jsxs("li",{children:[" ",i.jsx("kbd",{className:"bg-slate-800 px-1.5 py-0.5 rounded text-[10px]",children:"C"})," Compare mode"]}),i.jsxs("li",{children:[" ",i.jsx("kbd",{className:"bg-slate-800 px-1.5 py-0.5 rounded text-[10px]",children:"T"})," Tours mode"]}),i.jsxs("li",{children:[" ",i.jsx("kbd",{className:"bg-slate-800 px-1.5 py-0.5 rounded text-[10px]",children:"R"})," Reset view"]}),i.jsxs("li",{children:[" ",i.jsx("kbd",{className:"bg-slate-800 px-1.5 py-0.5 rounded text-[10px]",children:"H"})," Toggle help"]}),i.jsxs("li",{children:[" ",i.jsx("kbd",{className:"bg-slate-800 px-1.5 py-0.5 rounded text-[10px]",children:"F"})," Fullscreen"]}),i.jsxs("li",{children:[" ",i.jsx("kbd",{className:"bg-slate-800 px-1.5 py-0.5 rounded text-[10px]",children:"1"})," ",i.jsx("kbd",{className:"bg-slate-800 px-1.5 py-0.5 rounded text-[10px]",children:"2"})," ",i.jsx("kbd",{className:"bg-slate-800 px-1.5 py-0.5 rounded text-[10px]",children:"3"})," Zoom levels"]})]})]}),i.jsxs("section",{children:[i.jsx("h3",{className:"font-semibold text-slate-200 mb-1",children:"Features"}),i.jsxs("ul",{className:"space-y-1 ml-2",children:[i.jsx("li",{children:" Click structures to learn about them"}),i.jsx("li",{children:' Use "Explode" slider to separate layers'}),i.jsx("li",{children:" Toggle layers on/off in controls panel"}),i.jsx("li",{children:" Try disease presets to see pathology"}),i.jsx("li",{children:" Take the Quiz to test your knowledge"})]})]})]}),i.jsx("button",{onClick:u,className:"mt-6 w-full bg-blue-600 hover:bg-blue-500 text-white py-2 rounded-lg text-[12px] font-medium transition-colors",children:"Got it!"})]})}),Og=()=>{const u=x.useRef(null),{isMobile:c}=n0(),[f,o]=x.useState(null),[m,h]=x.useState(!1),[S,N]=x.useState(.35);x.useEffect(()=>{let H=!1;const je=()=>{var ea;if(H)return;const Dt=((ea=u.current)==null?void 0:ea.getRenderer())??null;Dt?o(Dt):requestAnimationFrame(je)};return je(),()=>{H=!0}},[]),x.useEffect(()=>{if(!f)return;const H=()=>h(!0),je=()=>h(!1);return f.xr.addEventListener("sessionstart",H),f.xr.addEventListener("sessionend",je),h(f.xr.isPresenting),()=>{f.xr.removeEventListener("sessionstart",H),f.xr.removeEventListener("sessionend",je)}},[f]);const[v,p]=x.useState("study"),[D,T]=x.useState("en"),[G,Y]=x.useState(0),[X,O]=x.useState({epidermis:!0,dermis:!0,hypodermis:!0,structures:{hair:!0,sweat:!0,collagen:!0,nerves:!0,vessels:!0}}),[xe,Z]=x.useState("normal"),[me,U]=x.useState("none"),[le,fe]=x.useState(0),[De,de]=x.useState("macro"),[ce,ve]=x.useState(!1),[W,F]=x.useState(.5),[he,ae]=x.useState(!1),{currentPhase:we,dayLabel:Pe,events:A,setProgress:B}=Qp(le,fe),[oe,Re]=x.useState(null),[Te,y]=x.useState(null),[_,Q]=x.useState(null),[ee,pe]=x.useState(0),[Se,Ne]=x.useState(!1),[Je,ye]=x.useState(!1),[Qt,Le]=x.useState(!1),[Ft,Mt]=x.useState(!1),[st,qt]=x.useState(!1),[it,nl]=x.useState("clinical"),[We,dt]=x.useState(3),[sl,gl]=x.useState($o),[xl,Ml]=x.useState(.6),[Tt,Jt]=x.useState(Po),En=x.useCallback(()=>{gl(H=>({...H,dose:1})),setTimeout(()=>gl(H=>({...H,dose:0})),2e3)},[]),[Da,ua]=x.useState(()=>typeof window<"u"?localStorage.getItem("dermoviz-tooltips")!=="false":!0),[An,zn]=x.useState(()=>typeof window<"u"?localStorage.getItem("dermoviz-auto-rotate")==="true":!1),[_n,ga]=x.useState(()=>typeof window<"u"?localStorage.getItem("dermoviz-high-contrast")==="true":!1),[xa,lt]=x.useState(()=>typeof window<"u"?localStorage.getItem("dermoviz-collagen-reduced")==="true":!1),Ca=x.useCallback(H=>{ua(H),typeof window<"u"&&localStorage.setItem("dermoviz-tooltips",String(H))},[]),Vt=x.useCallback(H=>{zn(H),typeof window<"u"&&localStorage.setItem("dermoviz-auto-rotate",String(H))},[]),$l=x.useCallback(H=>{ga(H),typeof window<"u"&&localStorage.setItem("dermoviz-high-contrast",String(H))},[]),Dn=x.useCallback(H=>{lt(H),typeof window<"u"&&localStorage.setItem("dermoviz-collagen-reduced",String(H))},[]),as=x.useCallback(()=>{const H=["clinical","he","masson"],je=H.indexOf(it),Dt=H[(je+1)%H.length];nl(Dt)},[it]),Tl=x.useCallback(H=>{var je;N(H),(je=u.current)==null||je.setAnchorScale(H)},[]),El=x.useCallback(()=>{var H;(H=u.current)==null||H.resetAnchor()},[]);$m.useEffect(()=>{const H=()=>{ua(localStorage.getItem("dermoviz-tooltips")!=="false"),zn(localStorage.getItem("dermoviz-auto-rotate")==="true"),ga(localStorage.getItem("dermoviz-high-contrast")==="true"),lt(localStorage.getItem("dermoviz-collagen-reduced")==="true")};return window.addEventListener("storage",H),Je||H(),()=>window.removeEventListener("storage",H)},[Je]);const[Pl,rt]=x.useState(!0),[yl,bl]=x.useState(0),Al=x.useCallback((H,je)=>{rt(H),bl(je)},[]),[il,Ra]=x.useState(!1),[zl,k]=x.useState(null),[q,V]=x.useState(()=>typeof window<"u"?localStorage.getItem("dermoviz-nav-collapsed")==="true":!1),I=x.useMemo(()=>_?Io.find(H=>H.id===_)??null:null,[_]),ie=x.useCallback(H=>{if(il&&H){k(H),setTimeout(()=>k(null),100);return}if(!H){Re(null);return}const je=zg[H];je&&Re(je)},[il]),J=x.useCallback(H=>{Ra(H),H||k(null)},[]),K=x.useCallback((H,je,Dt)=>{y(H?{id:H,x:je,y:Dt}:null)},[]),te=x.useCallback(()=>{var H;(H=u.current)==null||H.resetView(),de("macro"),Y(0),ve(!1)},[]),$=x.useCallback(()=>{V(H=>{const je=!H;return localStorage.setItem("dermoviz-nav-collapsed",String(je)),je})},[]),P=x.useCallback(H=>{p(H),H==="compare"?(Le(!0),Mt(!1)):H==="quiz"?(Mt(!0),Le(!1)):(Le(!1),Mt(!1)),H==="tours"||(Q(null),pe(0))},[]),ne=x.useCallback(H=>{O(je=>({...je,structures:{...je.structures,[H]:!je.structures[H]}}))},[]),Ge=x.useCallback(H=>{O(je=>({...je,[H]:!je[H]}))},[]),bt=ce?W:null,Ve=H=>({epidermis:"Epidermis",dermis:"Dermis",hypodermis:"Hypodermis",stratum_corneum:"Stratum Corneum",keratinocytes:"Keratinocytes",collagen:"Collagen Matrix",sweat_gland:"Sweat Gland",hair_follicle:"Hair Follicle",blood_vessels:"Blood Vessels",nerves:"Nerve Fibers",adipose:"Adipose Tissue",arrector_pili:"Arrector Pili Muscle"})[H]||H,da=()=>v==="quiz"?null:v==="tours"&&I&&I.steps[ee]?i.jsxs("div",{className:"absolute bottom-4 right-4 max-w-sm bg-slate-900/95 border border-slate-700 rounded-xl shadow-lg p-4",children:[i.jsxs("div",{className:"flex items-center justify-between mb-2",children:[i.jsx("span",{className:"font-semibold text-slate-100",children:I.steps[ee].title}),i.jsx("button",{onClick:()=>{Q(null),pe(0),p("study")},className:"text-slate-400 hover:text-slate-200",children:""})]}),i.jsx("p",{className:"text-sm text-slate-300 mb-3",children:I.steps[ee].narrative}),i.jsxs("div",{className:"flex items-center justify-between",children:[i.jsx("div",{className:"flex gap-1",children:I.steps.map((H,je)=>i.jsx("button",{onClick:()=>pe(je),className:`w-2 h-2 rounded-full transition-colors ${je===ee?"bg-blue-500":"bg-slate-600 hover:bg-slate-500"}`},je))}),i.jsxs("div",{className:"flex gap-2",children:[i.jsx("button",{onClick:()=>pe(H=>Math.max(0,H-1)),disabled:ee===0,className:"px-2 py-1 rounded bg-slate-800 border border-slate-700 text-sm disabled:opacity-50",children:"Prev"}),i.jsx("button",{onClick:()=>pe(H=>Math.min(I.steps.length-1,H+1)),disabled:ee===I.steps.length-1,className:"px-2 py-1 rounded bg-slate-800 border border-slate-700 text-sm disabled:opacity-50",children:"Next"})]})]})]}):v==="tours"&&!_?i.jsx("div",{className:"absolute inset-0 z-10 flex items-center justify-center bg-slate-950/80 backdrop-blur-sm p-4",children:i.jsxs("div",{className:"max-w-4xl w-full",children:[i.jsxs("div",{className:"text-center mb-8",children:[i.jsx("h2",{className:"text-3xl font-bold text-slate-100 mb-2",children:"Guided Tours"}),i.jsx("p",{className:"text-slate-400",children:"Select a topic to begin an interactive guided tour of the skin."})]}),i.jsx("div",{className:"grid grid-cols-1 md:grid-cols-2 lg:grid-cols-3 gap-4",children:Io.map(H=>{var je;return i.jsxs("button",{onClick:()=>{Q(H.id),pe(0)},className:"bg-slate-900 border border-slate-700 hover:border-blue-500 hover:bg-slate-800 rounded-xl p-5 text-left transition-all group",children:[i.jsxs("div",{className:"flex items-center justify-between mb-2",children:[i.jsx("h3",{className:"font-semibold text-slate-200 group-hover:text-blue-400 transition-colors",children:H.label}),i.jsxs("span",{className:"text-xs bg-slate-800 px-2 py-1 rounded text-slate-400 border border-slate-700",children:[H.steps.length," steps"]})]}),i.jsx("p",{className:"text-sm text-slate-400 line-clamp-2",children:((je=H.steps[0])==null?void 0:je.narrative)||"Start this tour to learn more."}),i.jsxs("div",{className:"mt-4 flex items-center text-blue-500 text-sm font-medium opacity-0 group-hover:opacity-100 transition-opacity",children:["Start Tour ",i.jsx("span",{children:""})]})]},H.id)})}),i.jsx("div",{className:"mt-8 text-center",children:i.jsx("button",{onClick:()=>p("study"),className:"text-slate-400 hover:text-slate-200 text-sm underline underline-offset-4",children:"Return to Study Mode"})})]})}):null;return i.jsxs(i.Fragment,{children:[i.jsxs(hg,{mode:v,onModeChange:P,leftNavCollapsed:q,onToggleLeftNav:$,explodeValue:G,onExplodeChange:Y,zoomLevel:De,onZoomChange:de,diseaseId:xe,onDiseaseChange:Z,palette:it,phototype:We,hydration:xl,phValue:Tt.value,clippingEnabled:ce,clippingValue:W,onClippingToggle:()=>ve(H=>!H),onClippingChange:F,onResetView:te,visibility:X,onToggleVisibility:ne,collagenReduced:xa,onCollagenDensityChange:Dn,onToggleLayer:Ge,timelineId:me,onTimelineChange:U,timelineT:le,onTimelineTChange:fe,onSettingsClick:()=>ye(!0),onHelpClick:()=>Ne(!0),highContrast:_n,isXrPresenting:m,onAnchorRecenter:El,anchorScale:S,onAnchorScaleChange:Tl,onPaletteCycle:as,cutawayEnabled:he,onCutawayToggle:()=>ae(H=>!H),infoPanel:oe&&v==="study"?i.jsx(rg,{data:oe,onClose:()=>Re(null),lang:D}):void 0,modeOverlay:da(),children:[i.jsx(Qr,{ref:u,explodeValue:G,visibility:X,onSelectStructure:ie,onHoverStructure:K,diseaseId:xe,timelineId:me,timelineT:le,zoomLevelId:De,activeTourId:_,activeTourStepIndex:ee,clippingNormalized:bt,autoRotate:An,palette:it,phototype:We,uvState:sl,hydration:xl,phValue:Tt.value,collagenReduced:xa,onLoadingChange:Al,cutawayEnabled:he}),me==="wound_healing"&&!c&&i.jsx("div",{className:"absolute bottom-24 left-1/2 -translate-x-1/2 z-20 pointer-events-auto",children:i.jsx(Ag,{currentPhase:we,dayLabel:Pe,t:le,onScrub:B,events:A,isActive:!0})})]}),Da&&Te&&i.jsx("div",{className:`fixed bg-slate-800/95 border border-slate-600 rounded px-2 py-1 text-[11px] text-slate-100 pointer-events-none z-50 shadow-lg ${_n?"border-white text-white":""}`,style:{left:Te.x+12,top:Te.y-8,transform:"translateY(-100%)"},children:Ve(Te.id)}),Se&&i.jsx(Rg,{onClose:()=>Ne(!1)}),i.jsxs("button",{className:"fixed top-4 right-4 z-40 px-3 py-2 rounded-md bg-slate-800/80 border border-slate-700 text-xs text-slate-200 hover:bg-slate-700",onClick:()=>qt(H=>!H),children:[st?"Hide":"Show"," Science HUD"]}),i.jsx("button",{className:"fixed top-4 right-48 z-40 px-3 py-2 rounded-md bg-amber-700/90 border border-amber-500 text-xs text-amber-100 hover:bg-amber-600",onClick:En,children:"UV Pulse"}),st&&i.jsxs("div",{className:"fixed top-14 right-4 z-30 bg-slate-900/90 border border-slate-700 rounded-lg shadow-lg p-3 text-xs text-slate-200 w-60",children:[i.jsxs("div",{className:"flex items-center justify-between mb-2",children:[i.jsx("span",{className:"font-semibold text-slate-100",children:"Scale HUD"}),i.jsx("span",{className:"text-[10px] text-slate-500",children:"1 unit = 1 mm"})]}),i.jsxs("div",{className:"h-1.5 bg-slate-700 rounded relative mb-2",children:[i.jsx("div",{className:"absolute left-0 top-0 h-1.5 bg-blue-500",style:{width:"50%"}}),i.jsx("span",{className:"absolute right-0 -top-4 text-[10px] text-slate-400",children:"1 mm"})]}),i.jsxs("ul",{className:"space-y-1 text-slate-300",children:[i.jsxs("li",{children:["Epidermis: ",Va.epidermisThicknessMm.toFixed(2)," mm"]}),i.jsxs("li",{children:["Papillary dermis: ",Va.papillaryDermisHeightMm.toFixed(2)," mm"]}),i.jsxs("li",{children:["Reticular dermis: ",(Va.dermisThicknessMm-Va.papillaryDermisHeightMm).toFixed(2)," mm"]}),i.jsxs("li",{children:["Hypodermis: ",Va.hypodermisThicknessMm.toFixed(2)," mm"]})]})]}),Je&&i.jsx(Tg,{onClose:()=>ye(!1),lang:D,onLangChange:T,autoRotate:An,tooltipsEnabled:Da,highContrast:_n,onAutoRotateChange:Vt,onTooltipsChange:Ca,onHighContrastChange:$l,phototype:We,onPhototypeChange:H=>dt(H),hydration:xl,onHydrationChange:Ml,phValue:Tt.value,onPhChange:H=>Jt({value:H}),palette:it,onPaletteChange:H=>nl(H),collagenReduced:xa,onCollagenChange:Dn}),i.jsx("div",{className:"fixed bottom-4 left-4 z-40 pointer-events-auto",children:i.jsx(_g,{renderer:f,domOverlayRoot:document.getElementById("xr-overlay")})}),i.jsx("div",{id:"xr-overlay",className:"fixed inset-0 pointer-events-none z-30"}),i.jsx(Dg,{isPresenting:m,onRecenter:El,scale:S,onScaleChange:Tl,onPaletteCycle:as,collagenReduced:xa,onCollagenToggle:()=>Dn(!xa)}),Qt&&i.jsx(cg,{visibility:X,onSelectStructure:ie,onHoverStructure:K,zoomLevelId:De,explodeValue:G,clippingNormalized:bt,onClose:()=>{Le(!1),p("study")}}),Ft&&i.jsx("aside",{className:`
            fixed z-40 transition-all duration-300
            ${c?"inset-0 bg-slate-900/95":"right-0 w-[400px]"}
          `,style:c?{}:{top:50,bottom:70},children:i.jsx(Mg,{onExit:()=>{Mt(!1),Ra(!1),p("study")},onRequestClickMode:J,clickedStructureId:zl,isMobile:c})}),i.jsxs("div",{"aria-live":"polite",className:"sr-only",children:[oe&&`Selected: ${typeof oe.title=="string"?oe.title:oe.title[D]||oe.title.en}`,De==="micro"&&"Now viewing cellular level"]}),Pl&&i.jsx(Eg,{progress:yl,message:"Loading 3D model..."})]})};class Lg extends x.Component{constructor(){super(...arguments),this.state={hasError:!1}}static getDerivedStateFromError(c){return{hasError:!0,error:c}}componentDidCatch(c,f){console.error("Skinoculars error:",c,f)}render(){var c;return this.state.hasError?i.jsx("div",{className:"w-screen h-screen bg-slate-950 flex items-center justify-center",children:i.jsxs("div",{className:"text-center p-8 max-w-md",children:[i.jsx("h1",{className:"text-xl text-red-400 mb-4",children:"Something went wrong"}),i.jsx("p",{className:"text-slate-400 mb-4 text-sm",children:((c=this.state.error)==null?void 0:c.message)||"An unexpected error occurred"}),i.jsx("p",{className:"text-slate-500 text-xs mb-6",children:"This may be due to WebGL compatibility issues or a rendering error."}),i.jsx("button",{onClick:()=>window.location.reload(),className:"px-4 py-2 bg-blue-600 hover:bg-blue-500 rounded text-white text-sm transition",children:"Reload Application"})]})}):this.props.children}}const o0=document.getElementById("root");if(!o0)throw new Error("Could not find root element to mount to");const kg=Op.createRoot(o0);kg.render(i.jsx($m.StrictMode,{children:i.jsx(Lg,{children:i.jsx(Og,{})})}));
